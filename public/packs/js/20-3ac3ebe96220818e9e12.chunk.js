(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{2886:function(n,t,a){var e=a(13),r=a(3047);"string"===typeof(r=r.__esModule?r.default:r)&&(r=[[n.i,r,""]]);var o={insert:"head",singleton:!1};e(r,o);n.exports=r.locals||{}},2887:function(n,t,a){var e=a(13),r=a(3049);"string"===typeof(r=r.__esModule?r.default:r)&&(r=[[n.i,r,""]]);var o={insert:"head",singleton:!1};e(r,o);n.exports=r.locals||{}},2888:function(n,t,a){var e=a(13),r=a(3051);"string"===typeof(r=r.__esModule?r.default:r)&&(r=[[n.i,r,""]]);var o={insert:"head",singleton:!1};e(r,o);n.exports=r.locals||{}},2889:function(n,t,a){var e=a(13),r=a(3053);"string"===typeof(r=r.__esModule?r.default:r)&&(r=[[n.i,r,""]]);var o={insert:"head",singleton:!1};e(r,o);n.exports=r.locals||{}},2890:function(n,t,a){var e=a(13),r=a(3055);"string"===typeof(r=r.__esModule?r.default:r)&&(r=[[n.i,r,""]]);var o={insert:"head",singleton:!1};e(r,o);n.exports=r.locals||{}},2891:function(n,t,a){var e=a(13),r=a(3057);"string"===typeof(r=r.__esModule?r.default:r)&&(r=[[n.i,r,""]]);var o={insert:"head",singleton:!1};e(r,o);n.exports=r.locals||{}},2892:function(n,t,a){var e=a(13),r=a(3059);"string"===typeof(r=r.__esModule?r.default:r)&&(r=[[n.i,r,""]]);var o={insert:"head",singleton:!1};e(r,o);n.exports=r.locals||{}},3046:function(n,t,a){"use strict";a(2886)},3047:function(n,t,a){(t=a(14)(!0)).push([n.i,".macros-pill[data-v-6f9c5e54] {\n  padding: var(--space-slab);\n  background-color: var(--w-500);\n  max-width: -webkit-max-content;\n  max-width: -moz-max-content;\n  max-width: max-content;\n  color: var(--white);\n  font-size: var(--font-size-small);\n  border-radius: var(--border-radius-full);\n  position: relative;\n}\n","",{version:3,sources:["/Users/s.dastan/Desktop/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/macros/app/javascript/dashboard/routes/dashboard/settings/macros/Pill.vue"],names:[],mappings:"AAoBA;EACA,0BAAA;EACA,8BAAA;EACA,8BAAA;EAAA,2BAAA;EAAA,sBAAA;EACA,mBAAA;EACA,iCAAA;EACA,wCAAA;EACA,kBAAA;AACA",file:"Pill.vue",sourcesContent:['<template>\n  <div>\n    <div class="macros-item macros-pill">\n      <span>{{ label }}</span>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    label: {\n      type: String,\n      required: true,\n    },\n  },\n};\n<\/script>\n\n<style scoped>\n.macros-pill {\n  padding: var(--space-slab);\n  background-color: var(--w-500);\n  max-width: max-content;\n  color: var(--white);\n  font-size: var(--font-size-small);\n  border-radius: var(--border-radius-full);\n  position: relative;\n}\n</style>\n']}]),n.exports=t},3048:function(n,t,a){"use strict";a(2887)},3049:function(n,t,a){(t=a(14)(!0)).push([n.i,".macros__action-button[data-v-0462bb77]{\n  height:var(--space-three);\n  width:var(--space-three);\n  display:flex;\n  align-items:center;\n  justify-content:center;\n  cursor:pointer;\n  font-size:var(--font-size-default);\n  border-radius:var(--border-radius-rounded);\n  position:relative;\n  margin-left:var(--space-one)\n}\n.macros__action-button.add[data-v-0462bb77]{\n  background-color:var(--g-100);\n  color:var(--g-600)\n}\n.macros__action-button.delete[data-v-0462bb77]{\n  position:absolute;\n  top:calc(var(--space-three) / -2);\n  right:calc(var(--space-three) / -2);\n  background-color:var(--r-100);\n  color:var(--r-600)\n}","",{version:3,sources:["/Users/s.dastan/Desktop/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/macros/ActionButton.vue"],names:[],mappings:"AAiCA;EACE,yBAAA;EACA,wBAAA;EACA,YAAA;EACA,kBAAA;EACA,sBAAA;EACA,cAAA;EACA,kCAAA;EACA,0CAAA;EACA,iBAAA;EACA;AAAA;AAEA;EACE,6BAAA;EACA;AAAA;AAEF;EACE,iBAAA;EACA,iCAAA;EACA,mCAAA;EACA,6BAAA;EACA;AAAA",file:"ActionButton.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.macros__action-button {\n  height: var(--space-three);\n  width: var(--space-three);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  font-size: var(--font-size-default);\n  border-radius: var(--border-radius-rounded);\n  position: relative;\n  margin-left: var(--space-one);\n\n  &.add {\n    background-color: var(--g-100);\n    color: var(--g-600);\n  }\n  &.delete {\n    position: absolute;\n    top: calc(var(--space-three) / -2);\n    right: calc(var(--space-three) / -2);\n    background-color: var(--r-100);\n    color: var(--r-600);\n  }\n}\n"]}]),n.exports=t},3050:function(n,t,a){"use strict";a(2888)},3051:function(n,t,a){(t=a(14)(!0)).push([n.i,".macro__node-action-container[data-v-37b8a4ea]{\n  position:relative\n}\n.macro__node-action-container .macros__node-drag-handle[data-v-37b8a4ea]{\n  position:absolute;\n  left:var(--space-minus-medium);\n  top:var(--space-smaller);\n  cursor:move;\n  color:var(--s-400)\n}\n.macro__node-action-container .macro__node-action-item[data-v-37b8a4ea]{\n  background-color:var(--white);\n  padding:var(--space-slab);\n  border-radius:var(--border-radius-medium);\n  box-shadow:rgba(0,0,0,.03) 0px 6px 24px 0px,rgba(0,0,0,.06) 0px 0px 0px 1px\n}\n.macro__node-action-container .macro__node-action-item .macro__node-action-button-delete[data-v-37b8a4ea]{\n  display:none\n}\n.macro__node-action-container .macro__node-action-item:hover .macro__node-action-button-delete[data-v-37b8a4ea]{\n  display:flex\n}\n.macro__node-action-container .macro__node-action-item.has-error[data-v-37b8a4ea]{\n  -webkit-animation:shake-data-v-37b8a4ea .3s ease-in-out 0s 2;\n  animation:shake-data-v-37b8a4ea .3s ease-in-out 0s 2;\n  background-color:var(--r-50)\n}\n@-webkit-keyframes shake-data-v-37b8a4ea{\n0%{\n    transform:translateX(0)\n}\n25%{\n    transform:translateX(0.375rem)\n}\n50%{\n    transform:translateX(-0.375rem)\n}\n75%{\n    transform:translateX(0.375rem)\n}\n100%{\n    transform:translateX(0)\n}\n}\n@keyframes shake-data-v-37b8a4ea{\n0%{\n    transform:translateX(0)\n}\n25%{\n    transform:translateX(0.375rem)\n}\n50%{\n    transform:translateX(-0.375rem)\n}\n75%{\n    transform:translateX(0.375rem)\n}\n100%{\n    transform:translateX(0)\n}\n}","",{version:3,sources:["/Users/s.dastan/Desktop/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/macros/MacroNode.vue"],names:[],mappings:"AA0GA;EACE;AAAA;AACA;EACE,iBAAA;EACA,8BAAA;EACA,wBAAA;EACA,WAAA;EACA;AAAA;AAEF;EACE,6BAAA;EACA,yBAAA;EACA,yCAAA;EACA;AAAA;AAGA;EACE;AAAA;AAGA;EACE;AAAA;AAGJ;EACE,4DAAA;EAAA,oDAAA;EACA;AAAA;AAKN;AACE;IACE;AAAA;AAEF;IACE;AAAA;AAEF;IACE;AAAA;AAEF;IACE;AAAA;AAEF;IACE;AAAA;AAAA;AAdJ;AACE;IACE;AAAA;AAEF;IACE;AAAA;AAEF;IACE;AAAA;AAEF;IACE;AAAA;AAEF;IACE;AAAA;AAAA",file:"MacroNode.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.macro__node-action-container {\n  position: relative;\n  .macros__node-drag-handle {\n    position: absolute;\n    left: var(--space-minus-medium);\n    top: var(--space-smaller);\n    cursor: move;\n    color: var(--s-400);\n  }\n  .macro__node-action-item {\n    background-color: var(--white);\n    padding: var(--space-slab);\n    border-radius: var(--border-radius-medium);\n    box-shadow: rgb(0 0 0 / 3%) 0px 6px 24px 0px,\n      rgb(0 0 0 / 6%) 0px 0px 0px 1px;\n\n    .macro__node-action-button-delete {\n      display: none;\n    }\n    &:hover {\n      .macro__node-action-button-delete {\n        display: flex;\n      }\n    }\n    &.has-error {\n      animation: shake 0.3s ease-in-out 0s 2;\n      background-color: var(--r-50);\n    }\n  }\n}\n\n@keyframes shake {\n  0% {\n    transform: translateX(0);\n  }\n  25% {\n    transform: translateX(0.375rem);\n  }\n  50% {\n    transform: translateX(-0.375rem);\n  }\n  75% {\n    transform: translateX(0.375rem);\n  }\n  100% {\n    transform: translateX(0);\n  }\n}\n"]}]),n.exports=t},3052:function(n,t,a){"use strict";a(2889)},3053:function(n,t,a){(t=a(14)(!0)).push([n.i,".macros__nodes[data-v-7a0e6f32]{\n  max-width:800px\n}\n.macro__node[data-v-7a0e6f32]:not(:last-child){\n  position:relative;\n  padding-bottom:var(--space-three)\n}\n.macro__node[data-v-7a0e6f32]:not(:last-child):not(.sortable-chosen):after,.macros__nodes-draggable[data-v-7a0e6f32]:after{\n  content:\"\";\n  position:absolute;\n  height:var(--space-three);\n  width:var(--space-smaller);\n  margin-left:var(--space-medium);\n  background-image:url(\"data:image/svg+xml,%3Csvg width='4' height='30' viewBox='0 0 4 30' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cline x1='1.50098' y1='0.579529' x2='1.50098' y2='30.5795' stroke='%2393afc8' stroke-width='2' stroke-dasharray='5 5'/%3E%3C/svg%3E%0A\")\n}\n.macros__nodes-draggable[data-v-7a0e6f32]{\n  position:relative;\n  padding-bottom:var(--space-three)\n}\n.macros__node-action-container[data-v-7a0e6f32]{\n  position:relative\n}\n.macros__node-action-container .drag-handle[data-v-7a0e6f32]{\n  position:absolute;\n  left:var(--space-minus-medium);\n  top:var(--space-smaller);\n  cursor:move;\n  color:var(--s-400)\n}","",{version:3,sources:["/Users/s.dastan/Desktop/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/macros/MacroNodes.vue"],names:[],mappings:"AAmFA;EACE;AAAA;AAGF;EACE,iBAAA;EACA;AAAA;AAGF;EAEE,UAAA;EACA,iBAAA;EACA,yBAAA;EACA,0BAAA;EACA,+BAAA;EACA;AAAA;AAGF;EACE,iBAAA;EACA;AAAA;AAGF;EACE;AAAA;AACA;EACE,iBAAA;EACA,8BAAA;EACA,wBAAA;EACA,WAAA;EACA;AAAA",file:"MacroNodes.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.macros__nodes {\n  max-width: 800px;\n}\n\n.macro__node:not(:last-child) {\n  position: relative;\n  padding-bottom: var(--space-three);\n}\n\n.macro__node:not(:last-child):not(.sortable-chosen):after,\n.macros__nodes-draggable:after {\n  content: '';\n  position: absolute;\n  height: var(--space-three);\n  width: var(--space-smaller);\n  margin-left: var(--space-medium);\n  background-image: url(\"data:image/svg+xml,%3Csvg width='4' height='30' viewBox='0 0 4 30' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cline x1='1.50098' y1='0.579529' x2='1.50098' y2='30.5795' stroke='%2393afc8' stroke-width='2' stroke-dasharray='5 5'/%3E%3C/svg%3E%0A\");\n}\n\n.macros__nodes-draggable {\n  position: relative;\n  padding-bottom: var(--space-three);\n}\n\n.macros__node-action-container {\n  position: relative;\n  .drag-handle {\n    position: absolute;\n    left: var(--space-minus-medium);\n    top: var(--space-smaller);\n    cursor: move;\n    color: var(--s-400);\n  }\n}\n"]}]),n.exports=t},3054:function(n,t,a){"use strict";a(2890)},3055:function(n,t,a){(t=a(14)(!0)).push([n.i,".macros__properties-panel[data-v-4f2a889b]{\n  padding:var(--space-slab);\n  background-color:var(--white);\n  height:calc(100vh - 5.6rem);\n  display:flex;\n  flex-direction:column;\n  border-left:1px solid var(--s-50)\n}\n.macros__submit-button[data-v-4f2a889b]{\n  margin-top:auto\n}\n.macros__form-visibility-container[data-v-4f2a889b]{\n  margin-top:var(--space-small)\n}\n.macros__form-visibility[data-v-4f2a889b]{\n  display:grid;\n  grid-template-columns:repeat(2, minmax(0, 1fr));\n  grid-gap:var(--space-slab);\n  gap:var(--space-slab)\n}\n.macros__form-visibility .card[data-v-4f2a889b]{\n  padding:var(--space-small);\n  border-radius:var(--border-radius-normal);\n  border:1px solid var(--s-200);\n  text-align:left;\n  cursor:pointer;\n  position:relative\n}\n.macros__form-visibility .card.active[data-v-4f2a889b]{\n  background-color:var(--w-25);\n  border:1px solid var(--w-300)\n}\n.macros__form-visibility .card .visibility-check[data-v-4f2a889b]{\n  position:absolute;\n  color:var(--w-500);\n  top:var(--space-small);\n  right:var(--space-small)\n}\n.subtitle[data-v-4f2a889b]{\n  font-size:var(--font-size-mini);\n  color:var(--s-500)\n}\n.title[data-v-4f2a889b]{\n  display:block;\n  margin:0;\n  font-size:var(--font-size-small);\n  font-weight:var(--font-weight-medium);\n  line-height:1.8;\n  color:var(--color-body)\n}\n.macros__info-panel[data-v-4f2a889b]{\n  margin-top:var(--space-small);\n  display:flex;\n  background-color:var(--s-50);\n  padding:var(--space-small);\n  border-radius:var(--border-radius-normal);\n  align-items:flex-start\n}\n.macros__info-panel svg[data-v-4f2a889b]{\n  flex-shrink:0\n}\n.macros__info-panel p[data-v-4f2a889b]{\n  margin-left:var(--space-small);\n  margin-bottom:0;\n  color:var(--s-600)\n}\n[data-v-4f2a889b] input[type=text]{\n  margin-bottom:0\n}\n[data-v-4f2a889b] .error .message{\n  margin-bottom:0\n}","",{version:3,sources:["/Users/s.dastan/Desktop/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/macros/MacroProperties.vue"],names:[],mappings:"AAmGA;EACE,yBAAA;EACA,6BAAA;EAEA,2BAAA;EACA,YAAA;EACA,qBAAA;EACA;AAAA;AAGF;EACE;AAAA;AAEF;EACE;AAAA;AAEF;EACE,YAAA;EACA,+CAAA;EACA,0BAAA;EAAA;AAAA;AAEA;EACE,0BAAA;EACA,yCAAA;EACA,6BAAA;EACA,eAAA;EACA,cAAA;EACA;AAAA;AAEA;EACE,4BAAA;EACA;AAAA;AAGF;EACE,iBAAA;EACA,kBAAA;EACA,sBAAA;EACA;AAAA;AAKN;EACE,+BAAA;EACA;AAAA;AAGF;EACE,aAAA;EACA,QAAA;EACA,gCAAA;EACA,qCAAA;EACA,eAAA;EACA;AAAA;AAGF;EACE,6BAAA;EACA,YAAA;EACA,4BAAA;EACA,0BAAA;EACA,yCAAA;EACA;AAAA;AACA;EACE;AAAA;AAEF;EACE,8BAAA;EACA,eAAA;EACA;AAAA;AAIJ;EACE;AAAA;AAIA;EACE;AAAA",file:"MacroProperties.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.macros__properties-panel {\n  padding: var(--space-slab);\n  background-color: var(--white);\n  // full screen height subtracted by the height of the header\n  height: calc(100vh - 5.6rem);\n  display: flex;\n  flex-direction: column;\n  border-left: 1px solid var(--s-50);\n}\n\n.macros__submit-button {\n  margin-top: auto;\n}\n.macros__form-visibility-container {\n  margin-top: var(--space-small);\n}\n.macros__form-visibility {\n  display: grid;\n  grid-template-columns: repeat(2, minmax(0, 1fr));\n  gap: var(--space-slab);\n\n  .card {\n    padding: var(--space-small);\n    border-radius: var(--border-radius-normal);\n    border: 1px solid var(--s-200);\n    text-align: left;\n    cursor: pointer;\n    position: relative;\n\n    &.active {\n      background-color: var(--w-25);\n      border: 1px solid var(--w-300);\n    }\n\n    .visibility-check {\n      position: absolute;\n      color: var(--w-500);\n      top: var(--space-small);\n      right: var(--space-small);\n    }\n  }\n}\n\n.subtitle {\n  font-size: var(--font-size-mini);\n  color: var(--s-500);\n}\n\n.title {\n  display: block;\n  margin: 0;\n  font-size: var(--font-size-small);\n  font-weight: var(--font-weight-medium);\n  line-height: 1.8;\n  color: var(--color-body);\n}\n\n.macros__info-panel {\n  margin-top: var(--space-small);\n  display: flex;\n  background-color: var(--s-50);\n  padding: var(--space-small);\n  border-radius: var(--border-radius-normal);\n  align-items: flex-start;\n  svg {\n    flex-shrink: 0;\n  }\n  p {\n    margin-left: var(--space-small);\n    margin-bottom: 0;\n    color: var(--s-600);\n  }\n}\n\n::v-deep input[type='text'] {\n  margin-bottom: 0;\n}\n\n::v-deep .error {\n  .message {\n    margin-bottom: 0;\n  }\n}\n"]}]),n.exports=t},3056:function(n,t,a){"use strict";a(2891)},3057:function(n,t,a){(t=a(14)(!0)).push([n.i,".row[data-v-3737b963]{\n  height:100%\n}\n.macros-canvas[data-v-3737b963]{\n  background-image:radial-gradient(var(--s-100) 1.2px, transparent 0);\n  background-size:var(--space-normal) var(--space-normal);\n  height:100%;\n  max-height:100%;\n  padding:var(--space-normal) var(--space-three);\n  max-height:100vh;\n  overflow-y:auto\n}","",{version:3,sources:["/Users/s.dastan/Desktop/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/macros/MacroForm.vue"],names:[],mappings:"AAgIA;EACE;AAAA;AAEF;EACE,mEAAA;EACA,uDAAA;EACA,WAAA;EACA,eAAA;EACA,8CAAA;EACA,gBAAA;EACA;AAAA",file:"MacroForm.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.row {\n  height: 100%;\n}\n.macros-canvas {\n  background-image: radial-gradient(var(--s-100) 1.2px, transparent 0);\n  background-size: var(--space-normal) var(--space-normal);\n  height: 100%;\n  max-height: 100%;\n  padding: var(--space-normal) var(--space-three);\n  max-height: 100vh;\n  overflow-y: auto;\n}\n"]}]),n.exports=t},3058:function(n,t,a){"use strict";a(2892)},3059:function(n,t,a){(t=a(14)(!0)).push([n.i,".content-box[data-v-378db2ee] {\n  padding: 0;\n  height: 100vh;\n}\n","",{version:3,sources:["/Users/s.dastan/Desktop/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/macros/app/javascript/dashboard/routes/dashboard/settings/macros/MacroEditor.vue"],names:[],mappings:"AAgJA;EACA,UAAA;EACA,aAAA;AACA",file:"MacroEditor.vue",sourcesContent:["<template>\n  <div class=\"column content-box\">\n    <woot-loading-state\n      v-if=\"uiFlags.isFetchingItem\"\n      :message=\"$t('MACROS.EDITOR.LOADING')\"\n    />\n    <macro-form\n      v-if=\"macro && !uiFlags.isFetchingItem\"\n      :macro-data.sync=\"macro\"\n      @submit=\"saveMacro\"\n    />\n  </div>\n</template>\n\n<script>\nimport MacroForm from './MacroForm';\nimport { MACRO_ACTION_TYPES } from './constants';\nimport { mapGetters } from 'vuex';\nimport actionQueryGenerator from 'dashboard/helper/actionQueryGenerator.js';\nimport alertMixin from 'shared/mixins/alertMixin';\nimport macrosMixin from 'dashboard/mixins/macrosMixin';\n\nexport default {\n  components: {\n    MacroForm,\n  },\n  mixins: [alertMixin, macrosMixin],\n  provide() {\n    return {\n      macroActionTypes: this.macroActionTypes,\n    };\n  },\n  data() {\n    return {\n      macro: null,\n      mode: 'CREATE',\n      macroActionTypes: MACRO_ACTION_TYPES,\n    };\n  },\n  computed: {\n    ...mapGetters({\n      uiFlags: 'macros/getUIFlags',\n      labels: 'labels/getLabels',\n      agents: 'agents/getAgents',\n      teams: 'teams/getTeams',\n    }),\n    macroId() {\n      return this.$route.params.macroId;\n    },\n  },\n  watch: {\n    $route: {\n      handler() {\n        this.fetchDropdownData();\n        if (this.$route.params.macroId) {\n          this.fetchMacro();\n        } else {\n          this.initNewMacro();\n        }\n      },\n      immediate: true,\n    },\n  },\n  methods: {\n    fetchDropdownData() {\n      this.$store.dispatch('agents/get');\n      this.$store.dispatch('teams/get');\n      this.$store.dispatch('labels/get');\n    },\n    fetchMacro() {\n      this.mode = 'EDIT';\n      this.manifestMacro();\n    },\n    async manifestMacro() {\n      await this.$store.dispatch('macros/getSingleMacro', this.macroId);\n      const singleMacro = this.$store.getters['macros/getMacro'](this.macroId);\n      this.macro = this.formatMacro(singleMacro);\n    },\n    formatMacro(macro) {\n      const formattedActions = macro.actions.map(action => {\n        let actionParams = [];\n        if (action.action_params.length) {\n          const inputType = this.macroActionTypes.find(\n            item => item.key === action.action_name\n          ).inputType;\n          if (inputType === 'multi_select' || inputType === 'search_select') {\n            actionParams = [\n              ...this.getDropdownValues(action.action_name, this.$store),\n            ].filter(item => [...action.action_params].includes(item.id));\n          } else if (inputType === 'team_message') {\n            actionParams = {\n              team_ids: [\n                ...this.getDropdownValues(action.action_name, this.$store),\n              ].filter(item =>\n                [...action.action_params[0].team_ids].includes(item.id)\n              ),\n              message: action.action_params[0].message,\n            };\n          } else actionParams = [...action.action_params];\n        }\n        return {\n          ...action,\n          action_params: actionParams,\n        };\n      });\n      return {\n        ...macro,\n        actions: formattedActions,\n      };\n    },\n    initNewMacro() {\n      this.mode = 'CREATE';\n      this.macro = {\n        name: '',\n        actions: [\n          {\n            action_name: 'assign_team',\n            action_params: [],\n          },\n        ],\n        visibility: 'global',\n      };\n    },\n    async saveMacro(macro) {\n      try {\n        const action = this.mode === 'EDIT' ? 'macros/update' : 'macros/create';\n        let successMessage =\n          this.mode === 'EDIT'\n            ? this.$t('MACROS.EDIT.API.SUCCESS_MESSAGE')\n            : this.$t('MACROS.ADD.API.SUCCESS_MESSAGE');\n        let serializedMacro = JSON.parse(JSON.stringify(macro));\n        serializedMacro.actions = actionQueryGenerator(serializedMacro.actions);\n        await this.$store.dispatch(action, serializedMacro);\n        this.showAlert(successMessage);\n        this.$router.push({ name: 'macros_wrapper' });\n      } catch (error) {\n        this.showAlert(this.$t('MACROS.ERROR'));\n      }\n    },\n  },\n};\n<\/script>\n\n<style scoped>\n.content-box {\n  padding: 0;\n  height: 100vh;\n}\n</style>\n"]}]),n.exports=t},3147:function(n,t,a){"use strict";a.r(t);a(42),a(105),a(5),a(55),a(70),a(6),a(3),a(11),a(8),a(12),a(7),a(20),a(29),a(30),a(22),a(27),a(26),a(50),a(48),a(24),a(21),a(345);var e={props:{label:{type:String,required:!0}}},r=(a(3046),a(1)),o=Object(r.a)(e,(function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",[a("div",{staticClass:"macros-item macros-pill"},[a("span",[n._v(n._s(n.label))])])])}),[],!1,null,"6f9c5e54",null).exports,i=a(355),s=a.n(i),c=(a(33),a(602)),A={props:{type:{type:String,default:"add"},tooltip:{type:String,default:""},icon:{type:String,required:!0}}},l=(a(3048),Object(r.a)(A,(function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",[a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:n.tooltip,expression:"tooltip"}],staticClass:"macros__action-button",class:n.type,on:{click:function(t){return n.$emit("click")}}},[a("fluent-icon",{attrs:{icon:n.icon,"aria-hidden":"true"}})],1)])}),[],!1,null,"0462bb77",null).exports),m={methods:{getDropdownValues:function(n){switch(n){case"assign_team":case"send_email_to_team":return this.teams;case"assign_agent":return this.agents;case"add_label":case"remove_label":return this.labels.map((function(n){return{id:n.title,name:n.title}}));default:return[]}}}},d=a(4);function u(n,t){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),a.push.apply(a,e)}return a}function p(n){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){v(n,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(a,t))}))}return n}function v(n,t,a){return t in n?Object.defineProperty(n,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[t]=a,n}var f={components:{ActionInput:c.a,MacroActionButton:l},mixins:[m],inject:["macroActionTypes","$v"],props:{singleNode:{type:Boolean,default:!1},value:{type:Object,default:function(){return{}}},index:{type:Number,default:0},fileName:{type:String,default:""}},computed:p(p({},Object(d.mapGetters)({labels:"labels/getLabels",teams:"teams/getTeams",agents:"agents/getAgents"})),{},{actionData:{get:function(){return this.value},set:function(n){this.$emit("input",n)}},showActionInput:function(){var n=this;return"send_email_to_team"!==this.actionData.action_name&&"send_message"!==this.actionData.action_name&&!!this.macroActionTypes.find((function(t){return t.key===n.actionData.action_name})).inputType}}),methods:{dropdownValues:function(){return this.getDropdownValues(this.value.action_name,this.$store)},hasError:function(n){return!(!n.action_params.$dirty||!n.action_params.$error)}}},h=(a(3050),Object(r.a)(f,(function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"macro__node-action-container"},[n.singleNode?n._e():a("fluent-icon",{staticClass:"macros__node-drag-handle",attrs:{size:"20",icon:"navigation"}}),n._v(" "),a("div",{staticClass:"macro__node-action-item",class:{"has-error":n.hasError(n.$v.macro.actions.$each[n.index])}},[a("action-input",{attrs:{"action-types":n.macroActionTypes,"dropdown-values":n.dropdownValues(),"show-action-input":n.showActionInput,"show-remove-button":!1,"is-macro":!0,v:n.$v.macro.actions.$each[n.index],"initial-file-name":n.fileName},on:{resetAction:function(t){return n.$emit("resetAction")}},model:{value:n.actionData,callback:function(t){n.actionData=t},expression:"actionData"}}),n._v(" "),n.singleNode?n._e():a("macro-action-button",{staticClass:"macro__node macro__node-action-button-delete",attrs:{icon:"dismiss-circle",type:"delete",tooltip:n.$t("MACROS.EDITOR.DELETE_BTN_TOOLTIP")},on:{click:function(t){return n.$emit("deleteNode")}}})],1)],1)}),[],!1,null,"37b8a4ea",null).exports),b=a(364),g={components:{Draggable:s.a,MacrosPill:o,MacroNode:h,MacroActionButton:l},props:{value:{type:Array,default:function(){return[]}},files:{type:Array,default:function(){return[]}}},computed:{actionData:{get:function(){return this.value},set:function(n){this.$emit("input",n)}}},methods:{fileName:function(){return b.a.apply(void 0,arguments)}}},_=g,E=(a(3052),Object(r.a)(_,(function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"macros__nodes"},[a("macros-pill",{staticClass:"macro__node",attrs:{label:n.$t("MACROS.EDITOR.START_FLOW")}}),n._v(" "),a("draggable",{staticClass:"macros__nodes-draggable",attrs:{list:n.actionData,animation:"200","ghost-class":"ghost",tag:"div",handle:".macros__node-drag-handle"}},n._l(n.actionData,(function(t,e){return a("div",{key:e,staticClass:"macro__node"},[a("macro-node",{staticClass:"macros__node-action",attrs:{type:"add",index:e,"file-name":n.fileName(n.actionData[e].action_params[0],n.actionData[e].action_name,n.files),"single-node":1===n.actionData.length},on:{resetAction:function(t){return n.$emit("resetAction",e)},deleteNode:function(t){return n.$emit("deleteNode",e)}},model:{value:n.actionData[e],callback:function(t){n.$set(n.actionData,e,t)},expression:"actionData[i]"}})],1)})),0),n._v(" "),a("macro-action-button",{staticClass:"macro__node",attrs:{icon:"add-circle",tooltip:n.$t("MACROS.EDITOR.ADD_BTN_TOOLTIP"),type:"add"},on:{click:function(t){return n.$emit("addNewNode")}}}),n._v(" "),a("macros-pill",{staticClass:"macro__node",attrs:{label:n.$t("MACROS.EDITOR.END_FLOW")}})],1)}),[],!1,null,"7a0e6f32",null).exports),C={inject:["$v"],props:{macroName:{type:String,default:""},macroVisibility:{type:String,default:"global"}},methods:{isActive:function(n){return{active:this.macroVisibility===n}},onUpdateName:function(n){this.$emit("update:name",n)},onUpdateVisibility:function(n){this.$emit("update:visibility",n)}}},y=(a(3054),Object(r.a)(C,(function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"macros__properties-panel"},[a("div",[a("woot-input",{class:{error:n.$v.macro.name.$error},attrs:{value:n.macroName,label:n.$t("MACROS.ADD.FORM.NAME.LABEL"),placeholder:n.$t("MACROS.ADD.FORM.NAME.PLACEHOLDER"),error:n.$v.macro.name.$error?n.$t("MACROS.ADD.FORM.NAME.ERROR"):null},on:{input:function(t){return n.onUpdateName(t)}}})],1),n._v(" "),a("div",{staticClass:"macros__form-visibility-container"},[a("p",{staticClass:"title"},[n._v(n._s(n.$t("MACROS.EDITOR.VISIBILITY.LABEL")))]),n._v(" "),a("div",{staticClass:"macros__form-visibility"},[a("button",{staticClass:"card",class:n.isActive("global"),on:{click:function(t){return n.onUpdateVisibility("global")}}},["global"===n.macroVisibility?a("fluent-icon",{staticClass:"visibility-check",attrs:{icon:"checkmark-circle",type:"solid"}}):n._e(),n._v(" "),a("p",{staticClass:"title"},[n._v("\n          "+n._s(n.$t("MACROS.EDITOR.VISIBILITY.GLOBAL.LABEL"))+"\n        ")]),n._v(" "),a("p",{staticClass:"subtitle"},[n._v("\n          "+n._s(n.$t("MACROS.EDITOR.VISIBILITY.GLOBAL.DESCRIPTION"))+"\n        ")])],1),n._v(" "),a("button",{staticClass:"card",class:n.isActive("personal"),on:{click:function(t){return n.onUpdateVisibility("personal")}}},["personal"===n.macroVisibility?a("fluent-icon",{staticClass:"visibility-check",attrs:{icon:"checkmark-circle",type:"solid"}}):n._e(),n._v(" "),a("p",{staticClass:"title"},[n._v("\n          "+n._s(n.$t("MACROS.EDITOR.VISIBILITY.PERSONAL.LABEL"))+"\n        ")]),n._v(" "),a("p",{staticClass:"subtitle"},[n._v("\n          "+n._s(n.$t("MACROS.EDITOR.VISIBILITY.PERSONAL.DESCRIPTION"))+"\n        ")])],1)]),n._v(" "),a("div",{staticClass:"macros__info-panel"},[a("fluent-icon",{attrs:{icon:"info",size:"20"}}),n._v(" "),a("p",[n._v("\n        "+n._s(n.$t("MACROS.ORDER_INFO"))+"\n      ")])],1)]),n._v(" "),a("div",{staticClass:"macros__submit-button"},[a("woot-button",{attrs:{size:"expanded","color-scheme":"success"},on:{click:function(t){return n.$emit("submit")}}},[n._v("\n      "+n._s(n.$t("MACROS.HEADER_BTN_TXT_SAVE"))+"\n    ")])],1)])}),[],!1,null,"4f2a889b",null).exports),w=a(17),x={components:{MacroNodes:E,MacroProperties:y},provide:function(){return{$v:this.$v}},props:{macroData:{type:Object,default:function(){return{}}}},data:function(){return{macro:this.macroData}},computed:{files:function(){return this.macro&&this.macro.files?this.macro.files:[]}},watch:{$route:{handler:function(){this.resetValidation()},immediate:!0},macroData:{handler:function(){this.macro=this.macroData},immediate:!0}},validations:{macro:{name:{required:w.required},visibility:{required:w.required},actions:{required:w.required,$each:{action_params:{required:Object(w.requiredIf)((function(n){return"send_email_to_team"===n.action_name||!("mute_conversation"===n.action_name||"snooze_conversation"===n.action_name||"resolve_conversation"===n.action_name||"remove_assigned_team"===n.action_name)}))}}}}},methods:{updateName:function(n){this.macro.name=n},updateVisibility:function(n){this.macro.visibility=n},appendNode:function(){this.macro.actions.push({action_name:"assign_team",action_params:[]})},deleteNode:function(n){this.macro.actions.splice(n,1)},submit:function(){this.$v.$touch(),this.$v.$invalid||this.$emit("submit",this.macro)},resetNode:function(n){this.$v.macro.actions.$each[n].$reset(),this.macro.actions[n].action_params=[]},resetValidation:function(){this.$v.$reset()}}},O=(a(3056),Object(r.a)(x,(function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"small-8 columns with-right-space macros-canvas"},[a("macro-nodes",{attrs:{files:n.files},on:{addNewNode:n.appendNode,deleteNode:n.deleteNode,resetAction:n.resetNode},model:{value:n.macro.actions,callback:function(t){n.$set(n.macro,"actions",t)},expression:"macro.actions"}})],1),n._v(" "),a("div",{staticClass:"small-4 columns"},[a("macro-properties",{attrs:{"macro-name":n.macro.name,"macro-visibility":n.macro.visibility},on:{"update:name":n.updateName,"update:visibility":n.updateVisibility,submit:n.submit}})],1)])}),[],!1,null,"3737b963",null).exports),M=a(872),D=a(749);function $(n){return function(n){if(Array.isArray(n))return I(n)}(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"===typeof n)return I(n,t);var a=Object.prototype.toString.call(n).slice(8,-1);"Object"===a&&n.constructor&&(a=n.constructor.name);if("Map"===a||"Set"===a)return Array.from(n);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return I(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(n,t){(null==t||t>n.length)&&(t=n.length);for(var a=0,e=new Array(t);a<t;a++)e[a]=n[a];return e}function k(n,t,a,e,r,o,i){try{var s=n[o](i),c=s.value}catch(A){return void a(A)}s.done?t(c):Promise.resolve(c).then(e,r)}function S(n){return function(){var t=this,a=arguments;return new Promise((function(e,r){var o=n.apply(t,a);function i(n){k(o,e,r,i,s,"next",n)}function s(n){k(o,e,r,i,s,"throw",n)}i(void 0)}))}}function B(n,t){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),a.push.apply(a,e)}return a}function T(n){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(Object(a),!0).forEach((function(t){R(n,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(a,t))}))}return n}function R(n,t,a){return t in n?Object.defineProperty(n,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[t]=a,n}var N={components:{MacroForm:O},mixins:[a(18).a,m],provide:function(){return{macroActionTypes:this.macroActionTypes}},data:function(){return{macro:null,mode:"CREATE",macroActionTypes:M.a}},computed:T(T({},Object(d.mapGetters)({uiFlags:"macros/getUIFlags",labels:"labels/getLabels",agents:"agents/getAgents",teams:"teams/getTeams"})),{},{macroId:function(){return this.$route.params.macroId}}),watch:{$route:{handler:function(){this.fetchDropdownData(),this.$route.params.macroId?this.fetchMacro():this.initNewMacro()},immediate:!0}},methods:{fetchDropdownData:function(){this.$store.dispatch("agents/get"),this.$store.dispatch("teams/get"),this.$store.dispatch("labels/get")},fetchMacro:function(){this.mode="EDIT",this.manifestMacro()},manifestMacro:function(){var n=this;return S(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.$store.dispatch("macros/getSingleMacro",n.macroId);case 2:a=n.$store.getters["macros/getMacro"](n.macroId),n.macro=n.formatMacro(a);case 4:case"end":return t.stop()}}),t)})))()},formatMacro:function(n){var t=this,a=n.actions.map((function(n){var a=[];if(n.action_params.length){var e=t.macroActionTypes.find((function(t){return t.key===n.action_name})).inputType;a="multi_select"===e||"search_select"===e?$(t.getDropdownValues(n.action_name,t.$store)).filter((function(t){return $(n.action_params).includes(t.id)})):"team_message"===e?{team_ids:$(t.getDropdownValues(n.action_name,t.$store)).filter((function(t){return $(n.action_params[0].team_ids).includes(t.id)})),message:n.action_params[0].message}:$(n.action_params)}return T(T({},n),{},{action_params:a})}));return T(T({},n),{},{actions:a})},initNewMacro:function(){this.mode="CREATE",this.macro={name:"",actions:[{action_name:"assign_team",action_params:[]}],visibility:"global"}},saveMacro:function(n){var t=this;return S(regeneratorRuntime.mark((function a(){var e,r,o;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e="EDIT"===t.mode?"macros/update":"macros/create",r="EDIT"===t.mode?t.$t("MACROS.EDIT.API.SUCCESS_MESSAGE"):t.$t("MACROS.ADD.API.SUCCESS_MESSAGE"),(o=JSON.parse(JSON.stringify(n))).actions=Object(D.a)(o.actions),a.next=7,t.$store.dispatch(e,o);case 7:t.showAlert(r),t.$router.push({name:"macros_wrapper"}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),t.showAlert(t.$t("MACROS.ERROR"));case 14:case"end":return a.stop()}}),a,null,[[0,11]])})))()}}},j=(a(3058),Object(r.a)(N,(function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"column content-box"},[n.uiFlags.isFetchingItem?a("woot-loading-state",{attrs:{message:n.$t("MACROS.EDITOR.LOADING")}}):n._e(),n._v(" "),n.macro&&!n.uiFlags.isFetchingItem?a("macro-form",{attrs:{"macro-data":n.macro},on:{"update:macroData":function(t){n.macro=t},"update:macro-data":function(t){n.macro=t},submit:n.saveMacro}}):n._e()],1)}),[],!1,null,"378db2ee",null));t.default=j.exports}}]);
//# sourceMappingURL=20-3ac3ebe96220818e9e12.chunk.js.map