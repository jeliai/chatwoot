{"version":3,"sources":["webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLMonacoEditor.vue?f2ff","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLBotEditor.vue?2c5d","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLMonacoEditor.vue?e14f","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLMonacoEditor.vue?25c6","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLBotEditor.vue?48c5","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLBotEditor.vue?efde","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLBotEditor.vue?bbc6","webpack:///app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLMonacoEditor.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLMonacoEditor.vue?fbf1","webpack:///app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLBotEditor.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLMonacoEditor.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLMonacoEditor.vue?8a6d","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLBotEditor.vue?0edc","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLBotEditor.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/csml/Edit.vue?04eb","webpack:///app/javascript/dashboard/routes/dashboard/settings/agentBots/csml/Edit.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/csml/Edit.vue?b7ce","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/csml/Edit.vue"],"names":["api","content","__esModule","default","module","i","options","exports","locals","___CSS_LOADER_API_IMPORT___","push","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","$t","_e","_v","globalConfig","csmlEditorHost","on","onEditorLoad","model","value","bot","callback","$$v","$set","expression","$v","csmlContent","_s","$event","preventDefault","onSubmit","class","error","name","$error","directives","rawName","domProps","target","composing","component","agentBot","updateBot"],"mappings":"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","file":"js/28-04a379da899cc35fb08a.chunk.js","sourcesContent":["var api = require(\"!../../../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js??ref--2-1!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/postcss-loader/src/index.js??ref--2-2!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CSMLMonacoEditor.vue?vue&type=style&index=0&id=1da3205e&scoped=true&lang=css&\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js??ref--2-1!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/postcss-loader/src/index.js??ref--2-2!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CSMLBotEditor.vue?vue&type=style&index=0&id=644ddfaa&scoped=true&lang=css&\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","export * from \"-!../../../../../../../../node_modules/style-loader/dist/cjs.js!../../../../../../../../node_modules/css-loader/dist/cjs.js??ref--2-1!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/postcss-loader/src/index.js??ref--2-2!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CSMLMonacoEditor.vue?vue&type=style&index=0&id=1da3205e&scoped=true&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(true);\n// Module\nexports.push([module.id, \"#csml-editor--frame[data-v-1da3205e] {\\n  border: 0;\\n  width: 100%;\\n  height: 100%;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"/Users/s.dastan/Desktop/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/agentBots/components/app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLMonacoEditor.vue\"],\"names\":[],\"mappings\":\"AA+DA;EACA,SAAA;EACA,WAAA;EACA,YAAA;AACA\",\"file\":\"CSMLMonacoEditor.vue\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"csml-editor--container\\\">\\n    <loading-state\\n      v-if=\\\"iframeLoading\\\"\\n      :message=\\\"$t('AGENT_BOTS.LOADING_EDITOR')\\\"\\n      class=\\\"dashboard-app_loading-container\\\"\\n    />\\n    <iframe\\n      id=\\\"csml-editor--frame\\\"\\n      :src=\\\"globalConfig.csmlEditorHost\\\"\\n      @load=\\\"onEditorLoad\\\"\\n    />\\n  </div>\\n</template>\\n<script>\\nimport LoadingState from 'dashboard/components/widgets/LoadingState';\\nimport { mapGetters } from 'vuex';\\n\\nexport default {\\n  components: { LoadingState },\\n  props: {\\n    value: {\\n      type: String,\\n      default: '',\\n    },\\n  },\\n  data() {\\n    return {\\n      iframeLoading: true,\\n    };\\n  },\\n  computed: {\\n    ...mapGetters({\\n      globalConfig: 'globalConfig/get',\\n    }),\\n  },\\n  mounted() {\\n    window.onmessage = e => {\\n      if (\\n        typeof e.data !== 'string' ||\\n        !e.data.startsWith('chatwoot-csml-editor:update')\\n      ) {\\n        return;\\n      }\\n      const csmlContent = e.data.replace('chatwoot-csml-editor:update', '');\\n      this.$emit('input', csmlContent);\\n    };\\n  },\\n  methods: {\\n    onEditorLoad() {\\n      const frameElement = document.getElementById(`csml-editor--frame`);\\n      const eventData = {\\n        event: 'editorContext',\\n        data: this.value || '',\\n      };\\n      frameElement.contentWindow.postMessage(JSON.stringify(eventData), '*');\\n      this.iframeLoading = false;\\n    },\\n  },\\n};\\n</script>\\n\\n<style scoped>\\n#csml-editor--frame {\\n  border: 0;\\n  width: 100%;\\n  height: 100%;\\n}\\n</style>\\n\"]}]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../../../../../../node_modules/style-loader/dist/cjs.js!../../../../../../../../node_modules/css-loader/dist/cjs.js??ref--2-1!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/postcss-loader/src/index.js??ref--2-2!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CSMLBotEditor.vue?vue&type=style&index=0&id=644ddfaa&scoped=true&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(true);\n// Module\nexports.push([module.id, \".no-padding[data-v-644ddfaa] {\\n  padding: 0 !important;\\n}\\n.full-height[data-v-644ddfaa] {\\n  height: calc(100vh - 56px);\\n}\\n.bot-editor[data-v-644ddfaa] {\\n  width: 100%;\\n  height: 100%;\\n}\\n.details-editor[data-v-644ddfaa] {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-between;\\n  height: 100%;\\n}\\n.editor-wrapper[data-v-644ddfaa] {\\n  position: relative;\\n}\\n.editor-error-message[data-v-644ddfaa] {\\n  position: absolute;\\n  bottom: 0;\\n  width: 100%;\\n  padding: 1rem;\\n  background-color: #e0bbbb;\\n  display: flex;\\n  align-items: center;\\n  font-size: 1.2rem;\\n  justify-content: center;\\n  flex-shrink: 0;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"/Users/s.dastan/Desktop/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/agentBots/components/app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLBotEditor.vue\"],\"names\":[],\"mappings\":\"AAwFA;EACA,qBAAA;AACA;AACA;EACA,0BAAA;AACA;AAEA;EACA,WAAA;EACA,YAAA;AACA;AACA;EACA,aAAA;EACA,sBAAA;EACA,8BAAA;EACA,YAAA;AACA;AACA;EACA,kBAAA;AACA;AACA;EACA,kBAAA;EACA,SAAA;EACA,WAAA;EACA,aAAA;EACA,yBAAA;EACA,aAAA;EACA,mBAAA;EACA,iBAAA;EACA,uBAAA;EACA,cAAA;AACA\",\"file\":\"CSMLBotEditor.vue\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"column content-box no-padding\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"small-8 columns\\\">\\n        <div class=\\\"full-height editor-wrapper\\\">\\n          <csml-monaco-editor v-model=\\\"bot.csmlContent\\\" class=\\\"bot-editor\\\" />\\n          <div v-if=\\\"$v.bot.csmlContent.$error\\\" class=\\\"editor-error-message\\\">\\n            <span>{{ $t('AGENT_BOTS.CSML_BOT_EDITOR.BOT_CONFIG.ERROR') }}</span>\\n          </div>\\n        </div>\\n      </div>\\n      <div class=\\\"small-4 columns content-box full-height\\\">\\n        <form class=\\\"details-editor\\\" @submit.prevent=\\\"onSubmit\\\">\\n          <div>\\n            <label :class=\\\"{ error: $v.bot.name.$error }\\\">\\n              {{ $t('AGENT_BOTS.CSML_BOT_EDITOR.NAME.LABEL') }}\\n              <input\\n                v-model=\\\"bot.name\\\"\\n                type=\\\"text\\\"\\n                :placeholder=\\\"$t('AGENT_BOTS.CSML_BOT_EDITOR.NAME.PLACEHOLDER')\\\"\\n              />\\n              <span v-if=\\\"$v.bot.name.$error\\\" class=\\\"message\\\">\\n                {{ $t('AGENT_BOTS.CSML_BOT_EDITOR.NAME.ERROR') }}\\n              </span>\\n            </label>\\n            <label>\\n              {{ $t('AGENT_BOTS.CSML_BOT_EDITOR.DESCRIPTION.LABEL') }}\\n              <textarea\\n                v-model=\\\"bot.description\\\"\\n                rows=\\\"4\\\"\\n                :placeholder=\\\"\\n                  $t('AGENT_BOTS.CSML_BOT_EDITOR.DESCRIPTION.PLACEHOLDER')\\n                \\\"\\n              />\\n            </label>\\n            <woot-button>\\n              {{ $t('AGENT_BOTS.CSML_BOT_EDITOR.SUBMIT') }}\\n            </woot-button>\\n          </div>\\n        </form>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script>\\nimport { required } from 'vuelidate/lib/validators';\\nimport CsmlMonacoEditor from './CSMLMonacoEditor.vue';\\n\\nexport default {\\n  components: { CsmlMonacoEditor },\\n  props: {\\n    agentBot: {\\n      type: Object,\\n      default: () => {},\\n    },\\n  },\\n  validations: {\\n    bot: {\\n      name: { required },\\n      csmlContent: { required },\\n    },\\n  },\\n  data() {\\n    return {\\n      bot: {\\n        name: this.agentBot.name || '',\\n        description: this.agentBot.description || '',\\n        csmlContent: this.agentBot.bot_config.csml_content || '',\\n      },\\n    };\\n  },\\n  methods: {\\n    onSubmit() {\\n      this.$v.$touch();\\n      if (this.$v.$invalid) {\\n        return;\\n      }\\n      this.$emit('submit', {\\n        id: this.agentBot.id || '',\\n        ...this.bot,\\n      });\\n    },\\n  },\\n};\\n</script>\\n\\n<style scoped>\\n.no-padding {\\n  padding: 0 !important;\\n}\\n.full-height {\\n  height: calc(100vh - 56px);\\n}\\n\\n.bot-editor {\\n  width: 100%;\\n  height: 100%;\\n}\\n.details-editor {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-between;\\n  height: 100%;\\n}\\n.editor-wrapper {\\n  position: relative;\\n}\\n.editor-error-message {\\n  position: absolute;\\n  bottom: 0;\\n  width: 100%;\\n  padding: 1rem;\\n  background-color: #e0bbbb;\\n  display: flex;\\n  align-items: center;\\n  font-size: 1.2rem;\\n  justify-content: center;\\n  flex-shrink: 0;\\n}\\n</style>\\n\"]}]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"column content-box no-padding\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"small-8 columns\"},[_c('div',{staticClass:\"full-height editor-wrapper\"},[_c('csml-monaco-editor',{staticClass:\"bot-editor\",model:{value:(_vm.bot.csmlContent),callback:function ($$v) {_vm.$set(_vm.bot, \"csmlContent\", $$v)},expression:\"bot.csmlContent\"}}),_vm._v(\" \"),(_vm.$v.bot.csmlContent.$error)?_c('div',{staticClass:\"editor-error-message\"},[_c('span',[_vm._v(_vm._s(_vm.$t('AGENT_BOTS.CSML_BOT_EDITOR.BOT_CONFIG.ERROR')))])]):_vm._e()],1)]),_vm._v(\" \"),_c('div',{staticClass:\"small-4 columns content-box full-height\"},[_c('form',{staticClass:\"details-editor\",on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('div',[_c('label',{class:{ error: _vm.$v.bot.name.$error }},[_vm._v(\"\\n            \"+_vm._s(_vm.$t('AGENT_BOTS.CSML_BOT_EDITOR.NAME.LABEL'))+\"\\n            \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.bot.name),expression:\"bot.name\"}],attrs:{\"type\":\"text\",\"placeholder\":_vm.$t('AGENT_BOTS.CSML_BOT_EDITOR.NAME.PLACEHOLDER')},domProps:{\"value\":(_vm.bot.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.bot, \"name\", $event.target.value)}}}),_vm._v(\" \"),(_vm.$v.bot.name.$error)?_c('span',{staticClass:\"message\"},[_vm._v(\"\\n              \"+_vm._s(_vm.$t('AGENT_BOTS.CSML_BOT_EDITOR.NAME.ERROR'))+\"\\n            \")]):_vm._e()]),_vm._v(\" \"),_c('label',[_vm._v(\"\\n            \"+_vm._s(_vm.$t('AGENT_BOTS.CSML_BOT_EDITOR.DESCRIPTION.LABEL'))+\"\\n            \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.bot.description),expression:\"bot.description\"}],attrs:{\"rows\":\"4\",\"placeholder\":_vm.$t('AGENT_BOTS.CSML_BOT_EDITOR.DESCRIPTION.PLACEHOLDER')},domProps:{\"value\":(_vm.bot.description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.bot, \"description\", $event.target.value)}}})]),_vm._v(\" \"),_c('woot-button',[_vm._v(\"\\n            \"+_vm._s(_vm.$t('AGENT_BOTS.CSML_BOT_EDITOR.SUBMIT'))+\"\\n          \")])],1)])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"csml-editor--container\">\n    <loading-state\n      v-if=\"iframeLoading\"\n      :message=\"$t('AGENT_BOTS.LOADING_EDITOR')\"\n      class=\"dashboard-app_loading-container\"\n    />\n    <iframe\n      id=\"csml-editor--frame\"\n      :src=\"globalConfig.csmlEditorHost\"\n      @load=\"onEditorLoad\"\n    />\n  </div>\n</template>\n<script>\nimport LoadingState from 'dashboard/components/widgets/LoadingState';\nimport { mapGetters } from 'vuex';\n\nexport default {\n  components: { LoadingState },\n  props: {\n    value: {\n      type: String,\n      default: '',\n    },\n  },\n  data() {\n    return {\n      iframeLoading: true,\n    };\n  },\n  computed: {\n    ...mapGetters({\n      globalConfig: 'globalConfig/get',\n    }),\n  },\n  mounted() {\n    window.onmessage = e => {\n      if (\n        typeof e.data !== 'string' ||\n        !e.data.startsWith('chatwoot-csml-editor:update')\n      ) {\n        return;\n      }\n      const csmlContent = e.data.replace('chatwoot-csml-editor:update', '');\n      this.$emit('input', csmlContent);\n    };\n  },\n  methods: {\n    onEditorLoad() {\n      const frameElement = document.getElementById(`csml-editor--frame`);\n      const eventData = {\n        event: 'editorContext',\n        data: this.value || '',\n      };\n      frameElement.contentWindow.postMessage(JSON.stringify(eventData), '*');\n      this.iframeLoading = false;\n    },\n  },\n};\n</script>\n\n<style scoped>\n#csml-editor--frame {\n  border: 0;\n  width: 100%;\n  height: 100%;\n}\n</style>\n","import mod from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CSMLMonacoEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CSMLMonacoEditor.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"column content-box no-padding\">\n    <div class=\"row\">\n      <div class=\"small-8 columns\">\n        <div class=\"full-height editor-wrapper\">\n          <csml-monaco-editor v-model=\"bot.csmlContent\" class=\"bot-editor\" />\n          <div v-if=\"$v.bot.csmlContent.$error\" class=\"editor-error-message\">\n            <span>{{ $t('AGENT_BOTS.CSML_BOT_EDITOR.BOT_CONFIG.ERROR') }}</span>\n          </div>\n        </div>\n      </div>\n      <div class=\"small-4 columns content-box full-height\">\n        <form class=\"details-editor\" @submit.prevent=\"onSubmit\">\n          <div>\n            <label :class=\"{ error: $v.bot.name.$error }\">\n              {{ $t('AGENT_BOTS.CSML_BOT_EDITOR.NAME.LABEL') }}\n              <input\n                v-model=\"bot.name\"\n                type=\"text\"\n                :placeholder=\"$t('AGENT_BOTS.CSML_BOT_EDITOR.NAME.PLACEHOLDER')\"\n              />\n              <span v-if=\"$v.bot.name.$error\" class=\"message\">\n                {{ $t('AGENT_BOTS.CSML_BOT_EDITOR.NAME.ERROR') }}\n              </span>\n            </label>\n            <label>\n              {{ $t('AGENT_BOTS.CSML_BOT_EDITOR.DESCRIPTION.LABEL') }}\n              <textarea\n                v-model=\"bot.description\"\n                rows=\"4\"\n                :placeholder=\"\n                  $t('AGENT_BOTS.CSML_BOT_EDITOR.DESCRIPTION.PLACEHOLDER')\n                \"\n              />\n            </label>\n            <woot-button>\n              {{ $t('AGENT_BOTS.CSML_BOT_EDITOR.SUBMIT') }}\n            </woot-button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { required } from 'vuelidate/lib/validators';\nimport CsmlMonacoEditor from './CSMLMonacoEditor.vue';\n\nexport default {\n  components: { CsmlMonacoEditor },\n  props: {\n    agentBot: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  validations: {\n    bot: {\n      name: { required },\n      csmlContent: { required },\n    },\n  },\n  data() {\n    return {\n      bot: {\n        name: this.agentBot.name || '',\n        description: this.agentBot.description || '',\n        csmlContent: this.agentBot.bot_config.csml_content || '',\n      },\n    };\n  },\n  methods: {\n    onSubmit() {\n      this.$v.$touch();\n      if (this.$v.$invalid) {\n        return;\n      }\n      this.$emit('submit', {\n        id: this.agentBot.id || '',\n        ...this.bot,\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.no-padding {\n  padding: 0 !important;\n}\n.full-height {\n  height: calc(100vh - 56px);\n}\n\n.bot-editor {\n  width: 100%;\n  height: 100%;\n}\n.details-editor {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n}\n.editor-wrapper {\n  position: relative;\n}\n.editor-error-message {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  padding: 1rem;\n  background-color: #e0bbbb;\n  display: flex;\n  align-items: center;\n  font-size: 1.2rem;\n  justify-content: center;\n  flex-shrink: 0;\n}\n</style>\n","import { render, staticRenderFns } from \"./CSMLMonacoEditor.vue?vue&type=template&id=1da3205e&scoped=true&\"\nimport script from \"./CSMLMonacoEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./CSMLMonacoEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CSMLMonacoEditor.vue?vue&type=style&index=0&id=1da3205e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1da3205e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"csml-editor--container\"},[(_vm.iframeLoading)?_c('loading-state',{staticClass:\"dashboard-app_loading-container\",attrs:{\"message\":_vm.$t('AGENT_BOTS.LOADING_EDITOR')}}):_vm._e(),_vm._v(\" \"),_c('iframe',{attrs:{\"id\":\"csml-editor--frame\",\"src\":_vm.globalConfig.csmlEditorHost},on:{\"load\":_vm.onEditorLoad}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CSMLBotEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CSMLBotEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CSMLBotEditor.vue?vue&type=template&id=644ddfaa&scoped=true&\"\nimport script from \"./CSMLBotEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./CSMLBotEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CSMLBotEditor.vue?vue&type=style&index=0&id=644ddfaa&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"644ddfaa\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.agentBot.id)?_c('csml-bot-editor',{attrs:{\"agent-bot\":_vm.agentBot},on:{\"submit\":_vm.updateBot}}):_c('div',{staticClass:\"column content-box no-padding\"},[_c('spinner')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <csml-bot-editor\n    v-if=\"agentBot.id\"\n    :agent-bot=\"agentBot\"\n    @submit=\"updateBot\"\n  />\n  <div v-else class=\"column content-box no-padding\">\n    <spinner />\n  </div>\n</template>\n<script>\nimport Spinner from 'shared/components/Spinner';\nimport CsmlBotEditor from '../components/CSMLBotEditor.vue';\nimport alertMixin from 'shared/mixins/alertMixin';\n\nimport { mapGetters } from 'vuex';\nexport default {\n  components: { Spinner, CsmlBotEditor },\n  mixins: [alertMixin],\n  computed: {\n    ...mapGetters({ uiFlags: 'agentBots/uiFlags' }),\n    agentBot() {\n      return this.$store.getters['agentBots/getBot'](this.$route.params.botId);\n    },\n  },\n  mounted() {\n    this.$store.dispatch('agentBots/show', this.$route.params.botId);\n  },\n  methods: {\n    async updateBot(bot) {\n      try {\n        await this.$store.dispatch('agentBots/update', {\n          id: bot.id,\n          name: bot.name,\n          description: bot.description,\n          bot_type: 'csml',\n          bot_config: { csml_content: bot.csmlContent },\n        });\n        this.showAlert(this.$t('AGENT_BOTS.EDIT.API.SUCCESS_MESSAGE'));\n      } catch (error) {\n        this.showAlert(\n          this.$t('AGENT_BOTS.CSML_BOT_EDITOR.BOT_CONFIG.API_ERROR')\n        );\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Edit.vue?vue&type=template&id=5ef819fa&\"\nimport script from \"./Edit.vue?vue&type=script&lang=js&\"\nexport * from \"./Edit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}