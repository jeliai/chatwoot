(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{163:function(n,e,t){"use strict";t.d(e,"a",(function(){return r})),t.d(e,"b",(function(){return i})),t.d(e,"c",(function(){return a})),t.d(e,"d",(function(){return o}));var r=function(n,e,t){var r;return function(){var a=null,i=arguments,o=function(){r=null,t||n.apply(a,i)},s=t&&!r;clearTimeout(r),r=window.setTimeout(o,e),s&&n.apply(a,i)}},a=function(n){var e=n.replace("#","");return.299*parseInt(e.slice(0,2),16)+.587*parseInt(e.slice(2,4),16)+.114*parseInt(e.slice(4,6),16)>186?"#000000":"#FFFFFF"},i=function(n){var e="";if(n>=60&&n<3600){var t=Math.floor(n/60);e=t+" Min";var r=60===t?0:Math.floor(n%60);return e+(r>0?" "+r+" Sec":"")}if(n>=3600&&n<86400){var a=Math.floor(n/3600);e=a+" Hr";var i=n%3600<60||24===a?0:Math.floor(n%3600/60);return e+(i>0?" "+i+" Min":"")}if(n>=86400){var o=Math.floor(n/86400);e=o+" Day";var s=n%86400<3600||o>=364?0:Math.floor(n%86400/3600);return e+(s>0?" "+s+" Hr":"")}return Math.floor(n)+" Sec"},o=function(n,e,t){void 0===n&&(n=""),void 0===e&&(e=1024),void 0===t&&(t=!1);var r=n;return n.length>e&&(r=n.substring(0,e)),t&&(r+="..."),r}},2913:function(n,e,t){var r=t(13),a=t(3102);"string"===typeof(a=a.__esModule?a.default:a)&&(a=[[n.i,a,""]]);var i={insert:"head",singleton:!1};r(a,i);n.exports=a.locals||{}},3101:function(n,e,t){"use strict";t(2913)},3102:function(n,e,t){(e=t(14)(!0)).push([n.i,"[data-v-3e67f0a4] .wrapper[data-type=checkbox] .formulate-input-wrapper{\n  display:flex;\n  align-items:center\n}\n[data-v-3e67f0a4] .wrapper[data-type=checkbox] .formulate-input-wrapper label{\n  margin-left:.2rem\n}\n@media(prefers-color-scheme: dark){\n[data-v-3e67f0a4] .wrapper .formulate-input-element--date input,[data-v-3e67f0a4] .wrapper .formulate-input-element--checkbox input{\n    color-scheme:dark\n}\n}\n[data-v-3e67f0a4] .wrapper[data-type=textarea] .formulate-input-element--textarea textarea{\n  min-height:8rem\n}","",{version:3,sources:["/Users/s.dastan/Desktop/chatwoot/chatwoot/app/javascript/widget/components/PreChat/Form.vue"],names:[],mappings:"AA2SI;EACE,YAAA;EACA;AAAA;AAEA;EACE;AAAA;AAIN;AAIM;IACE;AAAA;AAAA;AAOJ;EACE;AAAA",file:"Form.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n::v-deep {\n  .wrapper[data-type='checkbox'] {\n    .formulate-input-wrapper {\n      display: flex;\n      align-items: center;\n\n      label {\n        margin-left: 0.2rem;\n      }\n    }\n  }\n  @media (prefers-color-scheme: dark) {\n    .wrapper {\n      .formulate-input-element--date,\n      .formulate-input-element--checkbox {\n        input {\n          color-scheme: dark;\n        }\n      }\n    }\n  }\n  .wrapper[data-type='textarea'] {\n    .formulate-input-element--textarea {\n      textarea {\n        min-height: 8rem;\n      }\n    }\n  }\n}\n"]}]),n.exports=e},3152:function(n,e,t){"use strict";t.r(e);t(6),t(3),t(5),t(11),t(8),t(12);var r=t(4),a=(t(24),t(42),t(32),t(105),t(22),t(7),t(26),t(55),t(70),t(658)),i=t(65),o=t(163),s=t(79),l=t(575),u=t(266);function c(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function p(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?c(Object(t),!0).forEach((function(e){d(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function d(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var f={components:{CustomButton:a.a,Spinner:i.a},mixins:[l.a,u.a],props:{options:{type:Object,default:function(){}},disableContactFields:{type:Boolean,default:!1}},data:function(){return{locale:this.$root.$i18n.locale,message:"",formValues:{},labels:{emailAddress:"EMAIL_ADDRESS",fullName:"FULL_NAME",phoneNumber:"PHONE_NUMBER"}}},computed:p(p({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor",isCreating:"conversation/getIsCreating",activeCampaign:"campaign/getActiveCampaign",currentUser:"contacts/getCurrentUser"})),{},{textColor:function(){return Object(o.c)(this.widgetColor)},hasActiveCampaign:function(){return!Object(s.d)(this.activeCampaign)},shouldShowHeaderMessage:function(){return this.hasActiveCampaign||this.options.preChatMessage},headerMessage:function(){return this.hasActiveCampaign?this.$t("PRE_CHAT_FORM.CAMPAIGN_HEADER"):this.options.preChatMessage},preChatFields:function(){return this.disableContactFields?[]:this.options.preChatFields},filteredPreChatFields:function(){var n=!!this.currentUser.email,e=!!this.currentUser.phone_number,t=!!(!!this.currentUser.identifier||n||e);return this.preChatFields.filter((function(r){return(!n||"emailAddress"!==r.name)&&((!e||"phoneNumber"!==r.name)&&(!t||"fullName"!==r.name))}))},enabledPreChatFields:function(){var n=this;return this.filteredPreChatFields.filter((function(n){return n.enabled})).map((function(e){return p(p({},e),{},{type:n.findFieldType(e.type)})}))},conversationCustomAttributes:function(){var n=this,e={};return this.enabledPreChatFields.forEach((function(t){"conversation_attribute"===t.field_type&&(e=p(p({},e),{},d({},t.name,n.getValue(t))))})),e},contactCustomAttributes:function(){var n=this,e={};return this.enabledPreChatFields.forEach((function(t){"contact_attribute"===t.field_type&&(e=p(p({},e),{},d({},t.name,n.getValue(t))))})),e},inputStyles:function(){return"mt-2 border rounded w-full py-2 px-3 text-slate-700 outline-none"},isInputDarkOrLightMode:function(){return"".concat(this.$dm("bg-white","dark:bg-slate-600")," ").concat(this.$dm("text-slate-700","dark:text-slate-50"))},inputBorderColor:function(){return"".concat(this.$dm("border-black-200","dark:border-black-500"))}}),methods:{labelClass:function(n){var e=n.hasErrors;return"text-xs font-medium ".concat(e?this.$dm("text-red-400","dark:text-red-400"):this.$dm("text-black-800","dark:text-slate-50"))},inputClass:function(n){var e=n.hasErrors,t=n.classification,r=n.type;return"box"===t&&"checkbox"===r?"":e?"".concat(this.inputStyles," border-red-200 hover:border-red-300 focus:border-red-300 ").concat(this.isInputDarkOrLightMode):"".concat(this.inputStyles," hover:border-black-300 focus:border-black-300 ").concat(this.isInputDarkOrLightMode," ").concat(this.inputBorderColor)},isContactFieldRequired:function(n){return this.preChatFields.find((function(e){return e.name===n})).required},getLabel:function(n){var e=n.name,t=n.label;return this.labels[e]?this.$t("PRE_CHAT_FORM.FIELDS.".concat(this.labels[e],".LABEL")):t},getPlaceHolder:function(n){var e=n.name,t=n.placeholder;return this.labels[e]?this.$t("PRE_CHAT_FORM.FIELDS.".concat(this.labels[e],".PLACEHOLDER")):t},getValue:function(n){var e=n.name;return"select"===n.type?this.enabledPreChatFields.find((function(n){return n.name===e})).values[this.formValues[e]]:this.formValues[e]||null},getRequiredErrorMessage:function(n){var e=n.name,t=n.label;return this.labels[e]?this.$t("PRE_CHAT_FORM.FIELDS.".concat(this.labels[e],".REQUIRED_ERROR")):"".concat(t," ").concat(this.$t("PRE_CHAT_FORM.IS_REQUIRED"))},getValidation:function(n){var e=n.type,t=n.name;if(!this.isContactFieldRequired(t))return"";var r={emailAddress:"email",phoneNumber:"isPhoneE164OrEmpty",url:"url",date:"date",text:null,select:null,number:null,checkbox:!1},a=Object.keys(r),i="bail|required";if(a.includes(t)||a.includes(e)){var o=r[e]||r[t];return o?"".concat(i,"|").concat(o):i}return""},findFieldType:function(n){return"link"===n?"url":"list"===n?"select":n},getOptions:function(n){if("select"===n.type){var e={};return n.values.forEach((function(n,t){e=p(p({},e),{},d({},t,n))})),e}return null},onSubmit:function(){var n=this.formValues,e=n.emailAddress,t=n.fullName,r=n.phoneNumber,a=n.message,i=this.currentUser.email;this.$emit("submit",{fullName:t,phoneNumber:r,emailAddress:e||i,message:a,activeCampaignId:this.activeCampaign.id,conversationCustomAttributes:this.conversationCustomAttributes,contactCustomAttributes:this.contactCustomAttributes})}}},m=(t(3101),t(1));function h(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function b(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?h(Object(t),!0).forEach((function(e){v(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function v(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var g={components:{PreChatForm:Object(m.a)(f,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("FormulateForm",{staticClass:"flex flex-1 flex-col p-6 overflow-y-auto",on:{submit:n.onSubmit},model:{value:n.formValues,callback:function(e){n.formValues=e},expression:"formValues"}},[n.shouldShowHeaderMessage?t("div",{staticClass:"mb-4 text-sm leading-5",class:n.$dm("text-black-800","dark:text-slate-50")},[n._v("\n    "+n._s(n.headerMessage)+"\n  ")]):n._e(),n._v(" "),n._l(n.enabledPreChatFields,(function(e){return t("FormulateInput",{key:e.name,attrs:{name:e.name,type:e.type,label:n.getLabel(e),placeholder:n.getPlaceHolder(e),validation:n.getValidation(e),options:n.getOptions(e),"label-class":function(e){return n.labelClass(e)},"input-class":function(e){return n.inputClass(e)},"validation-messages":{isPhoneE164OrEmpty:n.$t("PRE_CHAT_FORM.FIELDS.PHONE_NUMBER.VALID_ERROR"),email:n.$t("PRE_CHAT_FORM.FIELDS.EMAIL_ADDRESS.VALID_ERROR"),required:n.getRequiredErrorMessage(e)}}})})),n._v(" "),n.hasActiveCampaign?n._e():t("FormulateInput",{attrs:{name:"message",type:"textarea","label-class":function(e){return n.labelClass(e)},"input-class":function(e){return n.inputClass(e)},label:n.$t("PRE_CHAT_FORM.FIELDS.MESSAGE.LABEL"),placeholder:n.$t("PRE_CHAT_FORM.FIELDS.MESSAGE.PLACEHOLDER"),validation:"required"}}),n._v(" "),t("custom-button",{staticClass:"font-medium my-5",attrs:{block:"","bg-color":n.widgetColor,"text-color":n.textColor,disabled:n.isCreating}},[n.isCreating?t("spinner",{staticClass:"p-0"}):n._e(),n._v("\n    "+n._s(n.$t("START_CONVERSATION"))+"\n  ")],1)],2)}),[],!1,null,"3e67f0a4",null).exports},mixins:[t(343).a,l.a],computed:b(b({},Object(r.mapGetters)({conversationSize:"conversation/getConversationSize"})),{},{disableContactFields:function(){var n=(this.$route.params||{}).disableContactFields,e=void 0!==n&&n;return e}}),watch:{conversationSize:function(n,e){!e&&n>e&&this.replaceRoute("messages")}},methods:{onSubmit:function(n){var e=n.fullName,t=n.emailAddress,r=n.message,a=n.activeCampaignId,i=n.phoneNumber,o=n.contactCustomAttributes,l=n.conversationCustomAttributes;a?(bus.$emit("execute-campaign",{campaignId:a,customAttributes:l}),this.$store.dispatch("contacts/update",{user:{email:t,name:e,phone_number:i}})):this.$store.dispatch("conversation/createConversation",{fullName:e,emailAddress:t,message:r,phoneNumber:i,customAttributes:l}),Object(s.d)(o)||this.$store.dispatch("contacts/setCustomAttributes",o)}}},C=Object(m.a)(g,(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"flex flex-1 overflow-auto"},[t("pre-chat-form",{attrs:{options:n.preChatFormOptions,"disable-contact-fields":n.disableContactFields},on:{submit:n.onSubmit}})],1)}),[],!1,null,null,null);e.default=C.exports},658:function(n,e,t){"use strict";t(6);var r={props:{block:{type:Boolean,default:!1},type:{type:String,default:"blue"},bgColor:{type:String,default:""},textColor:{type:String,default:""},disabled:{type:Boolean,default:!1}},computed:{buttonClassName:function(){var n="text-white py-3 px-4 rounded shadow-sm";return"clear"===this.type&&(n="flex mx-auto mt-4 text-xs w-auto text-black-600"),"blue"!==this.type||Object.keys(this.buttonStyles).length||(n="".concat(n," bg-woot-500 hover:bg-woot-700")),this.block&&(n="".concat(n," w-full")),n},buttonStyles:function(){var n={};return this.bgColor&&(n.backgroundColor=this.bgColor),this.textColor&&(n.color=this.textColor),n}},methods:{onClick:function(n){this.$emit("click",n)}}},a=t(1),i=Object(a.a)(r,(function(){var n=this,e=n.$createElement;return(n._self._c||e)("button",{class:n.buttonClassName,style:n.buttonStyles,attrs:{disabled:n.disabled},on:{click:n.onClick}},[n._t("default")],2)}),[],!1,null,null,null);e.a=i.exports}}]);
//# sourceMappingURL=30-2ccf0463c890cce81c0c.chunk.js.map