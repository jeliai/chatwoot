"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var js_cookie_1 = tslib_1.__importDefault(require("js-cookie"));
var tld_1 = require("../tld");
var assert_1 = tslib_1.__importDefault(require("assert"));
describe('topDomain', function () {
    beforeEach(function () {
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        var cookies = {};
        // @ts-ignore
        jest.spyOn(js_cookie_1.default, 'set').mockImplementation(function (key, val, opts) {
            var _a, _b;
            var parts = (_b = (_a = opts === null || opts === void 0 ? void 0 : opts.domain) === null || _a === void 0 ? void 0 : _a.split('.')) !== null && _b !== void 0 ? _b : [];
            if (parts[1] === 'co')
                return;
            cookies[key] = val;
            return val;
        });
        // @ts-ignore
        jest.spyOn(js_cookie_1.default, 'get').mockImplementation(function (key) {
            return cookies[key];
        });
    });
    it('should match the following urls', function () {
        assert_1.default.strictEqual(tld_1.tld(new URL('http://www.google.com')), 'google.com');
        assert_1.default.strictEqual(tld_1.tld(new URL('http://gist.github.com/calvinfo/some_file')), 'github.com');
        assert_1.default.strictEqual(tld_1.tld(new URL('http://localhost:3000')), undefined);
        assert_1.default.strictEqual(tld_1.tld(new URL('https://google.com:443/stuff')), 'google.com');
        assert_1.default.strictEqual(tld_1.tld(new URL('http://dev:3000')), undefined);
        assert_1.default.strictEqual(tld_1.tld(new URL('http://app.jut.io')), 'jut.io');
        assert_1.default.strictEqual(tld_1.tld(new URL('http://app.segment.io')), 'segment.io');
    });
});
//# sourceMappingURL=tld.test.js.map