{"ast":null,"code":"function _typeof2(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\n/*!\n * videojs-wavesurfer\n * @version 3.8.0\n * @see https://github.com/collab-project/videojs-wavesurfer\n * @copyright 2014-2021 Collab\n * @license MIT\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n  if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof2(exports)) === 'object' && (typeof module === \"undefined\" ? \"undefined\" : _typeof2(module)) === 'object') module.exports = factory(require(\"video.js\"), require(\"wavesurfer.js\"));else if (typeof define === 'function' && define.amd) define(\"VideojsWavesurfer\", [\"video.js\", \"wavesurfer.js\"], factory);else if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof2(exports)) === 'object') exports[\"VideojsWavesurfer\"] = factory(require(\"video.js\"), require(\"wavesurfer.js\"));else root[\"VideojsWavesurfer\"] = factory(root[\"videojs\"], root[\"WaveSurfer\"]);\n})(self, function (__WEBPACK_EXTERNAL_MODULE_video_js__, __WEBPACK_EXTERNAL_MODULE_wavesurfer_js__) {\n  return (\n    /******/\n    function () {\n      // webpackBootstrap\n\n      /******/\n      var __webpack_modules__ = {\n        /***/\n        \"./node_modules/add-zero/index.js\":\n        /*!****************************************!*\\\n          !*** ./node_modules/add-zero/index.js ***!\n          \\****************************************/\n\n        /***/\n        function node_modulesAddZeroIndexJs(module, exports, __webpack_require__) {\n          var __WEBPACK_AMD_DEFINE_RESULT__;\n\n          (function (exports) {\n            'use strict';\n\n            function addZero(value, digits) {\n              digits = digits || 2;\n              var isNegative = Number(value) < 0;\n              var buffer = value.toString();\n              var size = 0; // Strip minus sign if number is negative\n\n              if (isNegative) {\n                buffer = buffer.slice(1);\n              }\n\n              size = digits - buffer.length + 1;\n              buffer = new Array(size).join('0').concat(buffer); // Adds back minus sign if needed\n\n              return (isNegative ? '-' : '') + buffer;\n            }\n\n            if (true) {\n              !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n                return addZero;\n              }.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n            } else {}\n          })(this);\n          /***/\n\n        },\n\n        /***/\n        \"./src/js/defaults.js\":\n        /*!****************************!*\\\n          !*** ./src/js/defaults.js ***!\n          \\****************************/\n\n        /***/\n        function srcJsDefaultsJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n          var pluginDefaultOptions = {\n            debug: false,\n            displayMilliseconds: true\n          };\n          var _default = pluginDefaultOptions;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/event.js\":\n        /*!*************************!*\\\n          !*** ./src/js/event.js ***!\n          \\*************************/\n\n        /***/\n        function srcJsEventJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          var Event = function Event() {\n            _classCallCheck(this, Event);\n          };\n\n          Event.READY = 'ready';\n          Event.ERROR = 'error';\n          Event.VOLUMECHANGE = 'volumechange';\n          Event.FULLSCREENCHANGE = 'fullscreenchange';\n          Event.TIMEUPDATE = 'timeupdate';\n          Event.ENDED = 'ended';\n          Event.PAUSE = 'pause';\n          Event.FINISH = 'finish';\n          Event.SEEK = 'seek';\n          Event.REDRAW = 'redraw';\n          Event.AUDIOPROCESS = 'audioprocess';\n          Event.DEVICE_READY = 'deviceReady';\n          Event.DEVICE_ERROR = 'deviceError';\n          Event.AUDIO_OUTPUT_READY = 'audioOutputReady';\n          Event.WAVE_READY = 'waveReady';\n          Event.PLAYBACK_FINISH = 'playbackFinish';\n          Event.ABORT = 'abort';\n          Event.RESIZE = 'resize';\n          Object.freeze(Event);\n          var _default = Event;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/middleware.js\":\n        /*!******************************!*\\\n          !*** ./src/js/middleware.js ***!\n          \\******************************/\n\n        /***/\n        function srcJsMiddlewareJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n          var WavesurferMiddleware = {\n            setSource: function setSource(srcObj, next) {\n              if (this.player.usingPlugin('wavesurfer')) {\n                var backend = this.player.wavesurfer().surfer.params.backend;\n                var src = srcObj.src;\n                var peaks = srcObj.peaks;\n\n                switch (backend) {\n                  case 'WebAudio':\n                    this.player.wavesurfer().load(src);\n                    break;\n\n                  default:\n                    next(null, srcObj);\n                    var element = this.player.tech_.el();\n\n                    if (peaks === undefined) {\n                      this.player.wavesurfer().load(element);\n                    } else {\n                      this.player.wavesurfer().load(element, peaks);\n                    }\n\n                    break;\n                }\n              } else {\n                next(null, srcObj);\n              }\n            }\n          };\n          var _default = WavesurferMiddleware;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/utils/format-time.js\":\n        /*!*************************************!*\\\n          !*** ./src/js/utils/format-time.js ***!\n          \\*************************************/\n\n        /***/\n        function srcJsUtilsFormatTimeJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _addZero = _interopRequireDefault(__webpack_require__(\n          /*! add-zero */\n          \"./node_modules/add-zero/index.js\"));\n\n          var _parseMs = _interopRequireDefault(__webpack_require__(\n          /*! parse-ms */\n          \"./node_modules/parse-ms/index.js\"));\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n\n          var formatTime = function formatTime(seconds, guide) {\n            var displayMilliseconds = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n            seconds = seconds < 0 ? 0 : seconds;\n\n            if (isNaN(seconds) || seconds === Infinity) {\n              seconds = 0;\n            }\n\n            var inputTime = (0, _parseMs.default)(seconds * 1000);\n            var guideTime = inputTime;\n\n            if (guide !== undefined) {\n              guideTime = (0, _parseMs.default)(guide * 1000);\n            }\n\n            var hr = (0, _addZero.default)(inputTime.hours);\n            var min = (0, _addZero.default)(inputTime.minutes);\n            var sec = (0, _addZero.default)(inputTime.seconds);\n            var ms = (0, _addZero.default)(inputTime.milliseconds, 3);\n\n            if (inputTime.days > 0 || guideTime.days > 0) {\n              var day = (0, _addZero.default)(inputTime.days);\n              return \"\".concat(day, \":\").concat(hr, \":\").concat(min, \":\").concat(sec);\n            }\n\n            if (inputTime.hours > 0 || guideTime.hours > 0) {\n              return \"\".concat(hr, \":\").concat(min, \":\").concat(sec);\n            }\n\n            if (displayMilliseconds) {\n              return \"\".concat(min, \":\").concat(sec, \":\").concat(ms);\n            }\n\n            return \"\".concat(min, \":\").concat(sec);\n          };\n\n          var _default = formatTime;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/utils/log.js\":\n        /*!*****************************!*\\\n          !*** ./src/js/utils/log.js ***!\n          \\*****************************/\n\n        /***/\n        function srcJsUtilsLogJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _video = _interopRequireDefault(__webpack_require__(\n          /*! video.js */\n          \"video.js\"));\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n\n          var ERROR = 'error';\n          var WARN = 'warn';\n\n          var log = function log(args, logType, debug) {\n            if (debug === true) {\n              if (logType === ERROR) {\n                _video.default.log.error(args);\n              } else if (logType === WARN) {\n                _video.default.log.warn(args);\n              } else {\n                _video.default.log(args);\n              }\n            }\n          };\n\n          var _default = log;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/global/window.js\":\n        /*!***************************************!*\\\n          !*** ./node_modules/global/window.js ***!\n          \\***************************************/\n\n        /***/\n        function node_modulesGlobalWindowJs(module, __unused_webpack_exports, __webpack_require__) {\n          var win;\n\n          if (typeof window !== \"undefined\") {\n            win = window;\n          } else if (typeof __webpack_require__.g !== \"undefined\") {\n            win = __webpack_require__.g;\n          } else if (typeof self !== \"undefined\") {\n            win = self;\n          } else {\n            win = {};\n          }\n\n          module.exports = win;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/parse-ms/index.js\":\n        /*!****************************************!*\\\n          !*** ./node_modules/parse-ms/index.js ***!\n          \\****************************************/\n\n        /***/\n        function node_modulesParseMsIndexJs(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {\n          \"use strict\";\n\n          __webpack_require__.r(__webpack_exports__);\n          /* harmony export */\n\n\n          __webpack_require__.d(__webpack_exports__, {\n            /* harmony export */\n            \"default\": function _default() {\n              return (\n                /* binding */\n                parseMilliseconds\n              );\n            }\n            /* harmony export */\n\n          });\n\n          function parseMilliseconds(milliseconds) {\n            if (typeof milliseconds !== 'number') {\n              throw new TypeError('Expected a number');\n            }\n\n            var roundTowardsZero = milliseconds > 0 ? Math.floor : Math.ceil;\n            return {\n              days: roundTowardsZero(milliseconds / 86400000),\n              hours: roundTowardsZero(milliseconds / 3600000) % 24,\n              minutes: roundTowardsZero(milliseconds / 60000) % 60,\n              seconds: roundTowardsZero(milliseconds / 1000) % 60,\n              milliseconds: roundTowardsZero(milliseconds) % 1000,\n              microseconds: roundTowardsZero(milliseconds * 1000) % 1000,\n              nanoseconds: roundTowardsZero(milliseconds * 1e6) % 1000\n            };\n          }\n          /***/\n\n        },\n\n        /***/\n        \"video.js\":\n        /*!*************************************************************************************************!*\\\n          !*** external {\"commonjs\":\"video.js\",\"commonjs2\":\"video.js\",\"amd\":\"video.js\",\"root\":\"videojs\"} ***!\n          \\*************************************************************************************************/\n\n        /***/\n        function videoJs(module) {\n          \"use strict\";\n\n          module.exports = __WEBPACK_EXTERNAL_MODULE_video_js__;\n          /***/\n        },\n\n        /***/\n        \"wavesurfer.js\":\n        /*!*******************************************************************************************************************!*\\\n          !*** external {\"commonjs\":\"wavesurfer.js\",\"commonjs2\":\"wavesurfer.js\",\"amd\":\"wavesurfer.js\",\"root\":\"WaveSurfer\"} ***!\n          \\*******************************************************************************************************************/\n\n        /***/\n        function wavesurferJs(module) {\n          \"use strict\";\n\n          module.exports = __WEBPACK_EXTERNAL_MODULE_wavesurfer_js__;\n          /***/\n        }\n        /******/\n\n      };\n      /************************************************************************/\n\n      /******/\n      // The module cache\n\n      /******/\n\n      var __webpack_module_cache__ = {};\n      /******/\n\n      /******/\n      // The require function\n\n      /******/\n\n      function __webpack_require__(moduleId) {\n        /******/\n        // Check if module is in cache\n\n        /******/\n        var cachedModule = __webpack_module_cache__[moduleId];\n        /******/\n\n        if (cachedModule !== undefined) {\n          /******/\n          return cachedModule.exports;\n          /******/\n        }\n        /******/\n        // Create a new module (and put it into the cache)\n\n        /******/\n\n\n        var module = __webpack_module_cache__[moduleId] = {\n          /******/\n          // no module.id needed\n\n          /******/\n          // no module.loaded needed\n\n          /******/\n          exports: {}\n          /******/\n\n        };\n        /******/\n\n        /******/\n        // Execute the module function\n\n        /******/\n\n        __webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n        /******/\n\n        /******/\n        // Return the exports of the module\n\n        /******/\n\n\n        return module.exports;\n        /******/\n      }\n      /******/\n\n      /************************************************************************/\n\n      /******/\n\n      /* webpack/runtime/define property getters */\n\n      /******/\n\n\n      (function () {\n        /******/\n        // define getter functions for harmony exports\n\n        /******/\n        __webpack_require__.d = function (exports, definition) {\n          /******/\n          for (var key in definition) {\n            /******/\n            if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n              /******/\n              Object.defineProperty(exports, key, {\n                enumerable: true,\n                get: definition[key]\n              });\n              /******/\n            }\n            /******/\n\n          }\n          /******/\n\n        };\n        /******/\n\n      })();\n      /******/\n\n      /******/\n\n      /* webpack/runtime/global */\n\n      /******/\n\n\n      (function () {\n        /******/\n        __webpack_require__.g = function () {\n          /******/\n          if ((typeof globalThis === \"undefined\" ? \"undefined\" : _typeof2(globalThis)) === 'object') return globalThis;\n          /******/\n\n          try {\n            /******/\n            return this || new Function('return this')();\n            /******/\n          } catch (e) {\n            /******/\n            if ((typeof window === \"undefined\" ? \"undefined\" : _typeof2(window)) === 'object') return window;\n            /******/\n          }\n          /******/\n\n        }();\n        /******/\n\n      })();\n      /******/\n\n      /******/\n\n      /* webpack/runtime/hasOwnProperty shorthand */\n\n      /******/\n\n\n      (function () {\n        /******/\n        __webpack_require__.o = function (obj, prop) {\n          return Object.prototype.hasOwnProperty.call(obj, prop);\n        };\n        /******/\n\n      })();\n      /******/\n\n      /******/\n\n      /* webpack/runtime/make namespace object */\n\n      /******/\n\n\n      (function () {\n        /******/\n        // define __esModule on exports\n\n        /******/\n        __webpack_require__.r = function (exports) {\n          /******/\n          if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n            /******/\n            Object.defineProperty(exports, Symbol.toStringTag, {\n              value: 'Module'\n            });\n            /******/\n          }\n          /******/\n\n\n          Object.defineProperty(exports, '__esModule', {\n            value: true\n          });\n          /******/\n        };\n        /******/\n\n      })();\n      /******/\n\n      /************************************************************************/\n\n\n      var __webpack_exports__ = {}; // This entry need to be wrapped in an IIFE because it need to be in strict mode.\n\n      (function () {\n        \"use strict\";\n\n        var exports = __webpack_exports__;\n        /*!**************************************!*\\\n          !*** ./src/js/videojs.wavesurfer.js ***!\n          \\**************************************/\n\n        function _typeof(obj) {\n          \"@babel/helpers - typeof\";\n\n          if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n            _typeof = function _typeof(obj) {\n              return typeof obj;\n            };\n          } else {\n            _typeof = function _typeof(obj) {\n              return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n            };\n          }\n\n          return _typeof(obj);\n        }\n\n        Object.defineProperty(exports, \"__esModule\", {\n          value: true\n        });\n        exports.Wavesurfer = void 0;\n\n        var _event = _interopRequireDefault(__webpack_require__(\n        /*! ./event */\n        \"./src/js/event.js\"));\n\n        var _log2 = _interopRequireDefault(__webpack_require__(\n        /*! ./utils/log */\n        \"./src/js/utils/log.js\"));\n\n        var _formatTime = _interopRequireDefault(__webpack_require__(\n        /*! ./utils/format-time */\n        \"./src/js/utils/format-time.js\"));\n\n        var _defaults = _interopRequireDefault(__webpack_require__(\n        /*! ./defaults */\n        \"./src/js/defaults.js\"));\n\n        var _middleware = _interopRequireDefault(__webpack_require__(\n        /*! ./middleware */\n        \"./src/js/middleware.js\"));\n\n        var _window = _interopRequireDefault(__webpack_require__(\n        /*! global/window */\n        \"./node_modules/global/window.js\"));\n\n        var _video = _interopRequireDefault(__webpack_require__(\n        /*! video.js */\n        \"video.js\"));\n\n        var _wavesurfer = _interopRequireDefault(__webpack_require__(\n        /*! wavesurfer.js */\n        \"wavesurfer.js\"));\n\n        function _interopRequireDefault(obj) {\n          return obj && obj.__esModule ? obj : {\n            default: obj\n          };\n        }\n\n        function _classCallCheck(instance, Constructor) {\n          if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n          }\n        }\n\n        function _defineProperties(target, props) {\n          for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if (\"value\" in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n          }\n        }\n\n        function _createClass(Constructor, protoProps, staticProps) {\n          if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n          if (staticProps) _defineProperties(Constructor, staticProps);\n          return Constructor;\n        }\n\n        function _inherits(subClass, superClass) {\n          if (typeof superClass !== \"function\" && superClass !== null) {\n            throw new TypeError(\"Super expression must either be null or a function\");\n          }\n\n          subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n              value: subClass,\n              writable: true,\n              configurable: true\n            }\n          });\n          if (superClass) _setPrototypeOf(subClass, superClass);\n        }\n\n        function _setPrototypeOf(o, p) {\n          _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n            o.__proto__ = p;\n            return o;\n          };\n\n          return _setPrototypeOf(o, p);\n        }\n\n        function _createSuper(Derived) {\n          var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n          return function _createSuperInternal() {\n            var Super = _getPrototypeOf(Derived),\n                result;\n\n            if (hasNativeReflectConstruct) {\n              var NewTarget = _getPrototypeOf(this).constructor;\n\n              result = Reflect.construct(Super, arguments, NewTarget);\n            } else {\n              result = Super.apply(this, arguments);\n            }\n\n            return _possibleConstructorReturn(this, result);\n          };\n        }\n\n        function _possibleConstructorReturn(self, call) {\n          if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n            return call;\n          }\n\n          return _assertThisInitialized(self);\n        }\n\n        function _assertThisInitialized(self) {\n          if (self === void 0) {\n            throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n          }\n\n          return self;\n        }\n\n        function _isNativeReflectConstruct() {\n          if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n          if (Reflect.construct.sham) return false;\n          if (typeof Proxy === \"function\") return true;\n\n          try {\n            Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n            return true;\n          } catch (e) {\n            return false;\n          }\n        }\n\n        function _getPrototypeOf(o) {\n          _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n            return o.__proto__ || Object.getPrototypeOf(o);\n          };\n          return _getPrototypeOf(o);\n        }\n\n        var Plugin = _video.default.getPlugin('plugin');\n\n        var wavesurferPluginName = 'wavesurfer';\n        var wavesurferClassName = 'vjs-wavedisplay';\n        var wavesurferStyleName = 'vjs-wavesurfer';\n        var WEBAUDIO = 'WebAudio';\n        var MEDIAELEMENT = 'MediaElement';\n        var MEDIAELEMENT_WEBAUDIO = 'MediaElementWebAudio';\n\n        var Wavesurfer = function (_Plugin) {\n          _inherits(Wavesurfer, _Plugin);\n\n          var _super = _createSuper(Wavesurfer);\n\n          function Wavesurfer(player, options) {\n            var _this;\n\n            _classCallCheck(this, Wavesurfer);\n\n            _this = _super.call(this, player, options);\n            player.addClass(wavesurferStyleName);\n            options = _video.default.mergeOptions(_defaults.default, options);\n            _this.waveReady = false;\n            _this.waveFinished = false;\n            _this.liveMode = false;\n            _this.backend = null;\n            _this.debug = options.debug.toString() === 'true';\n            _this.textTracksEnabled = _this.player.options_.tracks.length > 0;\n            _this.displayMilliseconds = options.displayMilliseconds;\n\n            if (options.formatTime && typeof options.formatTime === 'function') {\n              _this.setFormatTime(options.formatTime);\n            } else {\n              _this.setFormatTime(function (seconds, guide) {\n                return (0, _formatTime.default)(seconds, guide, _this.displayMilliseconds);\n              });\n            }\n\n            _this.player.one(_event.default.READY, _this.initialize.bind(_assertThisInitialized(_this)));\n\n            return _this;\n          }\n\n          _createClass(Wavesurfer, [{\n            key: \"initialize\",\n            value: function initialize() {\n              var _this2 = this;\n\n              if (this.player.bigPlayButton !== undefined) {\n                this.player.bigPlayButton.hide();\n              }\n\n              var mergedOptions = this.parseOptions(this.player.options_.plugins.wavesurfer);\n\n              if (this.player.options_.controls === true) {\n                this.player.controlBar.show();\n                this.player.controlBar.el_.style.display = 'flex';\n\n                if (this.backend === WEBAUDIO && this.player.controlBar.progressControl !== undefined) {\n                  this.player.controlBar.progressControl.hide();\n                }\n\n                if (this.player.controlBar.pictureInPictureToggle !== undefined) {\n                  this.player.controlBar.pictureInPictureToggle.hide();\n                }\n\n                var uiElements = ['currentTimeDisplay', 'timeDivider', 'durationDisplay'];\n                uiElements.forEach(function (element) {\n                  element = _this2.player.controlBar[element];\n\n                  if (element !== undefined) {\n                    element.el_.style.display = 'block';\n                    element.show();\n                  }\n                });\n\n                if (this.player.controlBar.remainingTimeDisplay !== undefined) {\n                  this.player.controlBar.remainingTimeDisplay.hide();\n                }\n\n                if (this.backend === WEBAUDIO && this.player.controlBar.playToggle !== undefined) {\n                  this.player.controlBar.playToggle.on(['tap', 'click'], this.onPlayToggle.bind(this));\n                  this.player.controlBar.playToggle.hide();\n                }\n              }\n\n              this.surfer = _wavesurfer.default.create(mergedOptions);\n              this.surfer.on(_event.default.ERROR, this.onWaveError.bind(this));\n              this.surfer.on(_event.default.FINISH, this.onWaveFinish.bind(this));\n              this.backend = this.surfer.params.backend;\n              this.log('Using wavesurfer.js ' + this.backend + ' backend.');\n\n              if ('microphone' in this.player.wavesurfer().surfer.getActivePlugins()) {\n                this.liveMode = true;\n                this.waveReady = true;\n                this.log('wavesurfer.js microphone plugin enabled.');\n                this.player.controlBar.playToggle.show();\n                this.surfer.microphone.on(_event.default.DEVICE_ERROR, this.onWaveError.bind(this));\n              }\n\n              this.surferReady = this.onWaveReady.bind(this);\n\n              if (this.backend === WEBAUDIO) {\n                this.surferProgress = this.onWaveProgress.bind(this);\n                this.surferSeek = this.onWaveSeek.bind(this);\n\n                if (this.player.muted()) {\n                  this.setVolume(0);\n                }\n              }\n\n              if (!this.liveMode) {\n                this.setupPlaybackEvents(true);\n              }\n\n              this.player.on(_event.default.VOLUMECHANGE, this.onVolumeChange.bind(this));\n              this.player.on(_event.default.FULLSCREENCHANGE, this.onScreenChange.bind(this));\n\n              if (this.player.options_.fluid === true) {\n                this.surfer.drawer.wrapper.className = wavesurferClassName;\n              }\n            }\n          }, {\n            key: \"parseOptions\",\n            value: function parseOptions() {\n              var surferOpts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n              var rect = this.player.el_.getBoundingClientRect();\n              this.originalWidth = this.player.options_.width || rect.width;\n              this.originalHeight = this.player.options_.height || rect.height;\n              var controlBarHeight = this.player.controlBar.height();\n\n              if (this.player.options_.controls === true && controlBarHeight === 0) {\n                controlBarHeight = 30;\n              }\n\n              if (surferOpts.container === undefined) {\n                surferOpts.container = this.player.el_;\n              }\n\n              if (surferOpts.waveformHeight === undefined) {\n                var playerHeight = rect.height;\n                surferOpts.height = playerHeight - controlBarHeight;\n              } else {\n                surferOpts.height = surferOpts.waveformHeight;\n              }\n\n              if (surferOpts.splitChannels && surferOpts.splitChannels === true) {\n                surferOpts.height /= 2;\n              }\n\n              if ('backend' in surferOpts) {\n                this.backend = surferOpts.backend;\n              } else {\n                surferOpts.backend = this.backend = MEDIAELEMENT;\n              }\n\n              return surferOpts;\n            }\n          }, {\n            key: \"setupPlaybackEvents\",\n            value: function setupPlaybackEvents(enable) {\n              if (enable === false) {\n                this.surfer.un(_event.default.READY, this.surferReady);\n\n                if (this.backend === WEBAUDIO) {\n                  this.surfer.un(_event.default.AUDIOPROCESS, this.surferProgress);\n                  this.surfer.un(_event.default.SEEK, this.surferSeek);\n                }\n              } else if (enable === true) {\n                this.surfer.on(_event.default.READY, this.surferReady);\n\n                if (this.backend === WEBAUDIO) {\n                  this.surfer.on(_event.default.AUDIOPROCESS, this.surferProgress);\n                  this.surfer.on(_event.default.SEEK, this.surferSeek);\n                }\n              }\n            }\n          }, {\n            key: \"load\",\n            value: function load(url, peaks) {\n              if (url instanceof Blob || url instanceof File) {\n                this.log('Loading object: ' + JSON.stringify(url));\n                this.surfer.loadBlob(url);\n              } else {\n                if (peaks !== undefined) {\n                  this.loadPeaks(url, peaks);\n                } else {\n                  if (typeof url === 'string') {\n                    this.log('Loading URL: ' + url);\n                  } else {\n                    this.log('Loading element: ' + url);\n                  }\n\n                  this.surfer.load(url);\n                }\n              }\n            }\n          }, {\n            key: \"loadPeaks\",\n            value: function loadPeaks(url, peaks) {\n              var _this3 = this;\n\n              if (Array.isArray(peaks)) {\n                this.log('Loading URL with array of peaks: ' + url);\n                this.surfer.load(url, peaks);\n              } else {\n                var requestOptions = {\n                  url: peaks,\n                  responseType: 'json'\n                };\n\n                if (this.player.options_.plugins.wavesurfer.xhr !== undefined) {\n                  requestOptions.xhr = this.player.options_.plugins.wavesurfer.xhr;\n                }\n\n                var request = _wavesurfer.default.util.fetchFile(requestOptions);\n\n                request.once('success', function (data) {\n                  _this3.log('Loaded Peak Data URL: ' + peaks);\n\n                  if (data && data.data) {\n                    _this3.surfer.load(url, data.data);\n                  } else {\n                    _this3.player.trigger(_event.default.ERROR, 'Could not load peaks data from ' + peaks);\n\n                    _this3.log(err, 'error');\n                  }\n                });\n                request.once('error', function (e) {\n                  _this3.player.trigger(_event.default.ERROR, 'Unable to retrieve peak data from ' + peaks + '. Status code: ' + request.response.status);\n                });\n              }\n            }\n          }, {\n            key: \"play\",\n            value: function play() {\n              if (this.player.controlBar.playToggle !== undefined && this.player.controlBar.playToggle.contentEl()) {\n                this.player.controlBar.playToggle.handlePlay();\n              }\n\n              if (this.liveMode) {\n                if (!this.surfer.microphone.active) {\n                  this.log('Start microphone');\n                  this.surfer.microphone.start();\n                } else {\n                  var paused = !this.surfer.microphone.paused;\n\n                  if (paused) {\n                    this.pause();\n                  } else {\n                    this.log('Resume microphone');\n                    this.surfer.microphone.play();\n                  }\n                }\n              } else {\n                this.log('Start playback');\n                this.player.play();\n                this.surfer.play();\n              }\n            }\n          }, {\n            key: \"pause\",\n            value: function pause() {\n              if (this.player.controlBar.playToggle !== undefined && this.player.controlBar.playToggle.contentEl()) {\n                this.player.controlBar.playToggle.handlePause();\n              }\n\n              if (this.liveMode) {\n                this.log('Pause microphone');\n                this.surfer.microphone.pause();\n              } else {\n                this.log('Pause playback');\n\n                if (!this.waveFinished) {\n                  this.surfer.pause();\n                } else {\n                  this.waveFinished = false;\n                }\n\n                this.setCurrentTime();\n              }\n            }\n          }, {\n            key: \"dispose\",\n            value: function dispose() {\n              if (this.surfer) {\n                if (this.liveMode && this.surfer.microphone) {\n                  this.surfer.microphone.destroy();\n                  this.log('Destroyed microphone plugin');\n                }\n\n                this.surfer.destroy();\n              }\n\n              this.log('Destroyed plugin');\n            }\n          }, {\n            key: \"isDestroyed\",\n            value: function isDestroyed() {\n              return this.player && this.player.children() === null;\n            }\n          }, {\n            key: \"destroy\",\n            value: function destroy() {\n              this.player.dispose();\n            }\n          }, {\n            key: \"setVolume\",\n            value: function setVolume(volume) {\n              if (volume !== undefined) {\n                this.log('Changing volume to: ' + volume);\n                this.player.volume(volume);\n              }\n            }\n          }, {\n            key: \"exportImage\",\n            value: function exportImage(format, quality) {\n              var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'blob';\n              return this.surfer.exportImage(format, quality, type);\n            }\n          }, {\n            key: \"setAudioOutput\",\n            value: function setAudioOutput(deviceId) {\n              var _this4 = this;\n\n              if (deviceId) {\n                this.surfer.setSinkId(deviceId).then(function (result) {\n                  _this4.player.trigger(_event.default.AUDIO_OUTPUT_READY);\n                }).catch(function (err) {\n                  _this4.player.trigger(_event.default.ERROR, err);\n\n                  _this4.log(err, 'error');\n                });\n              }\n            }\n          }, {\n            key: \"getCurrentTime\",\n            value: function getCurrentTime() {\n              var currentTime = this.surfer.getCurrentTime();\n              currentTime = isNaN(currentTime) ? 0 : currentTime;\n              return currentTime;\n            }\n          }, {\n            key: \"setCurrentTime\",\n            value: function setCurrentTime(currentTime, duration) {\n              if (currentTime === undefined) {\n                currentTime = this.surfer.getCurrentTime();\n              }\n\n              if (duration === undefined) {\n                duration = this.surfer.getDuration();\n              }\n\n              currentTime = isNaN(currentTime) ? 0 : currentTime;\n              duration = isNaN(duration) ? 0 : duration;\n\n              if (this.player.controlBar.currentTimeDisplay && this.player.controlBar.currentTimeDisplay.contentEl() && this.player.controlBar.currentTimeDisplay.contentEl().lastChild) {\n                var time = Math.min(currentTime, duration);\n                this.player.controlBar.currentTimeDisplay.formattedTime_ = this.player.controlBar.currentTimeDisplay.contentEl().lastChild.textContent = this._formatTime(time, duration, this.displayMilliseconds);\n              }\n\n              if (this.textTracksEnabled && this.player.tech_ && this.player.tech_.el_) {\n                this.player.tech_.setCurrentTime(currentTime);\n              }\n            }\n          }, {\n            key: \"getDuration\",\n            value: function getDuration() {\n              var duration = this.surfer.getDuration();\n              duration = isNaN(duration) ? 0 : duration;\n              return duration;\n            }\n          }, {\n            key: \"setDuration\",\n            value: function setDuration(duration) {\n              if (duration === undefined) {\n                duration = this.surfer.getDuration();\n              }\n\n              duration = isNaN(duration) ? 0 : duration;\n\n              if (this.player.controlBar.durationDisplay && this.player.controlBar.durationDisplay.contentEl() && this.player.controlBar.durationDisplay.contentEl().lastChild) {\n                this.player.controlBar.durationDisplay.formattedTime_ = this.player.controlBar.durationDisplay.contentEl().lastChild.textContent = this._formatTime(duration, duration, this.displayMilliseconds);\n              }\n            }\n          }, {\n            key: \"onWaveReady\",\n            value: function onWaveReady() {\n              var _this5 = this;\n\n              this.waveReady = true;\n              this.waveFinished = false;\n              this.liveMode = false;\n              this.log('Waveform is ready');\n              this.player.trigger(_event.default.WAVE_READY);\n\n              if (this.backend === WEBAUDIO) {\n                this.setCurrentTime();\n                this.setDuration();\n\n                if (this.player.controlBar.playToggle !== undefined && this.player.controlBar.playToggle.contentEl()) {\n                  this.player.controlBar.playToggle.show();\n                }\n              }\n\n              if (this.player.loadingSpinner.contentEl()) {\n                this.player.loadingSpinner.hide();\n              }\n\n              if (this.player.options_.autoplay === true) {\n                this.setVolume(0);\n\n                if (this.backend === WEBAUDIO) {\n                  this.play();\n                } else {\n                  this.player.play().catch(function (e) {\n                    _this5.onWaveError(e);\n                  });\n                }\n              }\n            }\n          }, {\n            key: \"onWaveFinish\",\n            value: function onWaveFinish() {\n              var _this6 = this;\n\n              this.log('Finished playback');\n              this.player.trigger(_event.default.PLAYBACK_FINISH);\n\n              if (this.player.options_.loop === true) {\n                if (this.backend === WEBAUDIO) {\n                  this.surfer.stop();\n                  this.play();\n                }\n              } else {\n                this.waveFinished = true;\n\n                if (this.backend === WEBAUDIO) {\n                  this.pause();\n                  this.player.trigger(_event.default.ENDED);\n                  this.surfer.once(_event.default.SEEK, function () {\n                    if (_this6.player.controlBar.playToggle !== undefined) {\n                      _this6.player.controlBar.playToggle.removeClass('vjs-ended');\n                    }\n\n                    _this6.player.trigger(_event.default.PAUSE);\n                  });\n                }\n              }\n            }\n          }, {\n            key: \"onWaveProgress\",\n            value: function onWaveProgress(time) {\n              this.setCurrentTime();\n            }\n          }, {\n            key: \"onWaveSeek\",\n            value: function onWaveSeek() {\n              this.setCurrentTime();\n            }\n          }, {\n            key: \"onWaveError\",\n            value: function onWaveError(error) {\n              if (error.name && error.name === 'AbortError' || error.name === 'DOMException' && error.message.startsWith('The operation was aborted')) {\n                this.player.trigger(_event.default.ABORT, error);\n              } else {\n                this.player.trigger(_event.default.ERROR, error);\n                this.log(error, 'error');\n              }\n            }\n          }, {\n            key: \"onPlayToggle\",\n            value: function onPlayToggle() {\n              if (this.player.controlBar.playToggle !== undefined && this.player.controlBar.playToggle.hasClass('vjs-ended')) {\n                this.player.controlBar.playToggle.removeClass('vjs-ended');\n              }\n\n              if (this.surfer.isPlaying()) {\n                this.pause();\n              } else {\n                this.play();\n              }\n            }\n          }, {\n            key: \"onVolumeChange\",\n            value: function onVolumeChange() {\n              var volume = this.player.volume();\n\n              if (this.player.muted()) {\n                volume = 0;\n              }\n\n              this.surfer.setVolume(volume);\n            }\n          }, {\n            key: \"onScreenChange\",\n            value: function onScreenChange() {\n              var _this7 = this;\n\n              var fullscreenDelay = this.player.setInterval(function () {\n                var isFullscreen = _this7.player.isFullscreen();\n\n                var newWidth, newHeight;\n\n                if (!isFullscreen) {\n                  newWidth = _this7.originalWidth;\n                  newHeight = _this7.originalHeight;\n                }\n\n                if (_this7.waveReady) {\n                  if (_this7.liveMode && !_this7.surfer.microphone.active) {\n                    return;\n                  }\n\n                  _this7.redrawWaveform(newWidth, newHeight);\n                }\n\n                _this7.player.clearInterval(fullscreenDelay);\n              }, 100);\n            }\n          }, {\n            key: \"redrawWaveform\",\n            value: function redrawWaveform(newWidth, newHeight) {\n              if (!this.isDestroyed()) {\n                if (this.player.el_) {\n                  var rect = this.player.el_.getBoundingClientRect();\n\n                  if (newWidth === undefined) {\n                    newWidth = rect.width;\n                  }\n\n                  if (newHeight === undefined) {\n                    newHeight = rect.height;\n                  }\n                }\n\n                this.surfer.drawer.destroy();\n                this.surfer.params.width = newWidth;\n                this.surfer.params.height = newHeight - this.player.controlBar.height();\n                this.surfer.createDrawer();\n                this.surfer.drawer.wrapper.className = wavesurferClassName;\n                this.surfer.drawBuffer();\n                this.surfer.drawer.progress(this.surfer.backend.getPlayedPercents());\n              }\n            }\n          }, {\n            key: \"log\",\n            value: function log(args, logType) {\n              (0, _log2.default)(args, logType, this.debug);\n            }\n          }, {\n            key: \"setFormatTime\",\n            value: function setFormatTime(customImplementation) {\n              this._formatTime = customImplementation;\n\n              _video.default.setFormatTime(this._formatTime);\n            }\n          }]);\n\n          return Wavesurfer;\n        }(Plugin);\n\n        exports.Wavesurfer = Wavesurfer;\n        Wavesurfer.VERSION = \"3.8.0\";\n        _video.default.Wavesurfer = Wavesurfer;\n\n        if (_video.default.getPlugin(wavesurferPluginName) === undefined) {\n          _video.default.registerPlugin(wavesurferPluginName, Wavesurfer);\n        }\n\n        _video.default.use('*', function (player) {\n          _middleware.default.player = player;\n          return _middleware.default;\n        });\n      })();\n      /******/\n\n\n      return __webpack_exports__;\n      /******/\n    }()\n  );\n});","map":null,"metadata":{},"sourceType":"module"}