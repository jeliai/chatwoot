{"ast":null,"code":"import { pickPrefix } from './pickPrefix';\nexport function queryString(analytics, query) {\n  var a = document.createElement('a');\n  a.href = query;\n  var parsed = a.search.slice(1);\n  var params = parsed.split('&').reduce(function (acc, str) {\n    var _a = str.split('='),\n        k = _a[0],\n        v = _a[1];\n\n    acc[k] = decodeURI(v).replace('+', ' ');\n    return acc;\n  }, {});\n  var calls = [];\n  /* eslint-disable @typescript-eslint/camelcase */\n\n  var ajs_uid = params.ajs_uid,\n      ajs_event = params.ajs_event,\n      ajs_aid = params.ajs_aid;\n\n  if (ajs_uid) {\n    var uid = Array.isArray(params.ajs_uid) ? params.ajs_uid[0] : params.ajs_uid;\n    var traits = pickPrefix('ajs_trait_', params);\n    calls.push(analytics.identify(uid, traits));\n  }\n\n  if (ajs_event) {\n    var event_1 = Array.isArray(params.ajs_event) ? params.ajs_event[0] : params.ajs_event;\n    var props = pickPrefix('ajs_prop_', params);\n    calls.push(analytics.track(event_1, props));\n  }\n\n  if (ajs_aid) {\n    var anonId = Array.isArray(params.ajs_aid) ? params.ajs_aid[0] : params.ajs_aid;\n    analytics.setAnonymousId(anonId);\n  }\n  /* eslint-enable @typescript-eslint/camelcase */\n\n\n  return Promise.all(calls);\n}","map":null,"metadata":{},"sourceType":"module"}