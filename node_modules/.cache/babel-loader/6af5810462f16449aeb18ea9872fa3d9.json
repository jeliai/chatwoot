{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport alertMixin from 'shared/mixins/alertMixin';\nimport { required } from 'vuelidate/lib/validators';\nimport MergeContactSummary from 'dashboard/modules/contact/components/MergeContactSummary';\nimport ContactDropdownItem from './ContactDropdownItem';\nexport default {\n  components: {\n    MergeContactSummary: MergeContactSummary,\n    ContactDropdownItem: ContactDropdownItem\n  },\n  mixins: [alertMixin],\n  props: {\n    primaryContact: {\n      type: Object,\n      required: true\n    },\n    isSearching: {\n      type: Boolean,\n      default: false\n    },\n    isMerging: {\n      type: Boolean,\n      default: false\n    },\n    searchResults: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  validations: {\n    primaryContact: {\n      required: required\n    },\n    childContact: {\n      required: required\n    }\n  },\n  data: function data() {\n    return {\n      childContact: undefined\n    };\n  },\n  computed: {\n    childContactName: function childContactName() {\n      return this.childContact ? this.childContact.name : '';\n    }\n  },\n  methods: {\n    searchChange: function searchChange(query) {\n      this.$emit('search', query);\n    },\n    onSubmit: function onSubmit() {\n      this.$v.$touch();\n\n      if (this.$v.$invalid) {\n        return;\n      }\n\n      this.$emit('submit', this.childContact.id);\n    },\n    onCancel: function onCancel() {\n      this.$emit('cancel');\n    }\n  }\n};","map":{"version":3,"sources":["MergeContact.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6GA,OAAA,UAAA,MAAA,0BAAA;AACA,SAAA,QAAA,QAAA,0BAAA;AAEA,OAAA,mBAAA,MAAA,0DAAA;AACA,OAAA,mBAAA,MAAA,uBAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AAAA,IAAA,mBAAA,EAAA,mBAAA;AAAA,IAAA,mBAAA,EAAA;AAAA,GADA;AAEA,EAAA,MAAA,EAAA,CAAA,UAAA,CAFA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,cAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KADA;AAKA,IAAA,WAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KALA;AASA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KATA;AAaA,IAAA,aAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA;AAAA,eAAA,EAAA;AAAA;AAFA;AAbA,GAHA;AAqBA,EAAA,WAAA,EAAA;AACA,IAAA,cAAA,EAAA;AACA,MAAA,QAAA,EAAA;AADA,KADA;AAIA,IAAA,YAAA,EAAA;AACA,MAAA,QAAA,EAAA;AADA;AAJA,GArBA;AA6BA,EAAA,IA7BA,kBA6BA;AACA,WAAA;AACA,MAAA,YAAA,EAAA;AADA,KAAA;AAGA,GAjCA;AAmCA,EAAA,QAAA,EAAA;AACA,IAAA,gBADA,8BACA;AACA,aAAA,KAAA,YAAA,GAAA,KAAA,YAAA,CAAA,IAAA,GAAA,EAAA;AACA;AAHA,GAnCA;AAwCA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,KADA,EACA;AACA,WAAA,KAAA,CAAA,QAAA,EAAA,KAAA;AACA,KAHA;AAIA,IAAA,QAJA,sBAIA;AACA,WAAA,EAAA,CAAA,MAAA;;AACA,UAAA,KAAA,EAAA,CAAA,QAAA,EAAA;AACA;AACA;;AACA,WAAA,KAAA,CAAA,QAAA,EAAA,KAAA,YAAA,CAAA,EAAA;AACA,KAVA;AAWA,IAAA,QAXA,sBAWA;AACA,WAAA,KAAA,CAAA,QAAA;AACA;AAbA;AAxCA,CAAA","sourcesContent":["<template>\n  <form @submit.prevent=\"onSubmit\">\n    <div class=\"merge-contacts\">\n      <div class=\"multiselect-wrap--medium\">\n        <label class=\"multiselect__label\">\n          {{ $t('MERGE_CONTACTS.PRIMARY.TITLE') }}\n          <woot-label\n            :title=\"$t('MERGE_CONTACTS.PRIMARY.HELP_LABEL')\"\n            color-scheme=\"success\"\n            small\n            class=\"label--merge-warning\"\n          />\n        </label>\n        <multiselect\n          :value=\"primaryContact\"\n          disabled\n          :options=\"[]\"\n          :show-labels=\"false\"\n          label=\"name\"\n          track-by=\"id\"\n        >\n          <template slot=\"singleLabel\" slot-scope=\"props\">\n            <contact-dropdown-item\n              :thumbnail=\"props.option.thumbnail\"\n              :name=\"props.option.name\"\n              :identifier=\"props.option.id\"\n              :email=\"props.option.email\"\n              :phone-number=\"props.option.phoneNumber\"\n            />\n          </template>\n        </multiselect>\n      </div>\n\n      <div class=\"child-contact-wrap\">\n        <div class=\"child-arrow\">\n          <fluent-icon icon=\"arrow-up\" class=\"up\" size=\"17\" />\n        </div>\n        <div\n          class=\"child-contact multiselect-wrap--medium\"\n          :class=\"{ error: $v.childContact.$error }\"\n        >\n          <label class=\"multiselect__label\">\n            {{ $t('MERGE_CONTACTS.CHILD.TITLE')\n            }}<woot-label\n              :title=\"$t('MERGE_CONTACTS.CHILD.HELP_LABEL')\"\n              color-scheme=\"alert\"\n              small\n              class=\"label--merge-warning\"\n            />\n          </label>\n          <multiselect\n            v-model=\"childContact\"\n            :options=\"searchResults\"\n            label=\"name\"\n            track-by=\"id\"\n            :internal-search=\"false\"\n            :clear-on-select=\"false\"\n            :show-labels=\"false\"\n            :placeholder=\"$t('MERGE_CONTACTS.CHILD.PLACEHOLDER')\"\n            :allow-empty=\"true\"\n            :loading=\"isSearching\"\n            :max-height=\"150\"\n            open-direction=\"top\"\n            @search-change=\"searchChange\"\n          >\n            <template slot=\"singleLabel\" slot-scope=\"props\">\n              <contact-dropdown-item\n                :thumbnail=\"props.option.thumbnail\"\n                :identifier=\"props.option.id\"\n                :name=\"props.option.name\"\n                :email=\"props.option.email\"\n                :phone-number=\"props.option.phone_number\"\n              />\n            </template>\n            <template slot=\"option\" slot-scope=\"props\">\n              <contact-dropdown-item\n                :thumbnail=\"props.option.thumbnail\"\n                :identifier=\"props.option.id\"\n                :name=\"props.option.name\"\n                :email=\"props.option.email\"\n                :phone-number=\"props.option.phone_number\"\n              />\n            </template>\n            <span slot=\"noResult\">\n              {{ $t('AGENT_MGMT.SEARCH.NO_RESULTS') }}\n            </span>\n          </multiselect>\n          <span v-if=\"$v.childContact.$error\" class=\"message\">\n            {{ $t('MERGE_CONTACTS.FORM.CHILD_CONTACT.ERROR') }}\n          </span>\n        </div>\n      </div>\n    </div>\n    <merge-contact-summary\n      :primary-contact-name=\"primaryContact.name\"\n      :child-contact-name=\"childContactName\"\n    />\n    <div class=\"footer\">\n      <woot-button variant=\"clear\" @click.prevent=\"onCancel\">\n        {{ $t('MERGE_CONTACTS.FORM.CANCEL') }}\n      </woot-button>\n      <woot-button type=\"submit\" :is-loading=\"isMerging\">\n        {{ $t('MERGE_CONTACTS.FORM.SUBMIT') }}\n      </woot-button>\n    </div>\n  </form>\n</template>\n\n<script>\nimport alertMixin from 'shared/mixins/alertMixin';\nimport { required } from 'vuelidate/lib/validators';\n\nimport MergeContactSummary from 'dashboard/modules/contact/components/MergeContactSummary';\nimport ContactDropdownItem from './ContactDropdownItem';\n\nexport default {\n  components: { MergeContactSummary, ContactDropdownItem },\n  mixins: [alertMixin],\n  props: {\n    primaryContact: {\n      type: Object,\n      required: true,\n    },\n    isSearching: {\n      type: Boolean,\n      default: false,\n    },\n    isMerging: {\n      type: Boolean,\n      default: false,\n    },\n    searchResults: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  validations: {\n    primaryContact: {\n      required,\n    },\n    childContact: {\n      required,\n    },\n  },\n  data() {\n    return {\n      childContact: undefined,\n    };\n  },\n\n  computed: {\n    childContactName() {\n      return this.childContact ? this.childContact.name : '';\n    },\n  },\n  methods: {\n    searchChange(query) {\n      this.$emit('search', query);\n    },\n    onSubmit() {\n      this.$v.$touch();\n      if (this.$v.$invalid) {\n        return;\n      }\n      this.$emit('submit', this.childContact.id);\n    },\n    onCancel() {\n      this.$emit('cancel');\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.child-contact-wrap {\n  display: flex;\n  width: 100%;\n}\n.child-contact {\n  flex: 1 0 0;\n  min-width: 0;\n}\n.child-arrow {\n  width: var(--space-larger);\n  position: relative;\n  font-size: var(--font-size-default);\n  color: var(--color-border-dark);\n}\n.multiselect {\n  margin-bottom: var(--space-small);\n}\n.child-contact {\n  margin-top: var(--space-smaller);\n}\n.child-arrow::after {\n  content: '';\n  height: var(--space-larger);\n  width: 0;\n  left: var(--space-two);\n  position: absolute;\n  border-left: 1px solid var(--color-border-dark);\n}\n\n.child-arrow::before {\n  content: '';\n  height: 0;\n  width: var(--space-normal);\n  left: var(--space-two);\n  top: var(--space-larger);\n  position: absolute;\n  border-bottom: 1px solid var(--color-border-dark);\n}\n\n.up {\n  position: absolute;\n  top: var(--space-minus-smaller);\n  left: var(--space-slab);\n}\n\n.footer {\n  margin-top: var(--space-medium);\n  display: flex;\n  justify-content: flex-end;\n}\n\n/* TDOD: Clean errors in forms style */\n.error .message {\n  margin-top: 0;\n}\n\n.label--merge-warning {\n  margin-left: var(--space-small);\n}\n</style>\n"],"sourceRoot":"app/javascript/dashboard/modules/contact/components"},"metadata":{},"sourceType":"module"}