{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.find.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { VeTable, VePagination } from 'vue-easytable';\nimport Spinner from 'shared/components/Spinner.vue';\nimport EmptyState from 'dashboard/components/widgets/EmptyState.vue';\nimport Thumbnail from 'dashboard/components/widgets/Thumbnail.vue';\nexport default {\n  name: 'AgentTable',\n  components: {\n    EmptyState: EmptyState,\n    Spinner: Spinner,\n    VeTable: VeTable,\n    VePagination: VePagination\n  },\n  props: {\n    agents: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    agentMetrics: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    },\n    pageIndex: {\n      type: Number,\n      default: 1\n    }\n  },\n  computed: {\n    tableData: function tableData() {\n      var _this = this;\n\n      return this.agentMetrics.map(function (agent) {\n        var agentInformation = _this.getAgentInformation(agent.id);\n\n        return {\n          agent: agentInformation.name,\n          email: agentInformation.email,\n          thumbnail: agentInformation.thumbnail,\n          open: agent.metric.open || 0,\n          unattended: agent.metric.unattended || 0,\n          status: agentInformation.availability_status\n        };\n      });\n    },\n    columns: function columns() {\n      var h = this.$createElement;\n      return [{\n        field: 'agent',\n        key: 'agent',\n        title: this.$t('OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.AGENT'),\n        fixed: 'left',\n        align: 'left',\n        width: 25,\n        renderBodyCell: function renderBodyCell(_ref) {\n          var row = _ref.row;\n          return h(\"div\", {\n            \"class\": \"row-user-block\"\n          }, [h(Thumbnail, {\n            attrs: {\n              src: row.thumbnail,\n              size: \"32px\",\n              username: row.agent,\n              status: row.status\n            }\n          }), h(\"div\", {\n            \"class\": \"user-block\"\n          }, [h(\"h6\", {\n            \"class\": \"title text-truncate\"\n          }, [row.agent]), h(\"span\", {\n            \"class\": \"sub-title\"\n          }, [row.email])])]);\n        }\n      }, {\n        field: 'open',\n        key: 'open',\n        title: this.$t('OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.OPEN'),\n        align: 'left',\n        width: 10\n      }, {\n        field: 'unattended',\n        key: 'unattended',\n        title: this.$t('OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.UNATTENDED'),\n        align: 'left',\n        width: 10\n      }];\n    }\n  },\n  methods: {\n    onPageNumberChange: function onPageNumberChange(pageIndex) {\n      this.$emit('page-change', pageIndex);\n    },\n    getAgentInformation: function getAgentInformation(id) {\n      return this.agents.find(function (agent) {\n        return agent.id === Number(id);\n      });\n    }\n  }\n};","map":{"version":3,"sources":["AgentTable.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"agent-table-container\">\n    <ve-table\n      max-height=\"calc(100vh - 35rem)\"\n      :fixed-header=\"true\"\n      :columns=\"columns\"\n      :table-data=\"tableData\"\n    />\n    <div v-if=\"isLoading\" class=\"agents-loader\">\n      <spinner />\n      <span>{{\n        $t('OVERVIEW_REPORTS.AGENT_CONVERSATIONS.LOADING_MESSAGE')\n      }}</span>\n    </div>\n    <empty-state\n      v-else-if=\"!isLoading && !agentMetrics.length\"\n      :title=\"$t('OVERVIEW_REPORTS.AGENT_CONVERSATIONS.NO_AGENTS')\"\n    />\n    <div v-if=\"agentMetrics.length > 0\" class=\"table-pagination\">\n      <ve-pagination\n        :total=\"agents.length\"\n        :page-index=\"pageIndex\"\n        :page-size=\"25\"\n        :page-size-option=\"[25]\"\n        @on-page-number-change=\"onPageNumberChange\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { VeTable, VePagination } from 'vue-easytable';\nimport Spinner from 'shared/components/Spinner.vue';\nimport EmptyState from 'dashboard/components/widgets/EmptyState.vue';\nimport Thumbnail from 'dashboard/components/widgets/Thumbnail.vue';\n\nexport default {\n  name: 'AgentTable',\n  components: {\n    EmptyState,\n    Spinner,\n    VeTable,\n    VePagination,\n  },\n  props: {\n    agents: {\n      type: Array,\n      default: () => [],\n    },\n    agentMetrics: {\n      type: Array,\n      default: () => [],\n    },\n    isLoading: {\n      type: Boolean,\n      default: false,\n    },\n    pageIndex: {\n      type: Number,\n      default: 1,\n    },\n  },\n  computed: {\n    tableData() {\n      return this.agentMetrics.map(agent => {\n        const agentInformation = this.getAgentInformation(agent.id);\n        return {\n          agent: agentInformation.name,\n          email: agentInformation.email,\n          thumbnail: agentInformation.thumbnail,\n          open: agent.metric.open || 0,\n          unattended: agent.metric.unattended || 0,\n          status: agentInformation.availability_status,\n        };\n      });\n    },\n    columns() {\n      return [\n        {\n          field: 'agent',\n          key: 'agent',\n          title: this.$t(\n            'OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.AGENT'\n          ),\n          fixed: 'left',\n          align: 'left',\n          width: 25,\n          renderBodyCell: ({ row }) => (\n            <div class=\"row-user-block\">\n              <Thumbnail\n                src={row.thumbnail}\n                size=\"32px\"\n                username={row.agent}\n                status={row.status}\n              />\n              <div class=\"user-block\">\n                <h6 class=\"title text-truncate\">{row.agent}</h6>\n                <span class=\"sub-title\">{row.email}</span>\n              </div>\n            </div>\n          ),\n        },\n        {\n          field: 'open',\n          key: 'open',\n          title: this.$t(\n            'OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.OPEN'\n          ),\n          align: 'left',\n          width: 10,\n        },\n        {\n          field: 'unattended',\n          key: 'unattended',\n          title: this.$t(\n            'OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.UNATTENDED'\n          ),\n          align: 'left',\n          width: 10,\n        },\n      ];\n    },\n  },\n  methods: {\n    onPageNumberChange(pageIndex) {\n      this.$emit('page-change', pageIndex);\n    },\n    getAgentInformation(id) {\n      return this.agents.find(agent => agent.id === Number(id));\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.agent-table-container {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n\n  .ve-table {\n    &::v-deep {\n      th.ve-table-header-th {\n        font-size: var(--font-size-mini) !important;\n        padding: var(--space-small) var(--space-two) !important;\n      }\n\n      td.ve-table-body-td {\n        padding: var(--space-one) var(--space-two) !important;\n      }\n    }\n  }\n\n  &::v-deep .ve-pagination {\n    background-color: transparent;\n  }\n\n  &::v-deep .ve-pagination-select {\n    display: none;\n  }\n\n  .row-user-block {\n    align-items: center;\n    display: flex;\n    text-align: left;\n\n    .user-block {\n      display: flex;\n      flex-direction: column;\n      min-width: 0;\n      .title {\n        font-size: var(--font-size-small);\n        margin: var(--zero);\n        line-height: 1;\n      }\n      .sub-title {\n        font-size: var(--font-size-mini);\n      }\n    }\n\n    .user-thumbnail-box {\n      margin-right: var(--space-small);\n    }\n  }\n\n  .table-pagination {\n    margin-top: var(--space-normal);\n    text-align: right;\n  }\n}\n\n.agents-loader {\n  align-items: center;\n  display: flex;\n  font-size: var(--font-size-default);\n  justify-content: center;\n  padding: var(--space-large);\n}\n</style>\n"],"sourceRoot":"app/javascript/dashboard/routes/dashboard/settings/reports/components/overview"},"metadata":{},"sourceType":"module"}