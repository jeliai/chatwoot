{"ast":null,"code":"import \"regenerator-runtime/runtime.js\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport alertMixin from 'shared/mixins/alertMixin';\nimport { required, minLength } from 'vuelidate/lib/validators';\nimport { convertToCategorySlug } from 'dashboard/helper/commons.js';\nexport default {\n  mixins: [alertMixin],\n  props: {\n    show: {\n      type: Boolean,\n      default: true\n    },\n    portalName: {\n      type: String,\n      default: ''\n    },\n    locale: {\n      type: String,\n      default: ''\n    },\n    category: {\n      type: Object,\n      default: function _default() {}\n    },\n    selectedPortalSlug: {\n      type: String,\n      default: ''\n    }\n  },\n  data: function data() {\n    return {\n      id: this.category.id,\n      name: '',\n      slug: '',\n      description: ''\n    };\n  },\n  validations: {\n    name: {\n      required: required,\n      minLength: minLength(2)\n    },\n    slug: {\n      required: required\n    }\n  },\n  computed: {\n    nameError: function nameError() {\n      if (this.$v.name.$error) {\n        return this.$t('HELP_CENTER.CATEGORY.ADD.NAME.ERROR');\n      }\n\n      return '';\n    },\n    slugError: function slugError() {\n      if (this.$v.slug.$error) {\n        return this.$t('HELP_CENTER.CATEGORY.ADD.SLUG.ERROR');\n      }\n\n      return '';\n    }\n  },\n  mounted: function mounted() {\n    this.updateDataFromStore();\n  },\n  methods: {\n    updateDataFromStore: function updateDataFromStore() {\n      var category = this.category;\n      this.name = category.name;\n      this.slug = category.slug;\n      this.description = category.description;\n    },\n    onNameChange: function onNameChange() {\n      this.slug = convertToCategorySlug(this.name);\n    },\n    onUpdate: function onUpdate() {\n      this.$emit('update');\n    },\n    onClose: function onClose() {\n      this.$emit('cancel');\n    },\n    editCategory: function editCategory() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var id, name, slug, description, data, errorMessage;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                id = _this.id, name = _this.name, slug = _this.slug, description = _this.description;\n                data = {\n                  id: id,\n                  name: name,\n                  slug: slug,\n                  description: description\n                };\n\n                _this.$v.$touch();\n\n                if (!_this.$v.$invalid) {\n                  _context.next = 5;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 5:\n                _context.prev = 5;\n                _context.next = 8;\n                return _this.$store.dispatch('categories/update', {\n                  portalSlug: _this.selectedPortalSlug,\n                  categoryId: id,\n                  categoryObj: data\n                });\n\n              case 8:\n                _this.alertMessage = _this.$t('HELP_CENTER.CATEGORY.EDIT.API.SUCCESS_MESSAGE');\n\n                _this.onClose();\n\n                _context.next = 16;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](5);\n                errorMessage = _context.t0 === null || _context.t0 === void 0 ? void 0 : _context.t0.message;\n                _this.alertMessage = errorMessage || _this.$t('HELP_CENTER.CATEGORY.EDIT.API.ERROR_MESSAGE');\n\n              case 16:\n                _context.prev = 16;\n\n                _this.showAlert(_this.alertMessage);\n\n                return _context.finish(16);\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[5, 12, 16, 19]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"sources":["EditCategory.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <woot-modal :show.sync=\"show\" :on-close=\"onClose\">\n    <woot-modal-header\n      :header-title=\"$t('HELP_CENTER.CATEGORY.EDIT.TITLE')\"\n      :header-content=\"$t('HELP_CENTER.CATEGORY.EDIT.SUB_TITLE')\"\n    />\n    <form class=\"row\" @submit.prevent=\"onUpdate\">\n      <div class=\"medium-12 columns\">\n        <div class=\"row article-info\">\n          <div class=\"columns medium-6\">\n            <label>\n              <span>{{ $t('HELP_CENTER.CATEGORY.EDIT.PORTAL') }}</span>\n              <p class=\"value\">{{ portalName }}</p>\n            </label>\n          </div>\n          <div class=\"columns medium-6\">\n            <label>\n              <span>{{ $t('HELP_CENTER.CATEGORY.EDIT.LOCALE') }}</span>\n              <p class=\"value\">{{ locale }}</p>\n            </label>\n          </div>\n        </div>\n        <woot-input\n          v-model.trim=\"name\"\n          :class=\"{ error: $v.name.$error }\"\n          class=\"medium-12 columns\"\n          :error=\"nameError\"\n          :label=\"$t('HELP_CENTER.CATEGORY.EDIT.NAME.LABEL')\"\n          :placeholder=\"$t('HELP_CENTER.CATEGORY.EDIT.NAME.PLACEHOLDER')\"\n          :help-text=\"$t('HELP_CENTER.CATEGORY.EDIT.NAME.HELP_TEXT')\"\n          @input=\"onNameChange\"\n        />\n        <woot-input\n          v-model.trim=\"slug\"\n          :class=\"{ error: $v.slug.$error }\"\n          class=\"medium-12 columns\"\n          :error=\"slugError\"\n          :label=\"$t('HELP_CENTER.CATEGORY.EDIT.SLUG.LABEL')\"\n          :placeholder=\"$t('HELP_CENTER.CATEGORY.EDIT.SLUG.PLACEHOLDER')\"\n          :help-text=\"$t('HELP_CENTER.CATEGORY.EDIT.SLUG.HELP_TEXT')\"\n          @input=\"$v.slug.$touch\"\n        />\n        <label>\n          {{ $t('HELP_CENTER.CATEGORY.EDIT.DESCRIPTION.LABEL') }}\n          <textarea\n            v-model=\"description\"\n            rows=\"3\"\n            type=\"text\"\n            :placeholder=\"\n              $t('HELP_CENTER.CATEGORY.EDIT.DESCRIPTION.PLACEHOLDER')\n            \"\n          />\n        </label>\n        <div class=\"medium-12 columns\">\n          <div class=\"modal-footer justify-content-end w-full\">\n            <woot-button class=\"button clear\" @click.prevent=\"onClose\">\n              {{ $t('HELP_CENTER.CATEGORY.EDIT.BUTTONS.CANCEL') }}\n            </woot-button>\n            <woot-button @click=\"editCategory\">\n              {{ $t('HELP_CENTER.CATEGORY.EDIT.BUTTONS.CREATE') }}\n            </woot-button>\n          </div>\n        </div>\n      </div>\n    </form>\n  </woot-modal>\n</template>\n\n<script>\nimport alertMixin from 'shared/mixins/alertMixin';\nimport { required, minLength } from 'vuelidate/lib/validators';\nimport { convertToCategorySlug } from 'dashboard/helper/commons.js';\n\nexport default {\n  mixins: [alertMixin],\n  props: {\n    show: {\n      type: Boolean,\n      default: true,\n    },\n    portalName: {\n      type: String,\n      default: '',\n    },\n    locale: {\n      type: String,\n      default: '',\n    },\n    category: {\n      type: Object,\n      default: () => {},\n    },\n    selectedPortalSlug: {\n      type: String,\n      default: '',\n    },\n  },\n  data() {\n    return {\n      id: this.category.id,\n      name: '',\n      slug: '',\n      description: '',\n    };\n  },\n  validations: {\n    name: {\n      required,\n      minLength: minLength(2),\n    },\n    slug: {\n      required,\n    },\n  },\n  computed: {\n    nameError() {\n      if (this.$v.name.$error) {\n        return this.$t('HELP_CENTER.CATEGORY.ADD.NAME.ERROR');\n      }\n      return '';\n    },\n    slugError() {\n      if (this.$v.slug.$error) {\n        return this.$t('HELP_CENTER.CATEGORY.ADD.SLUG.ERROR');\n      }\n      return '';\n    },\n  },\n  mounted() {\n    this.updateDataFromStore();\n  },\n  methods: {\n    updateDataFromStore() {\n      const { category } = this;\n      this.name = category.name;\n      this.slug = category.slug;\n      this.description = category.description;\n    },\n    onNameChange() {\n      this.slug = convertToCategorySlug(this.name);\n    },\n    onUpdate() {\n      this.$emit('update');\n    },\n    onClose() {\n      this.$emit('cancel');\n    },\n    async editCategory() {\n      const { id, name, slug, description } = this;\n      const data = {\n        id,\n        name,\n        slug,\n        description,\n      };\n      this.$v.$touch();\n      if (this.$v.$invalid) {\n        return;\n      }\n      try {\n        await this.$store.dispatch('categories/update', {\n          portalSlug: this.selectedPortalSlug,\n          categoryId: id,\n          categoryObj: data,\n        });\n        this.alertMessage = this.$t(\n          'HELP_CENTER.CATEGORY.EDIT.API.SUCCESS_MESSAGE'\n        );\n        this.onClose();\n      } catch (error) {\n        const errorMessage = error?.message;\n        this.alertMessage =\n          errorMessage ||\n          this.$t('HELP_CENTER.CATEGORY.EDIT.API.ERROR_MESSAGE');\n      } finally {\n        this.showAlert(this.alertMessage);\n      }\n    },\n  },\n};\n</script>\n<style scoped lang=\"scss\">\n.article-info {\n  width: 100%;\n  margin: 0 0 var(--space-normal);\n  .value {\n    color: var(--s-600);\n  }\n}\n\n.input-container::v-deep {\n  margin: 0 0 var(--space-normal);\n\n  input {\n    margin-bottom: 0;\n  }\n}\n</style>\n"],"sourceRoot":"app/javascript/dashboard/routes/dashboard/helpcenter/pages/categories"},"metadata":{},"sourceType":"module"}