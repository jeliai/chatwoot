{"ast":null,"code":"function _typeof2(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\n/*!\n * opus-recorder plugin for videojs-record\n * @version 4.5.0\n * @see https://github.com/collab-project/videojs-record\n * @copyright 2014-2021 Collab\n * @license MIT\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n  if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof2(exports)) === 'object' && (typeof module === \"undefined\" ? \"undefined\" : _typeof2(module)) === 'object') module.exports = factory(require(\"video.js\"));else if (typeof define === 'function' && define.amd) define(\"VideojsRecord\", [\"video.js\"], factory);else if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof2(exports)) === 'object') exports[\"VideojsRecord\"] = factory(require(\"video.js\"));else root[\"VideojsRecord\"] = root[\"VideojsRecord\"] || {}, root[\"VideojsRecord\"][\"opus-recorder\"] = factory(root[\"videojs\"]);\n})(self, function (__WEBPACK_EXTERNAL_MODULE_video_js__) {\n  return (\n    /******/\n    function () {\n      // webpackBootstrap\n\n      /******/\n      var __webpack_modules__ = {\n        /***/\n        \"./node_modules/@babel/runtime/helpers/assertThisInitialized.js\":\n        /*!**********************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/assertThisInitialized.js ***!\n          \\**********************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersAssertThisInitializedJs(module) {\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n\n            return self;\n          }\n\n          module.exports = _assertThisInitialized;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/classCallCheck.js\":\n        /*!***************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/classCallCheck.js ***!\n          \\***************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersClassCallCheckJs(module) {\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          module.exports = _classCallCheck;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/createClass.js\":\n        /*!************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/createClass.js ***!\n          \\************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersCreateClassJs(module) {\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n\n          module.exports = _createClass;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\":\n        /*!***************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/getPrototypeOf.js ***!\n          \\***************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersGetPrototypeOfJs(module) {\n          function _getPrototypeOf(o) {\n            module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          }\n\n          module.exports = _getPrototypeOf;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/inherits.js\":\n        /*!*********************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/inherits.js ***!\n          \\*********************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersInheritsJs(module, __unused_webpack_exports, __webpack_require__) {\n          var setPrototypeOf = __webpack_require__(\n          /*! ./setPrototypeOf */\n          \"./node_modules/@babel/runtime/helpers/setPrototypeOf.js\");\n\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            if (superClass) setPrototypeOf(subClass, superClass);\n          }\n\n          module.exports = _inherits;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\":\n        /*!**********************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/interopRequireDefault.js ***!\n          \\**********************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersInteropRequireDefaultJs(module) {\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              \"default\": obj\n            };\n          }\n\n          module.exports = _interopRequireDefault;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\":\n        /*!**************************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js ***!\n          \\**************************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersPossibleConstructorReturnJs(module, __unused_webpack_exports, __webpack_require__) {\n          var _typeof = __webpack_require__(\n          /*! ../helpers/typeof */\n          \"./node_modules/@babel/runtime/helpers/typeof.js\");\n\n          var assertThisInitialized = __webpack_require__(\n          /*! ./assertThisInitialized */\n          \"./node_modules/@babel/runtime/helpers/assertThisInitialized.js\");\n\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            }\n\n            return assertThisInitialized(self);\n          }\n\n          module.exports = _possibleConstructorReturn;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/setPrototypeOf.js\":\n        /*!***************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/setPrototypeOf.js ***!\n          \\***************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersSetPrototypeOfJs(module) {\n          function _setPrototypeOf(o, p) {\n            module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n\n            return _setPrototypeOf(o, p);\n          }\n\n          module.exports = _setPrototypeOf;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/typeof.js\":\n        /*!*******************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/typeof.js ***!\n          \\*******************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersTypeofJs(module) {\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n              module.exports = _typeof = function _typeof(obj) {\n                return typeof obj;\n              };\n            } else {\n              module.exports = _typeof = function _typeof(obj) {\n                return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n              };\n            }\n\n            return _typeof(obj);\n          }\n\n          module.exports = _typeof;\n          /***/\n        },\n\n        /***/\n        \"./src/js/plugins/opus-recorder-plugin.js\":\n        /*!************************************************!*\\\n          !*** ./src/js/plugins/opus-recorder-plugin.js ***!\n          \\************************************************/\n\n        /***/\n        function srcJsPluginsOpusRecorderPluginJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          var _interopRequireDefault = __webpack_require__(\n          /*! @babel/runtime/helpers/interopRequireDefault */\n          \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _classCallCheck2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/classCallCheck */\n          \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\n          var _createClass2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/createClass */\n          \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\n          var _inherits2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/inherits */\n          \"./node_modules/@babel/runtime/helpers/inherits.js\"));\n\n          var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/possibleConstructorReturn */\n          \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\"));\n\n          var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/getPrototypeOf */\n          \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\"));\n\n          var _video = _interopRequireDefault(__webpack_require__(\n          /*! video.js */\n          \"video.js\"));\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = (0, _getPrototypeOf2.default)(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return (0, _possibleConstructorReturn2.default)(this, result);\n            };\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          var RecordEngine = _video.default.getComponent('RecordEngine');\n\n          var OpusRecorderEngine = function (_RecordEngine) {\n            (0, _inherits2.default)(OpusRecorderEngine, _RecordEngine);\n\n            var _super = _createSuper(OpusRecorderEngine);\n\n            function OpusRecorderEngine(player, options) {\n              var _this;\n\n              (0, _classCallCheck2.default)(this, OpusRecorderEngine);\n              _this = _super.call(this, player, options);\n              _this.debug = false;\n              _this.audioChannels = 1;\n              _this.bufferSize = 4096;\n              _this.sampleRate = 48000;\n              _this.audioWorkerURL = 'encoderWorker.min.js';\n              _this.audioType = 'audio/ogg';\n              _this.pluginLibraryOptions = {};\n              return _this;\n            }\n\n            (0, _createClass2.default)(OpusRecorderEngine, [{\n              key: \"setup\",\n              value: function setup(stream, mediaType, debug) {\n                this.inputStream = stream;\n                this.mediaType = mediaType;\n                this.debug = debug;\n                var AudioContext = window.AudioContext || window.webkitAudioContext;\n                this.audioContext = new AudioContext();\n                this.audioSourceNode = this.audioContext.createMediaStreamSource(this.inputStream);\n                this.config = {\n                  numberOfChannels: this.audioChannels,\n                  bufferLength: this.bufferSize,\n                  encoderSampleRate: this.sampleRate,\n                  encoderPath: this.audioWorkerURL,\n                  sourceNode: this.audioSourceNode\n                };\n                this.config = Object.assign(this.config, this.pluginLibraryOptions);\n                this.engine = new Recorder(this.config);\n                this.engine.ondataavailable = this.onRecordingAvailable.bind(this);\n              }\n            }, {\n              key: \"start\",\n              value: function start() {\n                var _this2 = this;\n\n                this.engine.start().then(function () {}).catch(function (err) {\n                  _this2.player().trigger('error', err);\n                });\n              }\n            }, {\n              key: \"stop\",\n              value: function stop() {\n                this.engine.stop();\n              }\n            }, {\n              key: \"pause\",\n              value: function pause() {\n                this.engine.pause();\n              }\n            }, {\n              key: \"resume\",\n              value: function resume() {\n                this.engine.resume();\n              }\n            }, {\n              key: \"onRecordingAvailable\",\n              value: function onRecordingAvailable(data) {\n                var blob = new Blob([data], {\n                  type: this.audioType\n                });\n                this.onStopRecording(blob);\n              }\n            }]);\n            return OpusRecorderEngine;\n          }(RecordEngine);\n\n          _video.default.OpusRecorderEngine = OpusRecorderEngine;\n          var _default = OpusRecorderEngine;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"video.js\":\n        /*!*************************************************************************************************!*\\\n          !*** external {\"commonjs\":\"video.js\",\"commonjs2\":\"video.js\",\"amd\":\"video.js\",\"root\":\"videojs\"} ***!\n          \\*************************************************************************************************/\n\n        /***/\n        function videoJs(module) {\n          \"use strict\";\n\n          module.exports = __WEBPACK_EXTERNAL_MODULE_video_js__;\n          /***/\n        }\n        /******/\n\n      };\n      /************************************************************************/\n\n      /******/\n      // The module cache\n\n      /******/\n\n      var __webpack_module_cache__ = {};\n      /******/\n\n      /******/\n      // The require function\n\n      /******/\n\n      function __webpack_require__(moduleId) {\n        /******/\n        // Check if module is in cache\n\n        /******/\n        var cachedModule = __webpack_module_cache__[moduleId];\n        /******/\n\n        if (cachedModule !== undefined) {\n          /******/\n          return cachedModule.exports;\n          /******/\n        }\n        /******/\n        // Create a new module (and put it into the cache)\n\n        /******/\n\n\n        var module = __webpack_module_cache__[moduleId] = {\n          /******/\n          // no module.id needed\n\n          /******/\n          // no module.loaded needed\n\n          /******/\n          exports: {}\n          /******/\n\n        };\n        /******/\n\n        /******/\n        // Execute the module function\n\n        /******/\n\n        __webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n        /******/\n\n        /******/\n        // Return the exports of the module\n\n        /******/\n\n\n        return module.exports;\n        /******/\n      }\n      /******/\n\n      /************************************************************************/\n\n      /******/\n\n      /******/\n      // startup\n\n      /******/\n      // Load entry module and return exports\n\n      /******/\n      // This entry module is referenced by other modules so it can't be inlined\n\n      /******/\n\n\n      var __webpack_exports__ = __webpack_require__(\"./src/js/plugins/opus-recorder-plugin.js\");\n      /******/\n\n      /******/\n\n\n      return __webpack_exports__;\n      /******/\n    }()\n  );\n});","map":null,"metadata":{},"sourceType":"module"}