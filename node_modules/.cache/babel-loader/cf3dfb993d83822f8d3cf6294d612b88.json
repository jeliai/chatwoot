{"ast":null,"code":"import \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptors.js\";\n\nvar _mutations;\n\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport \"regenerator-runtime/runtime.js\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport * as MutationHelpers from 'shared/helpers/vuex/mutationHelpers';\nimport * as types from '../mutation-types';\nimport webHookAPI from '../../api/webhooks';\nvar state = {\n  records: [],\n  uiFlags: {\n    fetchingList: false,\n    creatingItem: false,\n    deletingItem: false,\n    updatingItem: false\n  }\n};\nexport var getters = {\n  getWebhooks: function getWebhooks(_state) {\n    return _state.records.sort(function (w1, w2) {\n      return w1.id - w2.id;\n    });\n  },\n  getUIFlags: function getUIFlags(_state) {\n    return _state.uiFlags;\n  }\n};\nexport var actions = {\n  get: function get(_ref) {\n    return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      var commit, response;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              commit = _ref.commit;\n              commit(types.default.SET_WEBHOOK_UI_FLAG, {\n                fetchingList: true\n              });\n              _context.prev = 2;\n              _context.next = 5;\n              return webHookAPI.get();\n\n            case 5:\n              response = _context.sent;\n              commit(types.default.SET_WEBHOOK, response.data.payload.webhooks);\n              commit(types.default.SET_WEBHOOK_UI_FLAG, {\n                fetchingList: false\n              });\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](2);\n              commit(types.default.SET_WEBHOOK_UI_FLAG, {\n                fetchingList: false\n              });\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 10]]);\n    }))();\n  },\n  create: function create(_ref2, params) {\n    return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n      var commit, response, webhook;\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              commit = _ref2.commit;\n              commit(types.default.SET_WEBHOOK_UI_FLAG, {\n                creatingItem: true\n              });\n              _context2.prev = 2;\n              _context2.next = 5;\n              return webHookAPI.create(params);\n\n            case 5:\n              response = _context2.sent;\n              webhook = response.data.payload.webhook;\n              commit(types.default.ADD_WEBHOOK, webhook);\n              commit(types.default.SET_WEBHOOK_UI_FLAG, {\n                creatingItem: false\n              });\n              _context2.next = 15;\n              break;\n\n            case 11:\n              _context2.prev = 11;\n              _context2.t0 = _context2[\"catch\"](2);\n              commit(types.default.SET_WEBHOOK_UI_FLAG, {\n                creatingItem: false\n              });\n              throw _context2.t0;\n\n            case 15:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[2, 11]]);\n    }))();\n  },\n  update: function () {\n    var _update = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(_ref3, _ref4) {\n      var commit, id, updateObj, response;\n      return regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              commit = _ref3.commit;\n              id = _ref4.id, updateObj = _objectWithoutProperties(_ref4, [\"id\"]);\n              commit(types.default.SET_WEBHOOK_UI_FLAG, {\n                updatingItem: true\n              });\n              _context3.prev = 3;\n              _context3.next = 6;\n              return webHookAPI.update(id, updateObj);\n\n            case 6:\n              response = _context3.sent;\n              commit(types.default.UPDATE_WEBHOOK, response.data.payload.webhook);\n              _context3.next = 13;\n              break;\n\n            case 10:\n              _context3.prev = 10;\n              _context3.t0 = _context3[\"catch\"](3);\n              throw new Error(_context3.t0);\n\n            case 13:\n              _context3.prev = 13;\n              commit(types.default.SET_WEBHOOK_UI_FLAG, {\n                updatingItem: false\n              });\n              return _context3.finish(13);\n\n            case 16:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[3, 10, 13, 16]]);\n    }));\n\n    function update(_x, _x2) {\n      return _update.apply(this, arguments);\n    }\n\n    return update;\n  }(),\n  delete: function _delete(_ref5, id) {\n    return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n      var commit;\n      return regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              commit = _ref5.commit;\n              commit(types.default.SET_WEBHOOK_UI_FLAG, {\n                deletingItem: true\n              });\n              _context4.prev = 2;\n              _context4.next = 5;\n              return webHookAPI.delete(id);\n\n            case 5:\n              commit(types.default.DELETE_WEBHOOK, id);\n              commit(types.default.SET_WEBHOOK_UI_FLAG, {\n                deletingItem: false\n              });\n              _context4.next = 13;\n              break;\n\n            case 9:\n              _context4.prev = 9;\n              _context4.t0 = _context4[\"catch\"](2);\n              commit(types.default.SET_WEBHOOK_UI_FLAG, {\n                deletingItem: false\n              });\n              throw _context4.t0;\n\n            case 13:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[2, 9]]);\n    }))();\n  }\n};\nexport var mutations = (_mutations = {}, _defineProperty(_mutations, types.default.SET_WEBHOOK_UI_FLAG, function (_state, data) {\n  _state.uiFlags = _objectSpread(_objectSpread({}, _state.uiFlags), data);\n}), _defineProperty(_mutations, types.default.SET_WEBHOOK, MutationHelpers.set), _defineProperty(_mutations, types.default.ADD_WEBHOOK, MutationHelpers.create), _defineProperty(_mutations, types.default.DELETE_WEBHOOK, MutationHelpers.destroy), _defineProperty(_mutations, types.default.UPDATE_WEBHOOK, MutationHelpers.update), _mutations);\nexport default {\n  namespaced: true,\n  state: state,\n  getters: getters,\n  actions: actions,\n  mutations: mutations\n};","map":{"version":3,"sources":["/Users/s.dastan/Desktop/chatwoot/chatwoot/app/javascript/dashboard/store/modules/webhooks.js"],"names":["MutationHelpers","types","webHookAPI","state","records","uiFlags","fetchingList","creatingItem","deletingItem","updatingItem","getters","getWebhooks","_state","sort","w1","w2","id","getUIFlags","actions","get","commit","default","SET_WEBHOOK_UI_FLAG","response","SET_WEBHOOK","data","payload","webhooks","create","params","webhook","ADD_WEBHOOK","update","updateObj","UPDATE_WEBHOOK","Error","delete","DELETE_WEBHOOK","mutations","set","destroy","namespaced"],"mappings":"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","sourcesContent":["import * as MutationHelpers from 'shared/helpers/vuex/mutationHelpers';\nimport * as types from '../mutation-types';\nimport webHookAPI from '../../api/webhooks';\n\nconst state = {\n  records: [],\n  uiFlags: {\n    fetchingList: false,\n    creatingItem: false,\n    deletingItem: false,\n    updatingItem: false,\n  },\n};\n\nexport const getters = {\n  getWebhooks(_state) {\n    return _state.records.sort((w1, w2) => w1.id - w2.id);\n  },\n  getUIFlags(_state) {\n    return _state.uiFlags;\n  },\n};\n\nexport const actions = {\n  async get({ commit }) {\n    commit(types.default.SET_WEBHOOK_UI_FLAG, { fetchingList: true });\n    try {\n      const response = await webHookAPI.get();\n      commit(types.default.SET_WEBHOOK, response.data.payload.webhooks);\n      commit(types.default.SET_WEBHOOK_UI_FLAG, { fetchingList: false });\n    } catch (error) {\n      commit(types.default.SET_WEBHOOK_UI_FLAG, { fetchingList: false });\n    }\n  },\n\n  async create({ commit }, params) {\n    commit(types.default.SET_WEBHOOK_UI_FLAG, { creatingItem: true });\n    try {\n      const response = await webHookAPI.create(params);\n      const {\n        payload: { webhook },\n      } = response.data;\n      commit(types.default.ADD_WEBHOOK, webhook);\n      commit(types.default.SET_WEBHOOK_UI_FLAG, { creatingItem: false });\n    } catch (error) {\n      commit(types.default.SET_WEBHOOK_UI_FLAG, { creatingItem: false });\n      throw error;\n    }\n  },\n\n  update: async ({ commit }, { id, ...updateObj }) => {\n    commit(types.default.SET_WEBHOOK_UI_FLAG, { updatingItem: true });\n    try {\n      const response = await webHookAPI.update(id, updateObj);\n      commit(types.default.UPDATE_WEBHOOK, response.data.payload.webhook);\n    } catch (error) {\n      throw new Error(error);\n    } finally {\n      commit(types.default.SET_WEBHOOK_UI_FLAG, { updatingItem: false });\n    }\n  },\n\n  async delete({ commit }, id) {\n    commit(types.default.SET_WEBHOOK_UI_FLAG, { deletingItem: true });\n    try {\n      await webHookAPI.delete(id);\n      commit(types.default.DELETE_WEBHOOK, id);\n      commit(types.default.SET_WEBHOOK_UI_FLAG, { deletingItem: false });\n    } catch (error) {\n      commit(types.default.SET_WEBHOOK_UI_FLAG, { deletingItem: false });\n      throw error;\n    }\n  },\n};\n\nexport const mutations = {\n  [types.default.SET_WEBHOOK_UI_FLAG](_state, data) {\n    _state.uiFlags = {\n      ..._state.uiFlags,\n      ...data,\n    };\n  },\n  [types.default.SET_WEBHOOK]: MutationHelpers.set,\n  [types.default.ADD_WEBHOOK]: MutationHelpers.create,\n  [types.default.DELETE_WEBHOOK]: MutationHelpers.destroy,\n  [types.default.UPDATE_WEBHOOK]: MutationHelpers.update,\n};\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations,\n};\n"]},"metadata":{},"sourceType":"module"}