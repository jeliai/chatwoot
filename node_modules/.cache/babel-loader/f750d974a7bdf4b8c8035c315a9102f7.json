{"ast":null,"code":"import \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptors.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport MultiselectDropdown from 'shared/components/ui/MultiselectDropdown';\nimport { mapGetters } from 'vuex';\nimport { debounce } from '@chatwoot/utils';\nimport { isEmptyObject } from 'dashboard/helper/commons.js';\nexport default {\n  components: {\n    MultiselectDropdown: MultiselectDropdown\n  },\n  props: {\n    article: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  data: function data() {\n    return {\n      metaTitle: '',\n      metaDescription: '',\n      metaTags: [],\n      metaOptions: []\n    };\n  },\n  computed: _objectSpread(_objectSpread({}, mapGetters({\n    categories: 'categories/allCategories',\n    agents: 'agents/getAgents'\n  })), {}, {\n    assignedAuthor: function assignedAuthor() {\n      var _this$article;\n\n      return (_this$article = this.article) === null || _this$article === void 0 ? void 0 : _this$article.author;\n    },\n    selectedCategory: function selectedCategory() {\n      var _this$article2;\n\n      return (_this$article2 = this.article) === null || _this$article2 === void 0 ? void 0 : _this$article2.category;\n    },\n    allTags: function allTags() {\n      return this.metaTags.map(function (item) {\n        return item.name;\n      });\n    }\n  }),\n  mounted: function mounted() {\n    var _this = this;\n\n    if (!isEmptyObject(this.article.meta || {})) {\n      var _this$article$meta = this.article.meta,\n          _this$article$meta$ti = _this$article$meta.title,\n          title = _this$article$meta$ti === void 0 ? '' : _this$article$meta$ti,\n          _this$article$meta$de = _this$article$meta.description,\n          description = _this$article$meta$de === void 0 ? '' : _this$article$meta$de,\n          _this$article$meta$ta = _this$article$meta.tags,\n          tags = _this$article$meta$ta === void 0 ? [] : _this$article$meta$ta;\n      this.metaTitle = title;\n      this.metaDescription = description;\n      this.metaTags = this.formattedTags({\n        tags: tags\n      });\n    }\n\n    this.saveArticle = debounce(function () {\n      _this.$emit('save-article', {\n        meta: {\n          title: _this.metaTitle,\n          description: _this.metaDescription,\n          tags: _this.allTags\n        }\n      });\n    }, 1000, false);\n  },\n  methods: {\n    formattedTags: function formattedTags(_ref) {\n      var tags = _ref.tags;\n      return tags.map(function (tag) {\n        return {\n          name: tag\n        };\n      });\n    },\n    addTagValue: function addTagValue(tagValue) {\n      var tag = {\n        name: tagValue\n      };\n      this.metaTags.push(tag);\n      this.$refs.tagInput.$el.focus();\n      this.saveArticle();\n    },\n    onClickSelectCategory: function onClickSelectCategory(_ref2) {\n      var id = _ref2.id;\n      this.$emit('save-article', {\n        category_id: id\n      });\n    },\n    onClickAssignAuthor: function onClickAssignAuthor(_ref3) {\n      var id = _ref3.id;\n      this.$emit('save-article', {\n        author_id: id\n      });\n    },\n    onChangeMetaInput: function onChangeMetaInput() {\n      this.saveArticle();\n    },\n    onClickArchiveArticle: function onClickArchiveArticle() {\n      this.$emit('archive-article');\n    },\n    onClickDeleteArticle: function onClickDeleteArticle() {\n      this.$emit('delete-article');\n    }\n  }\n};","map":{"version":3,"sources":["ArticleSettings.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <transition name=\"popover-animation\">\n    <div class=\"article-settings--container\">\n      <h3 class=\"block-title\">\n        {{ $t('HELP_CENTER.ARTICLE_SETTINGS.TITLE') }}\n      </h3>\n      <div class=\"form-wrap\">\n        <label>\n          {{ $t('HELP_CENTER.ARTICLE_SETTINGS.FORM.CATEGORY.LABEL') }}\n          <multiselect-dropdown\n            :options=\"categories\"\n            :selected-item=\"selectedCategory\"\n            :has-thumbnail=\"false\"\n            :multiselector-title=\"\n              $t('HELP_CENTER.ARTICLE_SETTINGS.FORM.CATEGORY.TITLE')\n            \"\n            :multiselector-placeholder=\"\n              $t('HELP_CENTER.ARTICLE_SETTINGS.FORM.CATEGORY.PLACEHOLDER')\n            \"\n            :no-search-result=\"\n              $t('HELP_CENTER.ARTICLE_SETTINGS.FORM.CATEGORY.NO_RESULT')\n            \"\n            :input-placeholder=\"\n              $t(\n                'HELP_CENTER.ARTICLE_SETTINGS.FORM.CATEGORY.SEARCH_PLACEHOLDER'\n              )\n            \"\n            @click=\"onClickSelectCategory\"\n          />\n        </label>\n        <label>\n          {{ $t('HELP_CENTER.ARTICLE_SETTINGS.FORM.AUTHOR.LABEL') }}\n          <multiselect-dropdown\n            :options=\"agents\"\n            :selected-item=\"assignedAuthor\"\n            :multiselector-title=\"\n              $t('HELP_CENTER.ARTICLE_SETTINGS.FORM.AUTHOR.TITLE')\n            \"\n            :multiselector-placeholder=\"\n              $t('HELP_CENTER.ARTICLE_SETTINGS.FORM.AUTHOR.PLACEHOLDER')\n            \"\n            :no-search-result=\"\n              $t('HELP_CENTER.ARTICLE_SETTINGS.FORM.AUTHOR.NO_RESULT')\n            \"\n            :input-placeholder=\"\n              $t('HELP_CENTER.ARTICLE_SETTINGS.FORM.AUTHOR.SEARCH_PLACEHOLDER')\n            \"\n            @click=\"onClickAssignAuthor\"\n          />\n        </label>\n        <label>\n          {{ $t('HELP_CENTER.ARTICLE_SETTINGS.FORM.META_TITLE.LABEL') }}\n          <textarea\n            v-model=\"metaTitle\"\n            rows=\"3\"\n            type=\"text\"\n            :placeholder=\"\n              $t('HELP_CENTER.ARTICLE_SETTINGS.FORM.META_TITLE.PLACEHOLDER')\n            \"\n            @input=\"onChangeMetaInput\"\n          />\n        </label>\n        <label>\n          {{ $t('HELP_CENTER.ARTICLE_SETTINGS.FORM.META_DESCRIPTION.LABEL') }}\n          <textarea\n            v-model=\"metaDescription\"\n            rows=\"3\"\n            type=\"text\"\n            :placeholder=\"\n              $t(\n                'HELP_CENTER.ARTICLE_SETTINGS.FORM.META_DESCRIPTION.PLACEHOLDER'\n              )\n            \"\n            @input=\"onChangeMetaInput\"\n          />\n        </label>\n        <label>\n          {{ $t('HELP_CENTER.ARTICLE_SETTINGS.FORM.META_TAGS.LABEL') }}\n          <multiselect\n            ref=\"tagInput\"\n            v-model=\"metaTags\"\n            :placeholder=\"\n              $t('HELP_CENTER.ARTICLE_SETTINGS.FORM.META_TAGS.PLACEHOLDER')\n            \"\n            label=\"name\"\n            :options=\"metaOptions\"\n            track-by=\"name\"\n            :multiple=\"true\"\n            :taggable=\"true\"\n            @tag=\"addTagValue\"\n          />\n        </label>\n      </div>\n      <div class=\"action-buttons\">\n        <woot-button\n          icon=\"archive\"\n          size=\"small\"\n          variant=\"clear\"\n          color-scheme=\"secondary\"\n          @click=\"onClickArchiveArticle\"\n        >\n          {{ $t('HELP_CENTER.ARTICLE_SETTINGS.BUTTONS.ARCHIVE') }}\n        </woot-button>\n        <woot-button\n          icon=\"delete\"\n          size=\"small\"\n          variant=\"clear\"\n          color-scheme=\"alert\"\n          @click=\"onClickDeleteArticle\"\n        >\n          {{ $t('HELP_CENTER.ARTICLE_SETTINGS.BUTTONS.DELETE') }}\n        </woot-button>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport MultiselectDropdown from 'shared/components/ui/MultiselectDropdown';\nimport { mapGetters } from 'vuex';\nimport { debounce } from '@chatwoot/utils';\nimport { isEmptyObject } from 'dashboard/helper/commons.js';\nexport default {\n  components: {\n    MultiselectDropdown,\n  },\n  props: {\n    article: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n  data() {\n    return {\n      metaTitle: '',\n      metaDescription: '',\n      metaTags: [],\n      metaOptions: [],\n    };\n  },\n  computed: {\n    ...mapGetters({\n      categories: 'categories/allCategories',\n      agents: 'agents/getAgents',\n    }),\n    assignedAuthor() {\n      return this.article?.author;\n    },\n    selectedCategory() {\n      return this.article?.category;\n    },\n    allTags() {\n      return this.metaTags.map(item => item.name);\n    },\n  },\n  mounted() {\n    if (!isEmptyObject(this.article.meta || {})) {\n      const {\n        meta: { title = '', description = '', tags = [] },\n      } = this.article;\n      this.metaTitle = title;\n      this.metaDescription = description;\n      this.metaTags = this.formattedTags({ tags });\n    }\n\n    this.saveArticle = debounce(\n      () => {\n        this.$emit('save-article', {\n          meta: {\n            title: this.metaTitle,\n            description: this.metaDescription,\n            tags: this.allTags,\n          },\n        });\n      },\n      1000,\n      false\n    );\n  },\n  methods: {\n    formattedTags({ tags }) {\n      return tags.map(tag => ({\n        name: tag,\n      }));\n    },\n    addTagValue(tagValue) {\n      const tag = {\n        name: tagValue,\n      };\n      this.metaTags.push(tag);\n      this.$refs.tagInput.$el.focus();\n      this.saveArticle();\n    },\n    onClickSelectCategory({ id }) {\n      this.$emit('save-article', { category_id: id });\n    },\n    onClickAssignAuthor({ id }) {\n      this.$emit('save-article', { author_id: id });\n    },\n    onChangeMetaInput() {\n      this.saveArticle();\n    },\n    onClickArchiveArticle() {\n      this.$emit('archive-article');\n    },\n    onClickDeleteArticle() {\n      this.$emit('delete-article');\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.article-settings--container {\n  flex: 0.3;\n  min-width: var(--space-giga);\n  max-width: 36rem;\n  overflow-y: auto;\n  border-left: 1px solid var(--color-border-light);\n  margin-left: var(--space-normal);\n  padding-left: var(--space-normal);\n  padding-top: var(--space-small);\n  padding-bottom: var(--space-small);\n\n  .form-wrap {\n    margin-top: var(--space-normal);\n    margin-bottom: var(--space-medium);\n\n    textarea {\n      font-size: var(--font-size-small);\n    }\n  }\n\n  .action-buttons {\n    display: flex;\n    flex-direction: column;\n  }\n}\n::v-deep {\n  .multiselect {\n    margin-bottom: 0;\n  }\n  .multiselect__content-wrapper {\n    display: none;\n  }\n  .multiselect--active .multiselect__tags {\n    border-radius: var(--border-radius-normal);\n    padding-right: var(--space-small) !important;\n  }\n  .multiselect__placeholder {\n    color: var(--s-300);\n    padding-top: var(--space-small);\n    margin-bottom: 0;\n  }\n  .multiselect__select {\n    display: none;\n  }\n}\n</style>\n"],"sourceRoot":"app/javascript/dashboard/routes/dashboard/helpcenter/pages/articles"},"metadata":{},"sourceType":"module"}