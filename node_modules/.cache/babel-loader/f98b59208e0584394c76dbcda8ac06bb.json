{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.number.is-integer.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptors.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters } from 'vuex';\nimport adminMixin from '../../../mixins/isAdmin';\nimport { getInboxClassByType, getInboxWarningIconClass } from 'dashboard/helper/inbox';\nimport SecondaryChildNavItem from './SecondaryChildNavItem';\nimport { isOnMentionsView, isOnUnattendedView } from '../../../store/modules/conversations/helpers/actionHelpers';\nexport default {\n  components: {\n    SecondaryChildNavItem: SecondaryChildNavItem\n  },\n  mixins: [adminMixin],\n  props: {\n    menuItem: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  computed: _objectSpread(_objectSpread({}, mapGetters({\n    activeInbox: 'getSelectedInbox',\n    accountId: 'getCurrentAccountId',\n    isFeatureEnabledonAccount: 'accounts/isFeatureEnabledonAccount'\n  })), {}, {\n    hasSubMenu: function hasSubMenu() {\n      return !!this.menuItem.children;\n    },\n    isMenuItemVisible: function isMenuItemVisible() {\n      if (!this.menuItem.featureFlag) {\n        return true;\n      }\n\n      return this.isFeatureEnabledonAccount(this.accountId, this.menuItem.featureFlag);\n    },\n    isAllConversations: function isAllConversations() {\n      return this.$store.state.route.name === 'inbox_conversation' && this.menuItem.toStateName === 'home';\n    },\n    isMentions: function isMentions() {\n      return isOnMentionsView({\n        route: this.$route\n      }) && this.menuItem.toStateName === 'conversation_mentions';\n    },\n    isUnattended: function isUnattended() {\n      return isOnUnattendedView({\n        route: this.$route\n      }) && this.menuItem.toStateName === 'conversation_unattended';\n    },\n    isTeamsSettings: function isTeamsSettings() {\n      return this.$store.state.route.name === 'settings_teams_edit' && this.menuItem.toStateName === 'settings_teams_list';\n    },\n    isInboxSettings: function isInboxSettings() {\n      return this.$store.state.route.name === 'settings_inbox_show' && this.menuItem.toStateName === 'settings_inbox_list';\n    },\n    isIntegrationsSettings: function isIntegrationsSettings() {\n      return this.$store.state.route.name === 'settings_integrations_webhook' && this.menuItem.toStateName === 'settings_integrations';\n    },\n    isApplicationsSettings: function isApplicationsSettings() {\n      return this.$store.state.route.name === 'settings_applications_integration' && this.menuItem.toStateName === 'settings_applications';\n    },\n    isCurrentRoute: function isCurrentRoute() {\n      return this.$store.state.route.name.includes(this.menuItem.toStateName);\n    },\n    computedClass: function computedClass() {\n      // If active inbox is present, do not highlight conversations\n      if (this.activeInbox) return ' ';\n\n      if (this.isAllConversations || this.isMentions || this.isUnattended || this.isCurrentRoute) {\n        return 'is-active';\n      }\n\n      if (this.hasSubMenu) {\n        if (this.isTeamsSettings || this.isInboxSettings || this.isIntegrationsSettings || this.isApplicationsSettings) {\n          return 'is-active';\n        }\n\n        return ' ';\n      }\n\n      return '';\n    }\n  }),\n  methods: {\n    computedInboxClass: function computedInboxClass(child) {\n      var type = child.type,\n          phoneNumber = child.phoneNumber;\n      if (!type) return '';\n      var classByType = getInboxClassByType(type, phoneNumber);\n      return classByType;\n    },\n    computedInboxErrorClass: function computedInboxErrorClass(child) {\n      var type = child.type,\n          reauthorizationRequired = child.reauthorizationRequired;\n      if (!type) return '';\n      var warningClass = getInboxWarningIconClass(type, reauthorizationRequired);\n      return warningClass;\n    },\n    newLinkClick: function newLinkClick(e, navigate) {\n      if (this.menuItem.newLinkRouteName) {\n        navigate(e);\n      } else if (this.menuItem.showModalForNewItem) {\n        if (this.menuItem.modalName === 'AddLabel') {\n          e.preventDefault();\n          this.$emit('add-label');\n        }\n      }\n    },\n    showItem: function showItem(item) {\n      return this.isAdmin && !!item.newLink;\n    },\n    onClickOpen: function onClickOpen() {\n      this.$emit('open');\n    },\n    showChildCount: function showChildCount(count) {\n      return Number.isInteger(count);\n    }\n  }\n};","map":{"version":3,"sources":["SecondaryNavItem.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <li v-show=\"isMenuItemVisible\" class=\"sidebar-item\">\n    <div v-if=\"hasSubMenu\" class=\"secondary-menu--wrap\">\n      <span class=\"secondary-menu--header fs-small\">\n        {{ $t(`SIDEBAR.${menuItem.label}`) }}\n      </span>\n      <div v-if=\"menuItem.showNewButton\" class=\"submenu-icons\">\n        <woot-button\n          size=\"tiny\"\n          variant=\"clear\"\n          color-scheme=\"secondary\"\n          icon=\"add\"\n          class=\"submenu-icon\"\n          @click=\"onClickOpen\"\n        />\n      </div>\n    </div>\n    <router-link\n      v-else\n      class=\"secondary-menu--title secondary-menu--link fs-small\"\n      :class=\"computedClass\"\n      :to=\"menuItem && menuItem.toState\"\n    >\n      <fluent-icon\n        :icon=\"menuItem.icon\"\n        class=\"secondary-menu--icon\"\n        size=\"14\"\n      />\n      {{ $t(`SIDEBAR.${menuItem.label}`) }}\n      <span v-if=\"showChildCount(menuItem.count)\" class=\"count-view\">\n        {{ `${menuItem.count}` }}\n      </span>\n      <span\n        v-if=\"menuItem.beta\"\n        data-view-component=\"true\"\n        label=\"Beta\"\n        class=\"beta\"\n      >\n        {{ $t('SIDEBAR.BETA') }}\n      </span>\n    </router-link>\n\n    <ul v-if=\"hasSubMenu\" class=\"nested vertical menu\">\n      <secondary-child-nav-item\n        v-for=\"child in menuItem.children\"\n        :key=\"child.id\"\n        :to=\"child.toState\"\n        :label=\"child.label\"\n        :label-color=\"child.color\"\n        :should-truncate=\"child.truncateLabel\"\n        :icon=\"computedInboxClass(child)\"\n        :warning-icon=\"computedInboxErrorClass(child)\"\n        :show-child-count=\"showChildCount(child.count)\"\n        :child-item-count=\"child.count\"\n      />\n      <router-link\n        v-if=\"showItem(menuItem)\"\n        v-slot=\"{ href, isActive, navigate }\"\n        :to=\"menuItem.toState\"\n        custom\n      >\n        <li class=\"menu-item--new\">\n          <a\n            :href=\"href\"\n            class=\"button small link clear secondary\"\n            :class=\"{ 'is-active': isActive }\"\n            @click=\"e => newLinkClick(e, navigate)\"\n          >\n            <fluent-icon icon=\"add\" size=\"16\" />\n            <span class=\"button__content\">\n              {{ $t(`SIDEBAR.${menuItem.newLinkTag}`) }}\n            </span>\n          </a>\n        </li>\n      </router-link>\n    </ul>\n  </li>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\n\nimport adminMixin from '../../../mixins/isAdmin';\nimport {\n  getInboxClassByType,\n  getInboxWarningIconClass,\n} from 'dashboard/helper/inbox';\n\nimport SecondaryChildNavItem from './SecondaryChildNavItem';\nimport {\n  isOnMentionsView,\n  isOnUnattendedView,\n} from '../../../store/modules/conversations/helpers/actionHelpers';\n\nexport default {\n  components: { SecondaryChildNavItem },\n  mixins: [adminMixin],\n  props: {\n    menuItem: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n  computed: {\n    ...mapGetters({\n      activeInbox: 'getSelectedInbox',\n      accountId: 'getCurrentAccountId',\n      isFeatureEnabledonAccount: 'accounts/isFeatureEnabledonAccount',\n    }),\n    hasSubMenu() {\n      return !!this.menuItem.children;\n    },\n    isMenuItemVisible() {\n      if (!this.menuItem.featureFlag) {\n        return true;\n      }\n      return this.isFeatureEnabledonAccount(\n        this.accountId,\n        this.menuItem.featureFlag\n      );\n    },\n    isAllConversations() {\n      return (\n        this.$store.state.route.name === 'inbox_conversation' &&\n        this.menuItem.toStateName === 'home'\n      );\n    },\n    isMentions() {\n      return (\n        isOnMentionsView({ route: this.$route }) &&\n        this.menuItem.toStateName === 'conversation_mentions'\n      );\n    },\n    isUnattended() {\n      return (\n        isOnUnattendedView({ route: this.$route }) &&\n        this.menuItem.toStateName === 'conversation_unattended'\n      );\n    },\n    isTeamsSettings() {\n      return (\n        this.$store.state.route.name === 'settings_teams_edit' &&\n        this.menuItem.toStateName === 'settings_teams_list'\n      );\n    },\n    isInboxSettings() {\n      return (\n        this.$store.state.route.name === 'settings_inbox_show' &&\n        this.menuItem.toStateName === 'settings_inbox_list'\n      );\n    },\n    isIntegrationsSettings() {\n      return (\n        this.$store.state.route.name === 'settings_integrations_webhook' &&\n        this.menuItem.toStateName === 'settings_integrations'\n      );\n    },\n    isApplicationsSettings() {\n      return (\n        this.$store.state.route.name === 'settings_applications_integration' &&\n        this.menuItem.toStateName === 'settings_applications'\n      );\n    },\n    isCurrentRoute() {\n      return this.$store.state.route.name.includes(this.menuItem.toStateName);\n    },\n\n    computedClass() {\n      // If active inbox is present, do not highlight conversations\n      if (this.activeInbox) return ' ';\n      if (\n        this.isAllConversations ||\n        this.isMentions ||\n        this.isUnattended ||\n        this.isCurrentRoute\n      ) {\n        return 'is-active';\n      }\n      if (this.hasSubMenu) {\n        if (\n          this.isTeamsSettings ||\n          this.isInboxSettings ||\n          this.isIntegrationsSettings ||\n          this.isApplicationsSettings\n        ) {\n          return 'is-active';\n        }\n        return ' ';\n      }\n\n      return '';\n    },\n  },\n  methods: {\n    computedInboxClass(child) {\n      const { type, phoneNumber } = child;\n      if (!type) return '';\n      const classByType = getInboxClassByType(type, phoneNumber);\n      return classByType;\n    },\n    computedInboxErrorClass(child) {\n      const { type, reauthorizationRequired } = child;\n      if (!type) return '';\n      const warningClass = getInboxWarningIconClass(\n        type,\n        reauthorizationRequired\n      );\n      return warningClass;\n    },\n    newLinkClick(e, navigate) {\n      if (this.menuItem.newLinkRouteName) {\n        navigate(e);\n      } else if (this.menuItem.showModalForNewItem) {\n        if (this.menuItem.modalName === 'AddLabel') {\n          e.preventDefault();\n          this.$emit('add-label');\n        }\n      }\n    },\n    showItem(item) {\n      return this.isAdmin && !!item.newLink;\n    },\n    onClickOpen() {\n      this.$emit('open');\n    },\n    showChildCount(count) {\n      return Number.isInteger(count);\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.sidebar-item {\n  margin: var(--space-smaller) 0 0;\n}\n\n.secondary-menu--wrap {\n  display: flex;\n  justify-content: space-between;\n  margin-top: var(--space-small);\n}\n\n.secondary-menu--header {\n  color: var(--s-700);\n  display: flex;\n  font-weight: var(--font-weight-bold);\n  line-height: var(--space-normal);\n  margin: var(--space-small) 0;\n  padding: 0 var(--space-small);\n}\n.secondary-menu--title {\n  color: var(--s-600);\n  display: flex;\n  font-weight: var(--font-weight-medium);\n  line-height: var(--space-normal);\n  margin: var(--space-small) 0;\n  padding: 0 var(--space-small);\n}\n\n.secondary-menu--link {\n  display: flex;\n  align-items: center;\n  margin: 0;\n  padding: var(--space-small);\n  font-weight: var(--font-weight-medium);\n  border-radius: var(--border-radius-normal);\n  color: var(--s-700);\n\n  &:hover {\n    background: var(--s-25);\n    color: var(--s-600);\n  }\n\n  &:focus {\n    border-color: var(--w-300);\n  }\n\n  &.router-link-exact-active,\n  &.is-active {\n    background: var(--w-25);\n    color: var(--w-500);\n    border-color: var(--w-25);\n  }\n\n  &.is-active .count-view {\n    background: var(--w-75);\n    color: var(--w-600);\n  }\n}\n\n.secondary-menu--icon {\n  margin-right: var(--space-smaller);\n  min-width: var(--space-normal);\n}\n\n.sub-menu-link {\n  color: var(--s-600);\n}\n\n.wrap {\n  display: flex;\n  align-items: center;\n}\n\n.label-color--display {\n  border-radius: var(--space-smaller);\n  height: var(--space-normal);\n  margin-right: var(--space-small);\n  min-width: var(--space-normal);\n  width: var(--space-normal);\n}\n\n.inbox-icon {\n  position: relative;\n  top: -1px;\n}\n\n.sidebar-item .menu-item--new {\n  padding: var(--space-small) 0;\n\n  .button {\n    display: inline-flex;\n    color: var(--s-500);\n  }\n}\n\n.beta {\n  padding-right: var(--space-smaller) !important;\n  padding-left: var(--space-smaller) !important;\n  margin-left: var(--space-smaller) !important;\n  display: inline-block;\n  font-size: var(--font-size-micro);\n  font-weight: var(--font-weight-medium);\n  line-height: 18px;\n  border: 1px solid transparent;\n  border-radius: 2em;\n  color: var(--g-800);\n  border-color: var(--g-700);\n}\n\n.count-view {\n  background: var(--s-50);\n  border-radius: var(--border-radius-normal);\n  color: var(--s-600);\n  font-size: var(--font-size-micro);\n  font-weight: var(--font-weight-bold);\n  margin-left: var(--space-smaller);\n  padding: var(--space-zero) var(--space-smaller);\n}\n\n.submenu-icons {\n  display: flex;\n  align-items: center;\n\n  .submenu-icon {\n    padding: 0;\n    margin-left: var(--space-small);\n  }\n}\n</style>\n"],"sourceRoot":"app/javascript/dashboard/components/layout/sidebarComponents"},"metadata":{},"sourceType":"module"}