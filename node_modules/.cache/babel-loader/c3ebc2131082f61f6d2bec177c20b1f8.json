{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.object.get-prototype-of.js\";\nimport \"core-js/modules/es.reflect.construct.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/* global axios */\nimport ApiClient from '../ApiClient';\n\nvar ConversationApi = /*#__PURE__*/function (_ApiClient) {\n  _inherits(ConversationApi, _ApiClient);\n\n  var _super = _createSuper(ConversationApi);\n\n  function ConversationApi() {\n    _classCallCheck(this, ConversationApi);\n\n    return _super.call(this, 'conversations', {\n      accountScoped: true\n    });\n  }\n\n  _createClass(ConversationApi, [{\n    key: \"get\",\n    value: function get(_ref) {\n      var inboxId = _ref.inboxId,\n          status = _ref.status,\n          assigneeType = _ref.assigneeType,\n          page = _ref.page,\n          labels = _ref.labels,\n          teamId = _ref.teamId,\n          conversationType = _ref.conversationType;\n      return axios.get(this.url, {\n        params: {\n          inbox_id: inboxId,\n          team_id: teamId,\n          status: status,\n          assignee_type: assigneeType,\n          page: page,\n          labels: labels,\n          conversation_type: conversationType\n        }\n      });\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(payload) {\n      return axios.post(\"\".concat(this.url, \"/filter\"), payload.queryData, {\n        params: {\n          page: payload.page\n        }\n      });\n    }\n  }, {\n    key: \"search\",\n    value: function search(_ref2) {\n      var q = _ref2.q;\n      return axios.get(\"\".concat(this.url, \"/search\"), {\n        params: {\n          q: q,\n          page: 1\n        }\n      });\n    }\n  }, {\n    key: \"toggleStatus\",\n    value: function toggleStatus(_ref3) {\n      var conversationId = _ref3.conversationId,\n          status = _ref3.status,\n          _ref3$snoozedUntil = _ref3.snoozedUntil,\n          snoozedUntil = _ref3$snoozedUntil === void 0 ? null : _ref3$snoozedUntil;\n      return axios.post(\"\".concat(this.url, \"/\").concat(conversationId, \"/toggle_status\"), {\n        status: status,\n        snoozed_until: snoozedUntil\n      });\n    }\n  }, {\n    key: \"assignAgent\",\n    value: function assignAgent(_ref4) {\n      var conversationId = _ref4.conversationId,\n          agentId = _ref4.agentId;\n      return axios.post(\"\".concat(this.url, \"/\").concat(conversationId, \"/assignments?assignee_id=\").concat(agentId), {});\n    }\n  }, {\n    key: \"assignTeam\",\n    value: function assignTeam(_ref5) {\n      var conversationId = _ref5.conversationId,\n          teamId = _ref5.teamId;\n      var params = {\n        team_id: teamId\n      };\n      return axios.post(\"\".concat(this.url, \"/\").concat(conversationId, \"/assignments\"), params);\n    }\n  }, {\n    key: \"markMessageRead\",\n    value: function markMessageRead(_ref6) {\n      var id = _ref6.id;\n      return axios.post(\"\".concat(this.url, \"/\").concat(id, \"/update_last_seen\"));\n    }\n  }, {\n    key: \"markMessagesUnread\",\n    value: function markMessagesUnread(_ref7) {\n      var id = _ref7.id;\n      return axios.post(\"\".concat(this.url, \"/\").concat(id, \"/unread\"));\n    }\n  }, {\n    key: \"toggleTyping\",\n    value: function toggleTyping(_ref8) {\n      var conversationId = _ref8.conversationId,\n          status = _ref8.status,\n          isPrivate = _ref8.isPrivate;\n      return axios.post(\"\".concat(this.url, \"/\").concat(conversationId, \"/toggle_typing_status\"), {\n        typing_status: status,\n        is_private: isPrivate\n      });\n    }\n  }, {\n    key: \"mute\",\n    value: function mute(conversationId) {\n      return axios.post(\"\".concat(this.url, \"/\").concat(conversationId, \"/mute\"));\n    }\n  }, {\n    key: \"unmute\",\n    value: function unmute(conversationId) {\n      return axios.post(\"\".concat(this.url, \"/\").concat(conversationId, \"/unmute\"));\n    }\n  }, {\n    key: \"meta\",\n    value: function meta(_ref9) {\n      var inboxId = _ref9.inboxId,\n          status = _ref9.status,\n          assigneeType = _ref9.assigneeType,\n          labels = _ref9.labels,\n          teamId = _ref9.teamId,\n          conversationType = _ref9.conversationType;\n      return axios.get(\"\".concat(this.url, \"/meta\"), {\n        params: {\n          inbox_id: inboxId,\n          status: status,\n          assignee_type: assigneeType,\n          labels: labels,\n          team_id: teamId,\n          conversation_type: conversationType\n        }\n      });\n    }\n  }, {\n    key: \"sendEmailTranscript\",\n    value: function sendEmailTranscript(_ref10) {\n      var conversationId = _ref10.conversationId,\n          email = _ref10.email;\n      return axios.post(\"\".concat(this.url, \"/\").concat(conversationId, \"/transcript\"), {\n        email: email\n      });\n    }\n  }, {\n    key: \"updateCustomAttributes\",\n    value: function updateCustomAttributes(_ref11) {\n      var conversationId = _ref11.conversationId,\n          customAttributes = _ref11.customAttributes;\n      return axios.post(\"\".concat(this.url, \"/\").concat(conversationId, \"/custom_attributes\"), {\n        custom_attributes: customAttributes\n      });\n    }\n  }, {\n    key: \"fetchParticipants\",\n    value: function fetchParticipants(conversationId) {\n      return axios.get(\"\".concat(this.url, \"/\").concat(conversationId, \"/participants\"));\n    }\n  }, {\n    key: \"updateParticipants\",\n    value: function updateParticipants(_ref12) {\n      var conversationId = _ref12.conversationId,\n          userIds = _ref12.userIds;\n      return axios.patch(\"\".concat(this.url, \"/\").concat(conversationId, \"/participants\"), {\n        user_ids: userIds\n      });\n    }\n  }]);\n\n  return ConversationApi;\n}(ApiClient);\n\nexport default new ConversationApi();","map":{"version":3,"sources":["/Users/s.dastan/Desktop/chatwoot/chatwoot/app/javascript/dashboard/api/inbox/conversation.js"],"names":["ApiClient","ConversationApi","accountScoped","inboxId","status","assigneeType","page","labels","teamId","conversationType","axios","get","url","params","inbox_id","team_id","assignee_type","conversation_type","payload","post","queryData","q","conversationId","snoozedUntil","snoozed_until","agentId","id","isPrivate","typing_status","is_private","email","customAttributes","custom_attributes","userIds","patch","user_ids"],"mappings":"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","sourcesContent":["/* global axios */\nimport ApiClient from '../ApiClient';\n\nclass ConversationApi extends ApiClient {\n  constructor() {\n    super('conversations', { accountScoped: true });\n  }\n\n  get({\n    inboxId,\n    status,\n    assigneeType,\n    page,\n    labels,\n    teamId,\n    conversationType,\n  }) {\n    return axios.get(this.url, {\n      params: {\n        inbox_id: inboxId,\n        team_id: teamId,\n        status,\n        assignee_type: assigneeType,\n        page,\n        labels,\n        conversation_type: conversationType,\n      },\n    });\n  }\n\n  filter(payload) {\n    return axios.post(`${this.url}/filter`, payload.queryData, {\n      params: {\n        page: payload.page,\n      },\n    });\n  }\n\n  search({ q }) {\n    return axios.get(`${this.url}/search`, {\n      params: {\n        q,\n        page: 1,\n      },\n    });\n  }\n\n  toggleStatus({ conversationId, status, snoozedUntil = null }) {\n    return axios.post(`${this.url}/${conversationId}/toggle_status`, {\n      status,\n      snoozed_until: snoozedUntil,\n    });\n  }\n\n  assignAgent({ conversationId, agentId }) {\n    return axios.post(\n      `${this.url}/${conversationId}/assignments?assignee_id=${agentId}`,\n      {}\n    );\n  }\n\n  assignTeam({ conversationId, teamId }) {\n    const params = { team_id: teamId };\n    return axios.post(`${this.url}/${conversationId}/assignments`, params);\n  }\n\n  markMessageRead({ id }) {\n    return axios.post(`${this.url}/${id}/update_last_seen`);\n  }\n\n  markMessagesUnread({ id }) {\n    return axios.post(`${this.url}/${id}/unread`);\n  }\n\n  toggleTyping({ conversationId, status, isPrivate }) {\n    return axios.post(`${this.url}/${conversationId}/toggle_typing_status`, {\n      typing_status: status,\n      is_private: isPrivate,\n    });\n  }\n\n  mute(conversationId) {\n    return axios.post(`${this.url}/${conversationId}/mute`);\n  }\n\n  unmute(conversationId) {\n    return axios.post(`${this.url}/${conversationId}/unmute`);\n  }\n\n  meta({ inboxId, status, assigneeType, labels, teamId, conversationType }) {\n    return axios.get(`${this.url}/meta`, {\n      params: {\n        inbox_id: inboxId,\n        status,\n        assignee_type: assigneeType,\n        labels,\n        team_id: teamId,\n        conversation_type: conversationType,\n      },\n    });\n  }\n\n  sendEmailTranscript({ conversationId, email }) {\n    return axios.post(`${this.url}/${conversationId}/transcript`, { email });\n  }\n\n  updateCustomAttributes({ conversationId, customAttributes }) {\n    return axios.post(`${this.url}/${conversationId}/custom_attributes`, {\n      custom_attributes: customAttributes,\n    });\n  }\n\n  fetchParticipants(conversationId) {\n    return axios.get(`${this.url}/${conversationId}/participants`);\n  }\n\n  updateParticipants({ conversationId, userIds }) {\n    return axios.patch(`${this.url}/${conversationId}/participants`, {\n      user_ids: userIds,\n    });\n  }\n}\n\nexport default new ConversationApi();\n"]},"metadata":{},"sourceType":"module"}