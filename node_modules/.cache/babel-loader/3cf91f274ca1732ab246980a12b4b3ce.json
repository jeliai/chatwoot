{"ast":null,"code":"import \"core-js/modules/web.dom-collections.for-each.js\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport store from '../store';\n\nvar CampaignTimer = function CampaignTimer() {\n  var _this = this;\n\n  _classCallCheck(this, CampaignTimer);\n\n  this.initTimers = function (_ref, websiteToken) {\n    var campaigns = _ref.campaigns;\n\n    _this.clearTimers();\n\n    campaigns.forEach(function (campaign) {\n      var timeOnPage = campaign.timeOnPage,\n          campaignId = campaign.id;\n      _this.campaignTimers[campaignId] = setTimeout(function () {\n        store.dispatch('campaign/startCampaign', {\n          campaignId: campaignId,\n          websiteToken: websiteToken\n        });\n      }, timeOnPage * 1000);\n    });\n  };\n\n  this.clearTimers = function () {\n    _this.campaignTimers.forEach(function (timerId) {\n      clearTimeout(timerId);\n      _this.campaignTimers[timerId] = null;\n    });\n  };\n\n  this.campaignTimers = [];\n};\n\nexport default new CampaignTimer();","map":{"version":3,"sources":["/Users/s.dastan/Desktop/chatwoot/chatwoot/app/javascript/widget/helpers/campaignTimer.js"],"names":["store","CampaignTimer","initTimers","websiteToken","campaigns","clearTimers","forEach","campaign","timeOnPage","campaignId","id","campaignTimers","setTimeout","dispatch","timerId","clearTimeout"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,UAAlB;;IACMC,a,GACJ,yBAAc;AAAA;;AAAA;;AAAA,OAIdC,UAJc,GAID,gBAAgBC,YAAhB,EAAiC;AAAA,QAA9BC,SAA8B,QAA9BA,SAA8B;;AAC5C,IAAA,KAAI,CAACC,WAAL;;AACAD,IAAAA,SAAS,CAACE,OAAV,CAAkB,UAAAC,QAAQ,EAAI;AAC5B,UAAQC,UAAR,GAAuCD,QAAvC,CAAQC,UAAR;AAAA,UAAwBC,UAAxB,GAAuCF,QAAvC,CAAoBG,EAApB;AACA,MAAA,KAAI,CAACC,cAAL,CAAoBF,UAApB,IAAkCG,UAAU,CAAC,YAAM;AACjDZ,QAAAA,KAAK,CAACa,QAAN,CAAe,wBAAf,EAAyC;AAAEJ,UAAAA,UAAU,EAAVA,UAAF;AAAcN,UAAAA,YAAY,EAAZA;AAAd,SAAzC;AACD,OAF2C,EAEzCK,UAAU,GAAG,IAF4B,CAA5C;AAGD,KALD;AAMD,GAZa;;AAAA,OAcdH,WAdc,GAcA,YAAM;AAClB,IAAA,KAAI,CAACM,cAAL,CAAoBL,OAApB,CAA4B,UAAAQ,OAAO,EAAI;AACrCC,MAAAA,YAAY,CAACD,OAAD,CAAZ;AACA,MAAA,KAAI,CAACH,cAAL,CAAoBG,OAApB,IAA+B,IAA/B;AACD,KAHD;AAID,GAnBa;;AACZ,OAAKH,cAAL,GAAsB,EAAtB;AACD,C;;AAmBH,eAAe,IAAIV,aAAJ,EAAf","sourcesContent":["import store from '../store';\nclass CampaignTimer {\n  constructor() {\n    this.campaignTimers = [];\n  }\n\n  initTimers = ({ campaigns }, websiteToken) => {\n    this.clearTimers();\n    campaigns.forEach(campaign => {\n      const { timeOnPage, id: campaignId } = campaign;\n      this.campaignTimers[campaignId] = setTimeout(() => {\n        store.dispatch('campaign/startCampaign', { campaignId, websiteToken });\n      }, timeOnPage * 1000);\n    });\n  };\n\n  clearTimers = () => {\n    this.campaignTimers.forEach(timerId => {\n      clearTimeout(timerId);\n      this.campaignTimers[timerId] = null;\n    });\n  };\n}\nexport default new CampaignTimer();\n"]},"metadata":{},"sourceType":"module"}