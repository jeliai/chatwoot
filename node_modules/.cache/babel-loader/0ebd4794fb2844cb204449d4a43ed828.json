{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.function.name.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* eslint no-console: 0 */\nimport { required, minLength } from 'vuelidate/lib/validators';\nimport WootSubmitButton from '../../../../components/buttons/FormSubmitButton';\nimport Modal from '../../../../components/Modal';\nexport default {\n  components: {\n    WootSubmitButton: WootSubmitButton,\n    Modal: Modal\n  },\n  props: {\n    id: {\n      type: Number,\n      default: null\n    },\n    edcontent: {\n      type: String,\n      default: ''\n    },\n    edshortCode: {\n      type: String,\n      default: ''\n    },\n    onClose: {\n      type: Function,\n      default: function _default() {}\n    }\n  },\n  data: function data() {\n    return {\n      editCanned: {\n        showAlert: false,\n        showLoading: false,\n        message: ''\n      },\n      shortCode: this.edshortCode,\n      content: this.edcontent,\n      show: true\n    };\n  },\n  validations: {\n    shortCode: {\n      required: required,\n      minLength: minLength(2)\n    },\n    content: {\n      required: required\n    }\n  },\n  computed: {\n    pageTitle: function pageTitle() {\n      return \"\".concat(this.$t('CANNED_MGMT.EDIT.TITLE'), \" - \").concat(this.edshortCode);\n    }\n  },\n  methods: {\n    setPageName: function setPageName(_ref) {\n      var name = _ref.name;\n      this.$v.content.$touch();\n      this.content = name;\n    },\n    showAlert: function showAlert() {\n      bus.$emit('newToastMessage', this.editCanned.message);\n    },\n    resetForm: function resetForm() {\n      this.shortCode = '';\n      this.content = '';\n      this.$v.shortCode.$reset();\n      this.$v.content.$reset();\n    },\n    editCannedResponse: function editCannedResponse() {\n      var _this = this;\n\n      // Show loading on button\n      this.editCanned.showLoading = true; // Make API Calls\n\n      this.$store.dispatch('updateCannedResponse', {\n        id: this.id,\n        short_code: this.shortCode,\n        content: this.content\n      }).then(function () {\n        // Reset Form, Show success message\n        _this.editCanned.showLoading = false;\n        _this.editCanned.message = _this.$t('CANNED_MGMT.EDIT.API.SUCCESS_MESSAGE');\n\n        _this.showAlert();\n\n        _this.resetForm();\n\n        setTimeout(function () {\n          _this.onClose();\n        }, 10);\n      }).catch(function () {\n        _this.editCanned.showLoading = false;\n        _this.editCanned.message = _this.$t('CANNED_MGMT.EDIT.API.ERROR_MESSAGE');\n\n        _this.showAlert();\n      });\n    }\n  }\n};","map":{"version":3,"sources":["EditCanned.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <modal :show.sync=\"show\" :on-close=\"onClose\">\n    <div class=\"column content-box\">\n      <woot-modal-header :header-title=\"pageTitle\" />\n      <form class=\"row medium-8\" @submit.prevent=\"editCannedResponse()\">\n        <div class=\"medium-12 columns\">\n          <label :class=\"{ error: $v.shortCode.$error }\">\n            {{ $t('CANNED_MGMT.EDIT.FORM.SHORT_CODE.LABEL') }}\n            <input\n              v-model.trim=\"shortCode\"\n              type=\"text\"\n              :placeholder=\"$t('CANNED_MGMT.EDIT.FORM.SHORT_CODE.PLACEHOLDER')\"\n              @input=\"$v.shortCode.$touch\"\n            />\n          </label>\n        </div>\n\n        <div class=\"medium-12 columns\">\n          <label :class=\"{ error: $v.content.$error }\">\n            {{ $t('CANNED_MGMT.EDIT.FORM.CONTENT.LABEL') }}\n            <textarea\n              v-model.trim=\"content\"\n              rows=\"5\"\n              type=\"text\"\n              :placeholder=\"$t('CANNED_MGMT.EDIT.FORM.CONTENT.PLACEHOLDER')\"\n              @input=\"$v.content.$touch\"\n            />\n          </label>\n        </div>\n        <div class=\"modal-footer\">\n          <div class=\"medium-12 columns\">\n            <woot-submit-button\n              :disabled=\"\n                $v.content.$invalid ||\n                  $v.shortCode.$invalid ||\n                  editCanned.showLoading\n              \"\n              :button-text=\"$t('CANNED_MGMT.EDIT.FORM.SUBMIT')\"\n              :loading=\"editCanned.showLoading\"\n            />\n            <button class=\"button clear\" @click.prevent=\"onClose\">\n              {{ $t('CANNED_MGMT.EDIT.CANCEL_BUTTON_TEXT') }}\n            </button>\n          </div>\n        </div>\n      </form>\n    </div>\n  </modal>\n</template>\n\n<script>\n/* eslint no-console: 0 */\nimport { required, minLength } from 'vuelidate/lib/validators';\n\nimport WootSubmitButton from '../../../../components/buttons/FormSubmitButton';\nimport Modal from '../../../../components/Modal';\n\nexport default {\n  components: {\n    WootSubmitButton,\n    Modal,\n  },\n  props: {\n    id: { type: Number, default: null },\n    edcontent: { type: String, default: '' },\n    edshortCode: { type: String, default: '' },\n    onClose: { type: Function, default: () => {} },\n  },\n  data() {\n    return {\n      editCanned: {\n        showAlert: false,\n        showLoading: false,\n        message: '',\n      },\n      shortCode: this.edshortCode,\n      content: this.edcontent,\n      show: true,\n    };\n  },\n  validations: {\n    shortCode: {\n      required,\n      minLength: minLength(2),\n    },\n    content: {\n      required,\n    },\n  },\n  computed: {\n    pageTitle() {\n      return `${this.$t('CANNED_MGMT.EDIT.TITLE')} - ${this.edshortCode}`;\n    },\n  },\n  methods: {\n    setPageName({ name }) {\n      this.$v.content.$touch();\n      this.content = name;\n    },\n    showAlert() {\n      bus.$emit('newToastMessage', this.editCanned.message);\n    },\n    resetForm() {\n      this.shortCode = '';\n      this.content = '';\n      this.$v.shortCode.$reset();\n      this.$v.content.$reset();\n    },\n    editCannedResponse() {\n      // Show loading on button\n      this.editCanned.showLoading = true;\n      // Make API Calls\n      this.$store\n        .dispatch('updateCannedResponse', {\n          id: this.id,\n          short_code: this.shortCode,\n          content: this.content,\n        })\n        .then(() => {\n          // Reset Form, Show success message\n          this.editCanned.showLoading = false;\n          this.editCanned.message = this.$t(\n            'CANNED_MGMT.EDIT.API.SUCCESS_MESSAGE'\n          );\n          this.showAlert();\n          this.resetForm();\n          setTimeout(() => {\n            this.onClose();\n          }, 10);\n        })\n        .catch(() => {\n          this.editCanned.showLoading = false;\n          this.editCanned.message = this.$t(\n            'CANNED_MGMT.EDIT.API.ERROR_MESSAGE'\n          );\n          this.showAlert();\n        });\n    },\n  },\n};\n</script>\n"],"sourceRoot":"app/javascript/dashboard/routes/dashboard/settings/canned"},"metadata":{},"sourceType":"module"}