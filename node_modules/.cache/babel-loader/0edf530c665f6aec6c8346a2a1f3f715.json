{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.object.get-prototype-of.js\";\nimport \"core-js/modules/es.reflect.construct.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\n\n/* global axios */\nimport ApiClient from './ApiClient';\nexport var buildContactParams = function buildContactParams(page, sortAttr, label, search) {\n  var params = \"include_contact_inboxes=false&page=\".concat(page, \"&sort=\").concat(sortAttr);\n\n  if (search) {\n    params = \"\".concat(params, \"&q=\").concat(search);\n  }\n\n  if (label) {\n    params = \"\".concat(params, \"&labels[]=\").concat(label);\n  }\n\n  return params;\n};\n\nvar ContactAPI = /*#__PURE__*/function (_ApiClient) {\n  _inherits(ContactAPI, _ApiClient);\n\n  var _super = _createSuper(ContactAPI);\n\n  function ContactAPI() {\n    _classCallCheck(this, ContactAPI);\n\n    return _super.call(this, 'contacts', {\n      accountScoped: true\n    });\n  }\n\n  _createClass(ContactAPI, [{\n    key: \"get\",\n    value: function get(page) {\n      var sortAttr = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'name';\n      var label = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n      var requestURL = \"\".concat(this.url, \"?\").concat(buildContactParams(page, sortAttr, label, ''));\n      return axios.get(requestURL);\n    }\n  }, {\n    key: \"getConversations\",\n    value: function getConversations(contactId) {\n      return axios.get(\"\".concat(this.url, \"/\").concat(contactId, \"/conversations\"));\n    }\n  }, {\n    key: \"getContactableInboxes\",\n    value: function getContactableInboxes(contactId) {\n      return axios.get(\"\".concat(this.url, \"/\").concat(contactId, \"/contactable_inboxes\"));\n    }\n  }, {\n    key: \"getContactLabels\",\n    value: function getContactLabels(contactId) {\n      return axios.get(\"\".concat(this.url, \"/\").concat(contactId, \"/labels\"));\n    }\n  }, {\n    key: \"updateContactLabels\",\n    value: function updateContactLabels(contactId, labels) {\n      return axios.post(\"\".concat(this.url, \"/\").concat(contactId, \"/labels\"), {\n        labels: labels\n      });\n    }\n  }, {\n    key: \"search\",\n    value: function search() {\n      var _search = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n      var page = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var sortAttr = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'name';\n      var label = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n      var requestURL = \"\".concat(this.url, \"/search?\").concat(buildContactParams(page, sortAttr, label, _search));\n      return axios.get(requestURL);\n    }\n  }, {\n    key: \"filter\",\n    value: function filter() {\n      var page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      var sortAttr = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'name';\n      var queryPayload = arguments.length > 2 ? arguments[2] : undefined;\n      var requestURL = \"\".concat(this.url, \"/filter?\").concat(buildContactParams(page, sortAttr));\n      return axios.post(requestURL, queryPayload);\n    }\n  }, {\n    key: \"importContacts\",\n    value: function importContacts(file) {\n      var formData = new FormData();\n      formData.append('import_file', file);\n      return axios.post(\"\".concat(this.url, \"/import\"), formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n    }\n  }, {\n    key: \"destroyCustomAttributes\",\n    value: function destroyCustomAttributes(contactId, customAttributes) {\n      return axios.post(\"\".concat(this.url, \"/\").concat(contactId, \"/destroy_custom_attributes\"), {\n        custom_attributes: customAttributes\n      });\n    }\n  }, {\n    key: \"destroyAvatar\",\n    value: function destroyAvatar(contactId) {\n      return axios.delete(\"\".concat(this.url, \"/\").concat(contactId, \"/avatar\"));\n    }\n  }]);\n\n  return ContactAPI;\n}(ApiClient);\n\nexport default new ContactAPI();","map":{"version":3,"sources":["/Users/s.dastan/Desktop/chatwoot/chatwoot/app/javascript/dashboard/api/contacts.js"],"names":["ApiClient","buildContactParams","page","sortAttr","label","search","params","ContactAPI","accountScoped","requestURL","url","axios","get","contactId","labels","post","queryPayload","file","formData","FormData","append","headers","customAttributes","custom_attributes","delete"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA,OAAOA,SAAP,MAAsB,aAAtB;AAEA,OAAO,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,IAAD,EAAOC,QAAP,EAAiBC,KAAjB,EAAwBC,MAAxB,EAAmC;AACnE,MAAIC,MAAM,gDAAyCJ,IAAzC,mBAAsDC,QAAtD,CAAV;;AACA,MAAIE,MAAJ,EAAY;AACVC,IAAAA,MAAM,aAAMA,MAAN,gBAAkBD,MAAlB,CAAN;AACD;;AACD,MAAID,KAAJ,EAAW;AACTE,IAAAA,MAAM,aAAMA,MAAN,uBAAyBF,KAAzB,CAAN;AACD;;AACD,SAAOE,MAAP;AACD,CATM;;IAWDC,U;;;;;AACJ,wBAAc;AAAA;;AAAA,6BACN,UADM,EACM;AAAEC,MAAAA,aAAa,EAAE;AAAjB,KADN;AAEb;;;;WAED,aAAIN,IAAJ,EAAyC;AAAA,UAA/BC,QAA+B,uEAApB,MAAoB;AAAA,UAAZC,KAAY,uEAAJ,EAAI;AACvC,UAAIK,UAAU,aAAM,KAAKC,GAAX,cAAkBT,kBAAkB,CAChDC,IADgD,EAEhDC,QAFgD,EAGhDC,KAHgD,EAIhD,EAJgD,CAApC,CAAd;AAMA,aAAOO,KAAK,CAACC,GAAN,CAAUH,UAAV,CAAP;AACD;;;WAED,0BAAiBI,SAAjB,EAA4B;AAC1B,aAAOF,KAAK,CAACC,GAAN,WAAa,KAAKF,GAAlB,cAAyBG,SAAzB,oBAAP;AACD;;;WAED,+BAAsBA,SAAtB,EAAiC;AAC/B,aAAOF,KAAK,CAACC,GAAN,WAAa,KAAKF,GAAlB,cAAyBG,SAAzB,0BAAP;AACD;;;WAED,0BAAiBA,SAAjB,EAA4B;AAC1B,aAAOF,KAAK,CAACC,GAAN,WAAa,KAAKF,GAAlB,cAAyBG,SAAzB,aAAP;AACD;;;WAED,6BAAoBA,SAApB,EAA+BC,MAA/B,EAAuC;AACrC,aAAOH,KAAK,CAACI,IAAN,WAAc,KAAKL,GAAnB,cAA0BG,SAA1B,cAA8C;AAAEC,QAAAA,MAAM,EAANA;AAAF,OAA9C,CAAP;AACD;;;WAED,kBAA6D;AAAA,UAAtDT,OAAsD,uEAA7C,EAA6C;;AAAA,UAAzCH,IAAyC,uEAAlC,CAAkC;AAAA,UAA/BC,QAA+B,uEAApB,MAAoB;AAAA,UAAZC,KAAY,uEAAJ,EAAI;AAC3D,UAAIK,UAAU,aAAM,KAAKC,GAAX,qBAAyBT,kBAAkB,CACvDC,IADuD,EAEvDC,QAFuD,EAGvDC,KAHuD,EAIvDC,OAJuD,CAA3C,CAAd;AAMA,aAAOM,KAAK,CAACC,GAAN,CAAUH,UAAV,CAAP;AACD;;;WAED,kBAAkD;AAAA,UAA3CP,IAA2C,uEAApC,CAAoC;AAAA,UAAjCC,QAAiC,uEAAtB,MAAsB;AAAA,UAAda,YAAc;AAChD,UAAIP,UAAU,aAAM,KAAKC,GAAX,qBAAyBT,kBAAkB,CAACC,IAAD,EAAOC,QAAP,CAA3C,CAAd;AACA,aAAOQ,KAAK,CAACI,IAAN,CAAWN,UAAX,EAAuBO,YAAvB,CAAP;AACD;;;WAED,wBAAeC,IAAf,EAAqB;AACnB,UAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,MAAAA,QAAQ,CAACE,MAAT,CAAgB,aAAhB,EAA+BH,IAA/B;AACA,aAAON,KAAK,CAACI,IAAN,WAAc,KAAKL,GAAnB,cAAiCQ,QAAjC,EAA2C;AAChDG,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB;AADuC,OAA3C,CAAP;AAGD;;;WAED,iCAAwBR,SAAxB,EAAmCS,gBAAnC,EAAqD;AACnD,aAAOX,KAAK,CAACI,IAAN,WAAc,KAAKL,GAAnB,cAA0BG,SAA1B,iCAAiE;AACtEU,QAAAA,iBAAiB,EAAED;AADmD,OAAjE,CAAP;AAGD;;;WAED,uBAAcT,SAAd,EAAyB;AACvB,aAAOF,KAAK,CAACa,MAAN,WAAgB,KAAKd,GAArB,cAA4BG,SAA5B,aAAP;AACD;;;;EA9DsBb,S;;AAiEzB,eAAe,IAAIO,UAAJ,EAAf","sourcesContent":["/* global axios */\nimport ApiClient from './ApiClient';\n\nexport const buildContactParams = (page, sortAttr, label, search) => {\n  let params = `include_contact_inboxes=false&page=${page}&sort=${sortAttr}`;\n  if (search) {\n    params = `${params}&q=${search}`;\n  }\n  if (label) {\n    params = `${params}&labels[]=${label}`;\n  }\n  return params;\n};\n\nclass ContactAPI extends ApiClient {\n  constructor() {\n    super('contacts', { accountScoped: true });\n  }\n\n  get(page, sortAttr = 'name', label = '') {\n    let requestURL = `${this.url}?${buildContactParams(\n      page,\n      sortAttr,\n      label,\n      ''\n    )}`;\n    return axios.get(requestURL);\n  }\n\n  getConversations(contactId) {\n    return axios.get(`${this.url}/${contactId}/conversations`);\n  }\n\n  getContactableInboxes(contactId) {\n    return axios.get(`${this.url}/${contactId}/contactable_inboxes`);\n  }\n\n  getContactLabels(contactId) {\n    return axios.get(`${this.url}/${contactId}/labels`);\n  }\n\n  updateContactLabels(contactId, labels) {\n    return axios.post(`${this.url}/${contactId}/labels`, { labels });\n  }\n\n  search(search = '', page = 1, sortAttr = 'name', label = '') {\n    let requestURL = `${this.url}/search?${buildContactParams(\n      page,\n      sortAttr,\n      label,\n      search\n    )}`;\n    return axios.get(requestURL);\n  }\n\n  filter(page = 1, sortAttr = 'name', queryPayload) {\n    let requestURL = `${this.url}/filter?${buildContactParams(page, sortAttr)}`;\n    return axios.post(requestURL, queryPayload);\n  }\n\n  importContacts(file) {\n    const formData = new FormData();\n    formData.append('import_file', file);\n    return axios.post(`${this.url}/import`, formData, {\n      headers: { 'Content-Type': 'multipart/form-data' },\n    });\n  }\n\n  destroyCustomAttributes(contactId, customAttributes) {\n    return axios.post(`${this.url}/${contactId}/destroy_custom_attributes`, {\n      custom_attributes: customAttributes,\n    });\n  }\n\n  destroyAvatar(contactId) {\n    return axios.delete(`${this.url}/${contactId}/avatar`);\n  }\n}\n\nexport default new ContactAPI();\n"]},"metadata":{},"sourceType":"module"}