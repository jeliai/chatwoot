{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptors.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ActionInput from 'dashboard/components/widgets/AutomationActionInput';\nimport MacroActionButton from './ActionButton.vue';\nimport macrosMixin from 'dashboard/mixins/macrosMixin';\nimport { mapGetters } from 'vuex';\nexport default {\n  components: {\n    ActionInput: ActionInput,\n    MacroActionButton: MacroActionButton\n  },\n  mixins: [macrosMixin],\n  inject: ['macroActionTypes', '$v'],\n  props: {\n    singleNode: {\n      type: Boolean,\n      default: false\n    },\n    value: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    index: {\n      type: Number,\n      default: 0\n    },\n    fileName: {\n      type: String,\n      default: ''\n    }\n  },\n  computed: _objectSpread(_objectSpread({}, mapGetters({\n    labels: 'labels/getLabels',\n    teams: 'teams/getTeams',\n    agents: 'agents/getAgents'\n  })), {}, {\n    actionData: {\n      get: function get() {\n        return this.value;\n      },\n      set: function set(value) {\n        this.$emit('input', value);\n      }\n    },\n    showActionInput: function showActionInput() {\n      var _this = this;\n\n      if (this.actionData.action_name === 'send_email_to_team' || this.actionData.action_name === 'send_message') return false;\n      var type = this.macroActionTypes.find(function (action) {\n        return action.key === _this.actionData.action_name;\n      }).inputType;\n      return !!type;\n    }\n  }),\n  methods: {\n    dropdownValues: function dropdownValues() {\n      return this.getDropdownValues(this.value.action_name, this.$store);\n    },\n    hasError: function hasError(v) {\n      return !!(v.action_params.$dirty && v.action_params.$error);\n    }\n  }\n};","map":{"version":3,"sources":["MacroNode.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA,OAAA,WAAA,MAAA,oDAAA;AACA,OAAA,iBAAA,MAAA,oBAAA;AACA,OAAA,WAAA,MAAA,8BAAA;AACA,SAAA,UAAA,QAAA,MAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,WAAA,EAAA,WADA;AAEA,IAAA,iBAAA,EAAA;AAFA,GADA;AAKA,EAAA,MAAA,EAAA,CAAA,WAAA,CALA;AAMA,EAAA,MAAA,EAAA,CAAA,kBAAA,EAAA,IAAA,CANA;AAOA,EAAA,KAAA,EAAA;AACA,IAAA,UAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KADA;AAKA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAAA,eAAA,EAAA;AAAA;AAFA,KALA;AASA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KATA;AAaA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AAbA,GAPA;AAyBA,EAAA,QAAA,kCACA,UAAA,CAAA;AACA,IAAA,MAAA,EAAA,kBADA;AAEA,IAAA,KAAA,EAAA,gBAFA;AAGA,IAAA,MAAA,EAAA;AAHA,GAAA,CADA;AAMA,IAAA,UAAA,EAAA;AACA,MAAA,GADA,iBACA;AACA,eAAA,KAAA,KAAA;AACA,OAHA;AAIA,MAAA,GAJA,eAIA,KAJA,EAIA;AACA,aAAA,KAAA,CAAA,OAAA,EAAA,KAAA;AACA;AANA,KANA;AAcA,IAAA,eAdA,6BAcA;AAAA;;AACA,UACA,KAAA,UAAA,CAAA,WAAA,KAAA,oBAAA,IACA,KAAA,UAAA,CAAA,WAAA,KAAA,cAFA,EAIA,OAAA,KAAA;AACA,UAAA,IAAA,GAAA,KAAA,gBAAA,CAAA,IAAA,CACA,UAAA,MAAA;AAAA,eAAA,MAAA,CAAA,GAAA,KAAA,KAAA,CAAA,UAAA,CAAA,WAAA;AAAA,OADA,EAEA,SAFA;AAGA,aAAA,CAAA,CAAA,IAAA;AACA;AAxBA,IAzBA;AAmDA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,4BACA;AACA,aAAA,KAAA,iBAAA,CAAA,KAAA,KAAA,CAAA,WAAA,EAAA,KAAA,MAAA,CAAA;AACA,KAHA;AAIA,IAAA,QAJA,oBAIA,CAJA,EAIA;AACA,aAAA,CAAA,EAAA,CAAA,CAAA,aAAA,CAAA,MAAA,IAAA,CAAA,CAAA,aAAA,CAAA,MAAA,CAAA;AACA;AANA;AAnDA,CAAA","sourcesContent":["<template>\n  <div class=\"macro__node-action-container\">\n    <fluent-icon\n      v-if=\"!singleNode\"\n      size=\"20\"\n      icon=\"navigation\"\n      class=\"macros__node-drag-handle\"\n    />\n    <div\n      class=\"macro__node-action-item\"\n      :class=\"{\n        'has-error': hasError($v.macro.actions.$each[index]),\n      }\"\n    >\n      <action-input\n        v-model=\"actionData\"\n        :action-types=\"macroActionTypes\"\n        :dropdown-values=\"dropdownValues()\"\n        :show-action-input=\"showActionInput\"\n        :show-remove-button=\"false\"\n        :is-macro=\"true\"\n        :v=\"$v.macro.actions.$each[index]\"\n        :initial-file-name=\"fileName\"\n        @resetAction=\"$emit('resetAction')\"\n      />\n      <macro-action-button\n        v-if=\"!singleNode\"\n        icon=\"dismiss-circle\"\n        class=\"macro__node macro__node-action-button-delete\"\n        type=\"delete\"\n        :tooltip=\"$t('MACROS.EDITOR.DELETE_BTN_TOOLTIP')\"\n        @click=\"$emit('deleteNode')\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport ActionInput from 'dashboard/components/widgets/AutomationActionInput';\nimport MacroActionButton from './ActionButton.vue';\nimport macrosMixin from 'dashboard/mixins/macrosMixin';\nimport { mapGetters } from 'vuex';\n\nexport default {\n  components: {\n    ActionInput,\n    MacroActionButton,\n  },\n  mixins: [macrosMixin],\n  inject: ['macroActionTypes', '$v'],\n  props: {\n    singleNode: {\n      type: Boolean,\n      default: false,\n    },\n    value: {\n      type: Object,\n      default: () => ({}),\n    },\n    index: {\n      type: Number,\n      default: 0,\n    },\n    fileName: {\n      type: String,\n      default: '',\n    },\n  },\n  computed: {\n    ...mapGetters({\n      labels: 'labels/getLabels',\n      teams: 'teams/getTeams',\n      agents: 'agents/getAgents',\n    }),\n    actionData: {\n      get() {\n        return this.value;\n      },\n      set(value) {\n        this.$emit('input', value);\n      },\n    },\n    showActionInput() {\n      if (\n        this.actionData.action_name === 'send_email_to_team' ||\n        this.actionData.action_name === 'send_message'\n      )\n        return false;\n      const type = this.macroActionTypes.find(\n        action => action.key === this.actionData.action_name\n      ).inputType;\n      return !!type;\n    },\n  },\n  methods: {\n    dropdownValues() {\n      return this.getDropdownValues(this.value.action_name, this.$store);\n    },\n    hasError(v) {\n      return !!(v.action_params.$dirty && v.action_params.$error);\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.macro__node-action-container {\n  position: relative;\n  .macros__node-drag-handle {\n    position: absolute;\n    left: var(--space-minus-medium);\n    top: var(--space-smaller);\n    cursor: move;\n    color: var(--s-400);\n  }\n  .macro__node-action-item {\n    background-color: var(--white);\n    padding: var(--space-slab);\n    border-radius: var(--border-radius-medium);\n    box-shadow: rgb(0 0 0 / 3%) 0px 6px 24px 0px,\n      rgb(0 0 0 / 6%) 0px 0px 0px 1px;\n\n    .macro__node-action-button-delete {\n      display: none;\n    }\n    &:hover {\n      .macro__node-action-button-delete {\n        display: flex;\n      }\n    }\n    &.has-error {\n      animation: shake 0.3s ease-in-out 0s 2;\n      background-color: var(--r-50);\n    }\n  }\n}\n\n@keyframes shake {\n  0% {\n    transform: translateX(0);\n  }\n  25% {\n    transform: translateX(0.375rem);\n  }\n  50% {\n    transform: translateX(-0.375rem);\n  }\n  75% {\n    transform: translateX(0.375rem);\n  }\n  100% {\n    transform: translateX(0);\n  }\n}\n</style>\n"],"sourceRoot":"app/javascript/dashboard/routes/dashboard/settings/macros"},"metadata":{},"sourceType":"module"}