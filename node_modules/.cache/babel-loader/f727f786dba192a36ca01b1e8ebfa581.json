{"ast":null,"code":"import \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptors.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport AutomationActionTeamMessageInput from './AutomationActionTeamMessageInput.vue';\nimport AutomationActionFileInput from './AutomationFileInput.vue';\nexport default {\n  components: {\n    AutomationActionTeamMessageInput: AutomationActionTeamMessageInput,\n    AutomationActionFileInput: AutomationActionFileInput\n  },\n  props: {\n    value: {\n      type: Object,\n      default: function _default() {\n        return null;\n      }\n    },\n    actionTypes: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    dropdownValues: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    v: {\n      type: Object,\n      default: function _default() {\n        return null;\n      }\n    },\n    showActionInput: {\n      type: Boolean,\n      default: true\n    },\n    initialFileName: {\n      type: String,\n      default: ''\n    },\n    isMacro: {\n      type: Boolean,\n      default: false\n    }\n  },\n  computed: {\n    action_name: {\n      get: function get() {\n        if (!this.value) return null;\n        return this.value.action_name;\n      },\n      set: function set(value) {\n        var payload = this.value || {};\n        this.$emit('input', _objectSpread(_objectSpread({}, payload), {}, {\n          action_name: value\n        }));\n      }\n    },\n    action_params: {\n      get: function get() {\n        if (!this.value) return null;\n        return this.value.action_params;\n      },\n      set: function set(value) {\n        var payload = this.value || {};\n        this.$emit('input', _objectSpread(_objectSpread({}, payload), {}, {\n          action_params: value\n        }));\n      }\n    },\n    inputType: function inputType() {\n      var _this = this;\n\n      return this.actionTypes.find(function (action) {\n        return action.key === _this.action_name;\n      }).inputType;\n    },\n    actionInputStyles: function actionInputStyles() {\n      return {\n        'has-error': this.v.action_params.$dirty && this.v.action_params.$error,\n        'is-a-macro': this.isMacro\n      };\n    }\n  },\n  methods: {\n    removeAction: function removeAction() {\n      this.$emit('removeAction');\n    },\n    resetAction: function resetAction() {\n      this.$emit('resetAction');\n    }\n  }\n};","map":{"version":3,"sources":["AutomationActionInput.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2GA,OAAA,gCAAA,MAAA,wCAAA;AACA,OAAA,yBAAA,MAAA,2BAAA;AACA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,gCAAA,EAAA,gCADA;AAEA,IAAA,yBAAA,EAAA;AAFA,GADA;AAKA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAAA,eAAA,IAAA;AAAA;AAFA,KADA;AAKA,IAAA,WAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA;AAAA,eAAA,EAAA;AAAA;AAFA,KALA;AASA,IAAA,cAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA;AAAA,eAAA,EAAA;AAAA;AAFA,KATA;AAaA,IAAA,CAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAAA,eAAA,IAAA;AAAA;AAFA,KAbA;AAiBA,IAAA,eAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAjBA;AAqBA,IAAA,eAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KArBA;AAyBA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA;AAzBA,GALA;AAmCA,EAAA,QAAA,EAAA;AACA,IAAA,WAAA,EAAA;AACA,MAAA,GADA,iBACA;AACA,YAAA,CAAA,KAAA,KAAA,EAAA,OAAA,IAAA;AACA,eAAA,KAAA,KAAA,CAAA,WAAA;AACA,OAJA;AAKA,MAAA,GALA,eAKA,KALA,EAKA;AACA,YAAA,OAAA,GAAA,KAAA,KAAA,IAAA,EAAA;AACA,aAAA,KAAA,CAAA,OAAA,kCAAA,OAAA;AAAA,UAAA,WAAA,EAAA;AAAA;AACA;AARA,KADA;AAWA,IAAA,aAAA,EAAA;AACA,MAAA,GADA,iBACA;AACA,YAAA,CAAA,KAAA,KAAA,EAAA,OAAA,IAAA;AACA,eAAA,KAAA,KAAA,CAAA,aAAA;AACA,OAJA;AAKA,MAAA,GALA,eAKA,KALA,EAKA;AACA,YAAA,OAAA,GAAA,KAAA,KAAA,IAAA,EAAA;AACA,aAAA,KAAA,CAAA,OAAA,kCAAA,OAAA;AAAA,UAAA,aAAA,EAAA;AAAA;AACA;AARA,KAXA;AAqBA,IAAA,SArBA,uBAqBA;AAAA;;AACA,aAAA,KAAA,WAAA,CAAA,IAAA,CAAA,UAAA,MAAA;AAAA,eAAA,MAAA,CAAA,GAAA,KAAA,KAAA,CAAA,WAAA;AAAA,OAAA,EACA,SADA;AAEA,KAxBA;AAyBA,IAAA,iBAzBA,+BAyBA;AACA,aAAA;AACA,qBAAA,KAAA,CAAA,CAAA,aAAA,CAAA,MAAA,IAAA,KAAA,CAAA,CAAA,aAAA,CAAA,MADA;AAEA,sBAAA,KAAA;AAFA,OAAA;AAIA;AA9BA,GAnCA;AAmEA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,0BACA;AACA,WAAA,KAAA,CAAA,cAAA;AACA,KAHA;AAIA,IAAA,WAJA,yBAIA;AACA,WAAA,KAAA,CAAA,aAAA;AACA;AANA;AAnEA,CAAA","sourcesContent":["<template>\n  <div class=\"filter\" :class=\"actionInputStyles\">\n    <div class=\"filter-inputs\">\n      <select\n        v-model=\"action_name\"\n        class=\"action__question\"\n        :class=\"{ 'full-width': !showActionInput }\"\n        @change=\"resetAction()\"\n      >\n        <option\n          v-for=\"attribute in actionTypes\"\n          :key=\"attribute.key\"\n          :value=\"attribute.key\"\n        >\n          {{ attribute.label }}\n        </option>\n      </select>\n      <div v-if=\"showActionInput\" class=\"filter__answer--wrap\">\n        <div v-if=\"inputType\">\n          <div\n            v-if=\"inputType === 'search_select'\"\n            class=\"multiselect-wrap--small\"\n          >\n            <multiselect\n              v-model=\"action_params\"\n              track-by=\"id\"\n              label=\"name\"\n              :placeholder=\"$t('FORMS.MULTISELECT.SELECT')\"\n              selected-label\n              :select-label=\"$t('FORMS.MULTISELECT.ENTER_TO_SELECT')\"\n              deselect-label=\"\"\n              :max-height=\"160\"\n              :options=\"dropdownValues\"\n              :allow-empty=\"false\"\n              :option-height=\"104\"\n            />\n          </div>\n          <div\n            v-else-if=\"inputType === 'multi_select'\"\n            class=\"multiselect-wrap--small\"\n          >\n            <multiselect\n              v-model=\"action_params\"\n              track-by=\"id\"\n              label=\"name\"\n              :placeholder=\"$t('FORMS.MULTISELECT.SELECT')\"\n              :multiple=\"true\"\n              selected-label\n              :select-label=\"$t('FORMS.MULTISELECT.ENTER_TO_SELECT')\"\n              deselect-label=\"\"\n              :max-height=\"160\"\n              :options=\"dropdownValues\"\n              :allow-empty=\"false\"\n              :option-height=\"104\"\n            />\n          </div>\n          <input\n            v-else-if=\"inputType === 'email'\"\n            v-model=\"action_params\"\n            type=\"email\"\n            class=\"answer--text-input\"\n            placeholder=\"Enter email\"\n          />\n          <input\n            v-else-if=\"inputType === 'url'\"\n            v-model=\"action_params\"\n            type=\"url\"\n            class=\"answer--text-input\"\n            placeholder=\"Enter url\"\n          />\n          <automation-action-file-input\n            v-if=\"inputType === 'attachment'\"\n            v-model=\"action_params\"\n            :initial-file-name=\"initialFileName\"\n          />\n        </div>\n      </div>\n      <woot-button\n        v-if=\"!isMacro\"\n        icon=\"dismiss\"\n        variant=\"clear\"\n        color-scheme=\"secondary\"\n        @click=\"removeAction\"\n      />\n    </div>\n    <automation-action-team-message-input\n      v-if=\"inputType === 'team_message'\"\n      v-model=\"action_params\"\n      :teams=\"dropdownValues\"\n    />\n    <textarea\n      v-if=\"inputType === 'textarea'\"\n      v-model=\"action_params\"\n      rows=\"4\"\n      :placeholder=\"$t('AUTOMATION.ACTION.TEAM_MESSAGE_INPUT_PLACEHOLDER')\"\n      class=\"action-message\"\n    />\n    <p\n      v-if=\"v.action_params.$dirty && v.action_params.$error\"\n      class=\"filter-error\"\n    >\n      {{ $t('FILTER.EMPTY_VALUE_ERROR') }}\n    </p>\n  </div>\n</template>\n\n<script>\nimport AutomationActionTeamMessageInput from './AutomationActionTeamMessageInput.vue';\nimport AutomationActionFileInput from './AutomationFileInput.vue';\nexport default {\n  components: {\n    AutomationActionTeamMessageInput,\n    AutomationActionFileInput,\n  },\n  props: {\n    value: {\n      type: Object,\n      default: () => null,\n    },\n    actionTypes: {\n      type: Array,\n      default: () => [],\n    },\n    dropdownValues: {\n      type: Array,\n      default: () => [],\n    },\n    v: {\n      type: Object,\n      default: () => null,\n    },\n    showActionInput: {\n      type: Boolean,\n      default: true,\n    },\n    initialFileName: {\n      type: String,\n      default: '',\n    },\n    isMacro: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  computed: {\n    action_name: {\n      get() {\n        if (!this.value) return null;\n        return this.value.action_name;\n      },\n      set(value) {\n        const payload = this.value || {};\n        this.$emit('input', { ...payload, action_name: value });\n      },\n    },\n    action_params: {\n      get() {\n        if (!this.value) return null;\n        return this.value.action_params;\n      },\n      set(value) {\n        const payload = this.value || {};\n        this.$emit('input', { ...payload, action_params: value });\n      },\n    },\n    inputType() {\n      return this.actionTypes.find(action => action.key === this.action_name)\n        .inputType;\n    },\n    actionInputStyles() {\n      return {\n        'has-error': this.v.action_params.$dirty && this.v.action_params.$error,\n        'is-a-macro': this.isMacro,\n      };\n    },\n  },\n  methods: {\n    removeAction() {\n      this.$emit('removeAction');\n    },\n    resetAction() {\n      this.$emit('resetAction');\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.filter {\n  background: var(--color-background);\n  padding: var(--space-small);\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius-medium);\n  margin-bottom: var(--space-small);\n\n  &.is-a-macro {\n    margin-bottom: 0;\n    background: var(--white);\n    padding: var(--space-zero);\n    border: unset;\n    border-radius: unset;\n  }\n}\n\n.no-margin-bottom {\n  margin-bottom: 0;\n}\n\n.filter.has-error {\n  background: var(--r-50);\n}\n\n.filter-inputs {\n  display: flex;\n}\n\n.filter-error {\n  color: var(--r-500);\n  display: block;\n  margin: var(--space-smaller) 0;\n}\n\n.action__question,\n.filter__operator {\n  margin-bottom: var(--space-zero);\n  margin-right: var(--space-smaller);\n}\n\n.action__question {\n  max-width: 50%;\n}\n\n.action__question.full-width {\n  max-width: 100%;\n}\n\n.filter__answer--wrap {\n  margin-right: var(--space-smaller);\n  flex-grow: 1;\n  max-width: 50%;\n\n  input {\n    margin-bottom: 0;\n  }\n}\n.filter__answer {\n  &.answer--text-input {\n    margin-bottom: var(--space-zero);\n  }\n}\n\n.filter__join-operator-wrap {\n  position: relative;\n  z-index: var(--z-index-twenty);\n  margin: var(--space-zero);\n}\n\n.filter__join-operator {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  margin: var(--space-one) var(--space-zero);\n\n  .operator__line {\n    position: absolute;\n    width: 100%;\n    border-bottom: 1px solid var(--color-border);\n  }\n\n  .operator__select {\n    position: relative;\n    width: auto;\n    margin-bottom: var(--space-zero) !important;\n  }\n}\n\n.multiselect {\n  margin-bottom: var(--space-zero);\n}\n.action-message {\n  margin: var(--space-small) var(--space-zero) var(--space-zero);\n}\n</style>\n"],"sourceRoot":"app/javascript/dashboard/components/widgets"},"metadata":{},"sourceType":"module"}