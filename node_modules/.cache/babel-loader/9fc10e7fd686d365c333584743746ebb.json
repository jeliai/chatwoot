{"ast":null,"code":"function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptors.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.array.slice.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { frontendURL } from '../../../helper/URLHelper';\nimport SecondaryNavItem from './SecondaryNavItem.vue';\nimport AccountContext from './AccountContext.vue';\nimport { mapGetters } from 'vuex';\nimport { FEATURE_FLAGS } from '../../../featureFlags';\nexport default {\n  components: {\n    AccountContext: AccountContext,\n    SecondaryNavItem: SecondaryNavItem\n  },\n  props: {\n    accountId: {\n      type: Number,\n      default: 0\n    },\n    labels: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    inboxes: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    teams: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    customViews: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    menuConfig: {\n      type: Object,\n      default: function _default() {}\n    },\n    currentRole: {\n      type: String,\n      default: ''\n    },\n    isOnChatwootCloud: {\n      type: Boolean,\n      default: false\n    }\n  },\n  computed: _objectSpread(_objectSpread({}, mapGetters({\n    isFeatureEnabledonAccount: 'accounts/isFeatureEnabledonAccount'\n  })), {}, {\n    hasSecondaryMenu: function hasSecondaryMenu() {\n      return this.menuConfig.menuItems && this.menuConfig.menuItems.length;\n    },\n    contactCustomViews: function contactCustomViews() {\n      return this.customViews.filter(function (view) {\n        return view.filter_type === 'contact';\n      });\n    },\n    accessibleMenuItems: function accessibleMenuItems() {\n      var _this = this;\n\n      if (!this.currentRole) {\n        return [];\n      }\n\n      var menuItemsFilteredByRole = this.menuConfig.menuItems.filter(function (menuItem) {\n        return window.roleWiseRoutes[_this.currentRole].indexOf(menuItem.toStateName) > -1;\n      });\n      return menuItemsFilteredByRole.filter(function (item) {\n        if (item.showOnlyOnCloud) {\n          return _this.isOnChatwootCloud;\n        }\n\n        return true;\n      });\n    },\n    inboxSection: function inboxSection() {\n      var _this2 = this;\n\n      return {\n        icon: 'folder',\n        label: 'INBOXES',\n        hasSubMenu: true,\n        newLink: this.showNewLink(FEATURE_FLAGS.INBOX_MANAGEMENT),\n        newLinkTag: 'NEW_INBOX',\n        key: 'inbox',\n        toState: frontendURL(\"accounts/\".concat(this.accountId, \"/settings/inboxes/new\")),\n        toStateName: 'settings_inbox_new',\n        newLinkRouteName: 'settings_inbox_new',\n        children: this.inboxes.map(function (inbox) {\n          return {\n            id: inbox.id,\n            label: inbox.name,\n            truncateLabel: true,\n            toState: frontendURL(\"accounts/\".concat(_this2.accountId, \"/inbox/\").concat(inbox.id)),\n            type: inbox.channel_type,\n            phoneNumber: inbox.phone_number,\n            reauthorizationRequired: inbox.reauthorization_required\n          };\n        }).sort(function (a, b) {\n          return a.label.toLowerCase() > b.label.toLowerCase() ? 1 : -1;\n        })\n      };\n    },\n    labelSection: function labelSection() {\n      var _this3 = this;\n\n      return {\n        icon: 'number-symbol',\n        label: 'LABELS',\n        hasSubMenu: true,\n        newLink: this.showNewLink(FEATURE_FLAGS.TEAM_MANAGEMENT),\n        newLinkTag: 'NEW_LABEL',\n        key: 'label',\n        toState: frontendURL(\"accounts/\".concat(this.accountId, \"/settings/labels\")),\n        toStateName: 'labels_list',\n        showModalForNewItem: true,\n        modalName: 'AddLabel',\n        children: this.labels.map(function (label) {\n          return {\n            id: label.id,\n            label: label.title,\n            color: label.color,\n            truncateLabel: true,\n            toState: frontendURL(\"accounts/\".concat(_this3.accountId, \"/label/\").concat(label.title))\n          };\n        })\n      };\n    },\n    contactLabelSection: function contactLabelSection() {\n      var _this4 = this;\n\n      return {\n        icon: 'number-symbol',\n        label: 'TAGGED_WITH',\n        hasSubMenu: true,\n        key: 'label',\n        newLink: this.showNewLink(FEATURE_FLAGS.TEAM_MANAGEMENT),\n        newLinkTag: 'NEW_LABEL',\n        toState: frontendURL(\"accounts/\".concat(this.accountId, \"/settings/labels\")),\n        toStateName: 'labels_list',\n        showModalForNewItem: true,\n        modalName: 'AddLabel',\n        children: this.labels.map(function (label) {\n          return {\n            id: label.id,\n            label: label.title,\n            color: label.color,\n            truncateLabel: true,\n            toState: frontendURL(\"accounts/\".concat(_this4.accountId, \"/labels/\").concat(label.title, \"/contacts\"))\n          };\n        })\n      };\n    },\n    teamSection: function teamSection() {\n      var _this5 = this;\n\n      return {\n        icon: 'people-team',\n        label: 'TEAMS',\n        hasSubMenu: true,\n        newLink: this.showNewLink(FEATURE_FLAGS.TEAM_MANAGEMENT),\n        newLinkTag: 'NEW_TEAM',\n        key: 'team',\n        toState: frontendURL(\"accounts/\".concat(this.accountId, \"/settings/teams/new\")),\n        toStateName: 'settings_teams_new',\n        newLinkRouteName: 'settings_teams_new',\n        children: this.teams.map(function (team) {\n          return {\n            id: team.id,\n            label: team.name,\n            truncateLabel: true,\n            toState: frontendURL(\"accounts/\".concat(_this5.accountId, \"/team/\").concat(team.id))\n          };\n        })\n      };\n    },\n    foldersSection: function foldersSection() {\n      var _this6 = this;\n\n      return {\n        icon: 'folder',\n        label: 'CUSTOM_VIEWS_FOLDER',\n        hasSubMenu: true,\n        key: 'custom_view',\n        children: this.customViews.filter(function (view) {\n          return view.filter_type === 'conversation';\n        }).map(function (view) {\n          return {\n            id: view.id,\n            label: view.name,\n            truncateLabel: true,\n            toState: frontendURL(\"accounts/\".concat(_this6.accountId, \"/custom_view/\").concat(view.id))\n          };\n        })\n      };\n    },\n    contactSegmentsSection: function contactSegmentsSection() {\n      var _this7 = this;\n\n      return {\n        icon: 'folder',\n        label: 'CUSTOM_VIEWS_SEGMENTS',\n        hasSubMenu: true,\n        key: 'custom_view',\n        children: this.customViews.filter(function (view) {\n          return view.filter_type === 'contact';\n        }).map(function (view) {\n          return {\n            id: view.id,\n            label: view.name,\n            truncateLabel: true,\n            toState: frontendURL(\"accounts/\".concat(_this7.accountId, \"/contacts/custom_view/\").concat(view.id))\n          };\n        })\n      };\n    },\n    additionalSecondaryMenuItems: function additionalSecondaryMenuItems() {\n      var conversationMenuItems = [this.inboxSection, this.labelSection];\n      var contactMenuItems = [this.contactLabelSection];\n\n      if (this.teams.length) {\n        conversationMenuItems = [this.teamSection].concat(_toConsumableArray(conversationMenuItems));\n      }\n\n      if (this.customViews.length) {\n        conversationMenuItems = [this.foldersSection].concat(_toConsumableArray(conversationMenuItems));\n      }\n\n      if (this.contactCustomViews.length) {\n        contactMenuItems = [this.contactSegmentsSection].concat(_toConsumableArray(contactMenuItems));\n      }\n\n      return {\n        conversations: conversationMenuItems,\n        contacts: contactMenuItems\n      };\n    }\n  }),\n  methods: {\n    showAddLabelPopup: function showAddLabelPopup() {\n      this.$emit('add-label');\n    },\n    toggleAccountModal: function toggleAccountModal() {\n      this.$emit('toggle-accounts');\n    },\n    showNewLink: function showNewLink(featureFlag) {\n      return this.isFeatureEnabledonAccount(this.accountId, featureFlag);\n    }\n  }\n};","map":{"version":3,"sources":["Secondary.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div v-if=\"hasSecondaryMenu\" class=\"main-nav secondary-menu\">\n    <account-context @toggle-accounts=\"toggleAccountModal\" />\n    <transition-group name=\"menu-list\" tag=\"ul\" class=\"menu vertical\">\n      <secondary-nav-item\n        v-for=\"menuItem in accessibleMenuItems\"\n        :key=\"menuItem.toState\"\n        :menu-item=\"menuItem\"\n      />\n      <secondary-nav-item\n        v-for=\"menuItem in additionalSecondaryMenuItems[menuConfig.parentNav]\"\n        :key=\"menuItem.key\"\n        :menu-item=\"menuItem\"\n        @add-label=\"showAddLabelPopup\"\n      />\n    </transition-group>\n  </div>\n</template>\n<script>\nimport { frontendURL } from '../../../helper/URLHelper';\nimport SecondaryNavItem from './SecondaryNavItem.vue';\nimport AccountContext from './AccountContext.vue';\nimport { mapGetters } from 'vuex';\nimport { FEATURE_FLAGS } from '../../../featureFlags';\n\nexport default {\n  components: {\n    AccountContext,\n    SecondaryNavItem,\n  },\n  props: {\n    accountId: {\n      type: Number,\n      default: 0,\n    },\n    labels: {\n      type: Array,\n      default: () => [],\n    },\n    inboxes: {\n      type: Array,\n      default: () => [],\n    },\n    teams: {\n      type: Array,\n      default: () => [],\n    },\n    customViews: {\n      type: Array,\n      default: () => [],\n    },\n    menuConfig: {\n      type: Object,\n      default: () => {},\n    },\n    currentRole: {\n      type: String,\n      default: '',\n    },\n    isOnChatwootCloud: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  computed: {\n    ...mapGetters({\n      isFeatureEnabledonAccount: 'accounts/isFeatureEnabledonAccount',\n    }),\n    hasSecondaryMenu() {\n      return this.menuConfig.menuItems && this.menuConfig.menuItems.length;\n    },\n    contactCustomViews() {\n      return this.customViews.filter(view => view.filter_type === 'contact');\n    },\n    accessibleMenuItems() {\n      if (!this.currentRole) {\n        return [];\n      }\n      const menuItemsFilteredByRole = this.menuConfig.menuItems.filter(\n        menuItem =>\n          window.roleWiseRoutes[this.currentRole].indexOf(\n            menuItem.toStateName\n          ) > -1\n      );\n      return menuItemsFilteredByRole.filter(item => {\n        if (item.showOnlyOnCloud) {\n          return this.isOnChatwootCloud;\n        }\n        return true;\n      });\n    },\n    inboxSection() {\n      return {\n        icon: 'folder',\n        label: 'INBOXES',\n        hasSubMenu: true,\n        newLink: this.showNewLink(FEATURE_FLAGS.INBOX_MANAGEMENT),\n        newLinkTag: 'NEW_INBOX',\n        key: 'inbox',\n        toState: frontendURL(`accounts/${this.accountId}/settings/inboxes/new`),\n        toStateName: 'settings_inbox_new',\n        newLinkRouteName: 'settings_inbox_new',\n        children: this.inboxes\n          .map(inbox => ({\n            id: inbox.id,\n            label: inbox.name,\n            truncateLabel: true,\n            toState: frontendURL(\n              `accounts/${this.accountId}/inbox/${inbox.id}`\n            ),\n            type: inbox.channel_type,\n            phoneNumber: inbox.phone_number,\n            reauthorizationRequired: inbox.reauthorization_required,\n          }))\n          .sort((a, b) =>\n            a.label.toLowerCase() > b.label.toLowerCase() ? 1 : -1\n          ),\n      };\n    },\n    labelSection() {\n      return {\n        icon: 'number-symbol',\n        label: 'LABELS',\n        hasSubMenu: true,\n        newLink: this.showNewLink(FEATURE_FLAGS.TEAM_MANAGEMENT),\n        newLinkTag: 'NEW_LABEL',\n        key: 'label',\n        toState: frontendURL(`accounts/${this.accountId}/settings/labels`),\n        toStateName: 'labels_list',\n        showModalForNewItem: true,\n        modalName: 'AddLabel',\n        children: this.labels.map(label => ({\n          id: label.id,\n          label: label.title,\n          color: label.color,\n          truncateLabel: true,\n          toState: frontendURL(\n            `accounts/${this.accountId}/label/${label.title}`\n          ),\n        })),\n      };\n    },\n    contactLabelSection() {\n      return {\n        icon: 'number-symbol',\n        label: 'TAGGED_WITH',\n        hasSubMenu: true,\n        key: 'label',\n        newLink: this.showNewLink(FEATURE_FLAGS.TEAM_MANAGEMENT),\n        newLinkTag: 'NEW_LABEL',\n        toState: frontendURL(`accounts/${this.accountId}/settings/labels`),\n        toStateName: 'labels_list',\n        showModalForNewItem: true,\n        modalName: 'AddLabel',\n        children: this.labels.map(label => ({\n          id: label.id,\n          label: label.title,\n          color: label.color,\n          truncateLabel: true,\n          toState: frontendURL(\n            `accounts/${this.accountId}/labels/${label.title}/contacts`\n          ),\n        })),\n      };\n    },\n    teamSection() {\n      return {\n        icon: 'people-team',\n        label: 'TEAMS',\n        hasSubMenu: true,\n        newLink: this.showNewLink(FEATURE_FLAGS.TEAM_MANAGEMENT),\n        newLinkTag: 'NEW_TEAM',\n        key: 'team',\n        toState: frontendURL(`accounts/${this.accountId}/settings/teams/new`),\n        toStateName: 'settings_teams_new',\n        newLinkRouteName: 'settings_teams_new',\n        children: this.teams.map(team => ({\n          id: team.id,\n          label: team.name,\n          truncateLabel: true,\n          toState: frontendURL(`accounts/${this.accountId}/team/${team.id}`),\n        })),\n      };\n    },\n    foldersSection() {\n      return {\n        icon: 'folder',\n        label: 'CUSTOM_VIEWS_FOLDER',\n        hasSubMenu: true,\n        key: 'custom_view',\n        children: this.customViews\n          .filter(view => view.filter_type === 'conversation')\n          .map(view => ({\n            id: view.id,\n            label: view.name,\n            truncateLabel: true,\n            toState: frontendURL(\n              `accounts/${this.accountId}/custom_view/${view.id}`\n            ),\n          })),\n      };\n    },\n    contactSegmentsSection() {\n      return {\n        icon: 'folder',\n        label: 'CUSTOM_VIEWS_SEGMENTS',\n        hasSubMenu: true,\n        key: 'custom_view',\n        children: this.customViews\n          .filter(view => view.filter_type === 'contact')\n          .map(view => ({\n            id: view.id,\n            label: view.name,\n            truncateLabel: true,\n            toState: frontendURL(\n              `accounts/${this.accountId}/contacts/custom_view/${view.id}`\n            ),\n          })),\n      };\n    },\n    additionalSecondaryMenuItems() {\n      let conversationMenuItems = [this.inboxSection, this.labelSection];\n      let contactMenuItems = [this.contactLabelSection];\n      if (this.teams.length) {\n        conversationMenuItems = [this.teamSection, ...conversationMenuItems];\n      }\n      if (this.customViews.length) {\n        conversationMenuItems = [this.foldersSection, ...conversationMenuItems];\n      }\n      if (this.contactCustomViews.length) {\n        contactMenuItems = [this.contactSegmentsSection, ...contactMenuItems];\n      }\n      return {\n        conversations: conversationMenuItems,\n        contacts: contactMenuItems,\n      };\n    },\n  },\n  methods: {\n    showAddLabelPopup() {\n      this.$emit('add-label');\n    },\n    toggleAccountModal() {\n      this.$emit('toggle-accounts');\n    },\n    showNewLink(featureFlag) {\n      return this.isFeatureEnabledonAccount(this.accountId, featureFlag);\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n@import '~dashboard/assets/scss/woot';\n\n.secondary-menu {\n  display: flex;\n  flex-direction: column;\n  background: var(--white);\n  border-right: 1px solid var(--s-50);\n  height: 100%;\n  width: 20rem;\n  flex-shrink: 0;\n  overflow-y: hidden;\n\n  @include breakpoint(xlarge down) {\n    position: absolute;\n  }\n\n  @include breakpoint(xlarge up) {\n    position: unset;\n  }\n\n  &:hover {\n    overflow-y: hidden;\n  }\n\n  .menu {\n    padding: var(--space-small);\n    overflow-y: auto;\n  }\n}\n</style>\n"],"sourceRoot":"app/javascript/dashboard/components/layout/sidebarComponents"},"metadata":{},"sourceType":"module"}