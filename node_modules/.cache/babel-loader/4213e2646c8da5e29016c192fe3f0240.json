{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.regexp.constructor.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { MESSAGE_TYPE } from 'shared/constants/messages';\nimport timeMixin from 'dashboard/mixins/time';\nimport messageFormatterMixin from 'shared/mixins/messageFormatterMixin';\nexport default {\n  mixins: [timeMixin, messageFormatterMixin],\n  props: {\n    userName: {\n      type: String,\n      default: ''\n    },\n    timestamp: {\n      type: Number,\n      default: 0\n    },\n    messageType: {\n      type: Number,\n      default: 0\n    },\n    content: {\n      type: String,\n      default: ''\n    },\n    searchTerm: {\n      type: String,\n      default: ''\n    }\n  },\n  computed: {\n    isOutgoingMessage: function isOutgoingMessage() {\n      return this.messageType === MESSAGE_TYPE.OUTGOING;\n    },\n    readableTime: function readableTime() {\n      if (!this.timestamp) {\n        return '';\n      }\n\n      return this.dynamicTime(this.timestamp);\n    }\n  },\n  methods: {\n    prepareContent: function prepareContent() {\n      var content = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var plainTextContent = this.getPlainText(content);\n      var escapedSearchTerm = this.escapeRegExp(this.searchTerm);\n      return plainTextContent.replace(new RegExp(\"(\".concat(escapedSearchTerm, \")\"), 'ig'), '<span class=\"searchkey--highlight\">$1</span>');\n    },\n    // from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#escaping\n    escapeRegExp: function escapeRegExp(string) {\n      return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    }\n  }\n};","map":{"version":3,"sources":["SearchMessageItem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAsBA,SAAA,YAAA,QAAA,2BAAA;AACA,OAAA,SAAA,MAAA,uBAAA;AACA,OAAA,qBAAA,MAAA,qCAAA;AAEA,eAAA;AACA,EAAA,MAAA,EAAA,CAAA,SAAA,EAAA,qBAAA,CADA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KADA;AAKA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KALA;AASA,IAAA,WAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KATA;AAaA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAbA;AAiBA,IAAA,UAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AAjBA,GAHA;AA0BA,EAAA,QAAA,EAAA;AACA,IAAA,iBADA,+BACA;AACA,aAAA,KAAA,WAAA,KAAA,YAAA,CAAA,QAAA;AACA,KAHA;AAIA,IAAA,YAJA,0BAIA;AACA,UAAA,CAAA,KAAA,SAAA,EAAA;AACA,eAAA,EAAA;AACA;;AACA,aAAA,KAAA,WAAA,CAAA,KAAA,SAAA,CAAA;AACA;AATA,GA1BA;AAqCA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,4BACA;AAAA,UAAA,OAAA,uEAAA,EAAA;AACA,UAAA,gBAAA,GAAA,KAAA,YAAA,CAAA,OAAA,CAAA;AACA,UAAA,iBAAA,GAAA,KAAA,YAAA,CAAA,KAAA,UAAA,CAAA;AACA,aAAA,gBAAA,CAAA,OAAA,CACA,IAAA,MAAA,YAAA,iBAAA,QAAA,IAAA,CADA,EAEA,8CAFA,CAAA;AAIA,KARA;AASA;AACA,IAAA,YAVA,wBAUA,MAVA,EAUA;AACA,aAAA,MAAA,CAAA,OAAA,CAAA,qBAAA,EAAA,MAAA,CAAA;AACA;AAZA;AArCA,CAAA","sourcesContent":["<template>\n  <div class=\"message-item\">\n    <div class=\"search-message\">\n      <div class=\"user-wrap\">\n        <div class=\"name-wrap\">\n          <span class=\"text-block-title\">{{ userName }}</span>\n          <div>\n            <fluent-icon\n              v-if=\"isOutgoingMessage\"\n              icon=\"arrow-reply\"\n              class=\"icon-outgoing\"\n            />\n          </div>\n        </div>\n        <span class=\"timestamp\">{{ readableTime }} </span>\n      </div>\n      <p v-dompurify-html=\"prepareContent(content)\" class=\"message-content\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { MESSAGE_TYPE } from 'shared/constants/messages';\nimport timeMixin from 'dashboard/mixins/time';\nimport messageFormatterMixin from 'shared/mixins/messageFormatterMixin';\n\nexport default {\n  mixins: [timeMixin, messageFormatterMixin],\n\n  props: {\n    userName: {\n      type: String,\n      default: '',\n    },\n    timestamp: {\n      type: Number,\n      default: 0,\n    },\n    messageType: {\n      type: Number,\n      default: 0,\n    },\n    content: {\n      type: String,\n      default: '',\n    },\n    searchTerm: {\n      type: String,\n      default: '',\n    },\n  },\n\n  computed: {\n    isOutgoingMessage() {\n      return this.messageType === MESSAGE_TYPE.OUTGOING;\n    },\n    readableTime() {\n      if (!this.timestamp) {\n        return '';\n      }\n      return this.dynamicTime(this.timestamp);\n    },\n  },\n  methods: {\n    prepareContent(content = '') {\n      const plainTextContent = this.getPlainText(content);\n      const escapedSearchTerm = this.escapeRegExp(this.searchTerm);\n      return plainTextContent.replace(\n        new RegExp(`(${escapedSearchTerm})`, 'ig'),\n        '<span class=\"searchkey--highlight\">$1</span>'\n      );\n    },\n    // from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#escaping\n    escapeRegExp(string) {\n      return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.message-item {\n  background: var(--color-background-light);\n  border-radius: var(--border-radius-medium);\n  color: var(--color-body);\n  margin-bottom: var(--space-small);\n  margin-left: var(--space-one);\n  padding: 0 var(--space-small);\n\n  &:hover {\n    background: var(--w-400);\n    color: var(--white);\n    .message-content::v-deep .searchkey--highlight {\n      color: var(--white);\n      text-decoration: underline;\n    }\n    .icon-outgoing {\n      color: var(--white);\n    }\n  }\n  &:last-child {\n    .search-message {\n      border-bottom: none;\n    }\n  }\n}\n\n.search-message {\n  padding: var(--space-smaller) var(--space-smaller);\n  &:hover {\n    color: var(--white);\n  }\n}\n\n.user-wrap {\n  display: flex;\n  justify-content: space-between;\n}\n\n.name-wrap {\n  display: flex;\n  max-width: 22rem;\n\n  .text-block-title {\n    font-weight: var(--font-weight-bold);\n    text-overflow: ellipsis;\n    overflow: hidden;\n    white-space: nowrap;\n  }\n}\n\n.icon-outgoing {\n  color: var(--w-500);\n  padding: var(--space-micro);\n  padding-right: var(--space-smaller);\n}\n\n.timestamp {\n  font-size: var(--font-size-mini);\n  top: var(--space-micro);\n  position: relative;\n  text-align: right;\n}\n\np {\n  max-width: 100%;\n}\n\n.message-content {\n  font-size: var(--font-size-small);\n  margin-bottom: var(--space-micro);\n  margin-top: var(--space-micro);\n  padding: 0;\n  line-height: 1.35;\n  overflow-wrap: break-word;\n}\n\n.message-content::v-deep .searchkey--highlight {\n  color: var(--w-600);\n  font-weight: var(--font-weight-bold);\n  font-size: var(--font-size-small);\n  padding: (var(--space-zero) var(--space-zero));\n}\n</style>\n"],"sourceRoot":"app/javascript/dashboard/routes/dashboard/conversation/search"},"metadata":{},"sourceType":"module"}