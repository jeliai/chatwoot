{"ast":null,"code":"import \"core-js/modules/es.array.concat.js\";\nimport { addClasses, removeClasses, toggleClass } from './DOMHelpers';\nimport { IFrameHelper } from './IFrameHelper';\nimport { isExpandedView } from './settingsHelper';\nexport var bubbleImg = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAUVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////8IN+deAAAAGnRSTlMAAwgJEBk0TVheY2R5eo+ut8jb5OXs8fX2+cjRDTIAAADsSURBVHgBldZbkoMgFIThRgQv8SKKgGf/C51UnJqaRI30/9zfe+NQUQ3TvG7bOk9DVeCmshmj/CuOTYnrdBfkUOg0zlOtl9OWVuEk4+QyZ3DIevmSt/ioTvK1VH/s5bY3YdM9SBZ/mUUyWgx+U06ycgp7D8msxSvtc4HXL9BLdj2elSEfhBJAI0QNgJEBI1BEBsQClVBVGDgwYOLAhJkDM1YOrNg4sLFAsLJgZsHEgoEFFQt0JAFGFjQsKAMJ0LFAexKgZYFyJIDxJIBNJEDNAtSJBLCeBDCOBFAPzwFA94ED+zmhwDO9358r8ANtIsMXi7qVAwAAAABJRU5ErkJggg==';\nexport var body = document.getElementsByTagName('body')[0];\nexport var widgetHolder = document.createElement('div');\nexport var bubbleHolder = document.createElement('div');\nexport var chatBubble = document.createElement('button');\nexport var closeBubble = document.createElement('button');\nexport var notificationBubble = document.createElement('span');\nexport var setBubbleText = function setBubbleText(bubbleText) {\n  if (isExpandedView(window.$chatwoot.type)) {\n    var textNode = document.getElementById('woot-widget--expanded__text');\n    textNode.innerHTML = bubbleText;\n  }\n};\nexport var createBubbleIcon = function createBubbleIcon(_ref) {\n  var className = _ref.className,\n      src = _ref.src,\n      target = _ref.target;\n  var bubbleClassName = \"\".concat(className, \" woot-elements--\").concat(window.$chatwoot.position);\n  var bubbleIcon = document.createElement('img');\n  bubbleIcon.src = src;\n  bubbleIcon.alt = 'bubble-icon';\n  target.appendChild(bubbleIcon);\n\n  if (isExpandedView(window.$chatwoot.type)) {\n    var textNode = document.createElement('div');\n    textNode.id = 'woot-widget--expanded__text';\n    textNode.innerHTML = '';\n    target.appendChild(textNode);\n    bubbleClassName += ' woot-widget--expanded';\n  }\n\n  target.className = bubbleClassName;\n  return target;\n};\nexport var createBubbleHolder = function createBubbleHolder(hideMessageBubble) {\n  if (hideMessageBubble) {\n    addClasses(bubbleHolder, 'woot-hidden');\n  }\n\n  addClasses(bubbleHolder, 'woot--bubble-holder');\n  body.appendChild(bubbleHolder);\n};\nexport var createNotificationBubble = function createNotificationBubble() {\n  addClasses(notificationBubble, 'woot--notification');\n  return notificationBubble;\n};\nexport var onBubbleClick = function onBubbleClick() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var toggleValue = props.toggleValue;\n  var isOpen = window.$chatwoot.isOpen;\n\n  if (isOpen !== toggleValue) {\n    var newIsOpen = toggleValue === undefined ? !isOpen : toggleValue;\n    window.$chatwoot.isOpen = newIsOpen;\n    toggleClass(chatBubble, 'woot--hide');\n    toggleClass(closeBubble, 'woot--hide');\n    toggleClass(widgetHolder, 'woot--hide');\n    IFrameHelper.events.onBubbleToggle(newIsOpen);\n\n    if (!newIsOpen) {\n      chatBubble.focus();\n    }\n  }\n};\nexport var onClickChatBubble = function onClickChatBubble() {\n  bubbleHolder.addEventListener('click', onBubbleClick);\n};\nexport var addUnreadClass = function addUnreadClass() {\n  var holderEl = document.querySelector('.woot-widget-holder');\n  addClasses(holderEl, 'has-unread-view');\n};\nexport var removeUnreadClass = function removeUnreadClass() {\n  var holderEl = document.querySelector('.woot-widget-holder');\n  removeClasses(holderEl, 'has-unread-view');\n};","map":{"version":3,"sources":["/Users/s.dastan/Desktop/chatwoot/chatwoot/app/javascript/sdk/bubbleHelpers.js"],"names":["addClasses","removeClasses","toggleClass","IFrameHelper","isExpandedView","bubbleImg","body","document","getElementsByTagName","widgetHolder","createElement","bubbleHolder","chatBubble","closeBubble","notificationBubble","setBubbleText","bubbleText","window","$chatwoot","type","textNode","getElementById","innerHTML","createBubbleIcon","className","src","target","bubbleClassName","position","bubbleIcon","alt","appendChild","id","createBubbleHolder","hideMessageBubble","createNotificationBubble","onBubbleClick","props","toggleValue","isOpen","newIsOpen","undefined","events","onBubbleToggle","focus","onClickChatBubble","addEventListener","addUnreadClass","holderEl","querySelector","removeUnreadClass"],"mappings":"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","sourcesContent":["import { addClasses, removeClasses, toggleClass } from './DOMHelpers';\nimport { IFrameHelper } from './IFrameHelper';\nimport { isExpandedView } from './settingsHelper';\n\nexport const bubbleImg =\n  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAUVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////8IN+deAAAAGnRSTlMAAwgJEBk0TVheY2R5eo+ut8jb5OXs8fX2+cjRDTIAAADsSURBVHgBldZbkoMgFIThRgQv8SKKgGf/C51UnJqaRI30/9zfe+NQUQ3TvG7bOk9DVeCmshmj/CuOTYnrdBfkUOg0zlOtl9OWVuEk4+QyZ3DIevmSt/ioTvK1VH/s5bY3YdM9SBZ/mUUyWgx+U06ycgp7D8msxSvtc4HXL9BLdj2elSEfhBJAI0QNgJEBI1BEBsQClVBVGDgwYOLAhJkDM1YOrNg4sLFAsLJgZsHEgoEFFQt0JAFGFjQsKAMJ0LFAexKgZYFyJIDxJIBNJEDNAtSJBLCeBDCOBFAPzwFA94ED+zmhwDO9358r8ANtIsMXi7qVAwAAAABJRU5ErkJggg==';\n\nexport const body = document.getElementsByTagName('body')[0];\nexport const widgetHolder = document.createElement('div');\n\nexport const bubbleHolder = document.createElement('div');\nexport const chatBubble = document.createElement('button');\nexport const closeBubble = document.createElement('button');\nexport const notificationBubble = document.createElement('span');\n\nexport const setBubbleText = bubbleText => {\n  if (isExpandedView(window.$chatwoot.type)) {\n    const textNode = document.getElementById('woot-widget--expanded__text');\n    textNode.innerHTML = bubbleText;\n  }\n};\n\nexport const createBubbleIcon = ({ className, src, target }) => {\n  let bubbleClassName = `${className} woot-elements--${window.$chatwoot.position}`;\n  const bubbleIcon = document.createElement('img');\n  bubbleIcon.src = src;\n  bubbleIcon.alt = 'bubble-icon';\n  target.appendChild(bubbleIcon);\n\n  if (isExpandedView(window.$chatwoot.type)) {\n    const textNode = document.createElement('div');\n    textNode.id = 'woot-widget--expanded__text';\n    textNode.innerHTML = '';\n    target.appendChild(textNode);\n    bubbleClassName += ' woot-widget--expanded';\n  }\n\n  target.className = bubbleClassName;\n  return target;\n};\n\nexport const createBubbleHolder = hideMessageBubble => {\n  if (hideMessageBubble) {\n    addClasses(bubbleHolder, 'woot-hidden');\n  }\n  addClasses(bubbleHolder, 'woot--bubble-holder');\n  body.appendChild(bubbleHolder);\n};\n\nexport const createNotificationBubble = () => {\n  addClasses(notificationBubble, 'woot--notification');\n  return notificationBubble;\n};\n\nexport const onBubbleClick = (props = {}) => {\n  const { toggleValue } = props;\n  const { isOpen } = window.$chatwoot;\n  if (isOpen !== toggleValue) {\n    const newIsOpen = toggleValue === undefined ? !isOpen : toggleValue;\n    window.$chatwoot.isOpen = newIsOpen;\n\n    toggleClass(chatBubble, 'woot--hide');\n    toggleClass(closeBubble, 'woot--hide');\n    toggleClass(widgetHolder, 'woot--hide');\n    IFrameHelper.events.onBubbleToggle(newIsOpen);\n\n    if (!newIsOpen) {\n      chatBubble.focus();\n    }\n  }\n};\n\nexport const onClickChatBubble = () => {\n  bubbleHolder.addEventListener('click', onBubbleClick);\n};\n\nexport const addUnreadClass = () => {\n  const holderEl = document.querySelector('.woot-widget-holder');\n  addClasses(holderEl, 'has-unread-view');\n};\n\nexport const removeUnreadClass = () => {\n  const holderEl = document.querySelector('.woot-widget-holder');\n  removeClasses(holderEl, 'has-unread-view');\n};\n"]},"metadata":{},"sourceType":"module"}