{"ast":null,"code":"import \"core-js/modules/es.array.concat.js\";\nimport md5 from 'md5';\nvar REQUIRED_USER_KEYS = ['avatar_url', 'email', 'name'];\nvar ALLOWED_USER_ATTRIBUTES = [].concat(REQUIRED_USER_KEYS, ['identifier_hash']);\nexport var getUserCookieName = function getUserCookieName() {\n  var SET_USER_COOKIE_PREFIX = 'cw_user_';\n  var websiteIdentifier = window.$chatwoot.websiteToken;\n  return \"\".concat(SET_USER_COOKIE_PREFIX).concat(websiteIdentifier);\n};\nexport var getUserString = function getUserString(_ref) {\n  var _ref$identifier = _ref.identifier,\n      identifier = _ref$identifier === void 0 ? '' : _ref$identifier,\n      user = _ref.user;\n  var userStringWithSortedKeys = ALLOWED_USER_ATTRIBUTES.reduce(function (acc, key) {\n    return \"\".concat(acc).concat(key).concat(user[key] || '');\n  }, '');\n  return \"\".concat(userStringWithSortedKeys, \"identifier\").concat(identifier);\n};\nexport var computeHashForUserData = function computeHashForUserData() {\n  return md5(getUserString.apply(void 0, arguments));\n};\nexport var hasUserKeys = function hasUserKeys(user) {\n  return REQUIRED_USER_KEYS.reduce(function (acc, key) {\n    return acc || !!user[key];\n  }, false);\n};","map":{"version":3,"sources":["/Users/s.dastan/Desktop/chatwoot/chatwoot/app/javascript/sdk/cookieHelpers.js"],"names":["md5","REQUIRED_USER_KEYS","ALLOWED_USER_ATTRIBUTES","getUserCookieName","SET_USER_COOKIE_PREFIX","websiteIdentifier","window","$chatwoot","websiteToken","getUserString","identifier","user","userStringWithSortedKeys","reduce","acc","key","computeHashForUserData","hasUserKeys"],"mappings":";AAAA,OAAOA,GAAP,MAAgB,KAAhB;AAEA,IAAMC,kBAAkB,GAAG,CAAC,YAAD,EAAe,OAAf,EAAwB,MAAxB,CAA3B;AACA,IAAMC,uBAAuB,aAAOD,kBAAP,GAA2B,iBAA3B,EAA7B;AAEA,OAAO,IAAME,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AACrC,MAAMC,sBAAsB,GAAG,UAA/B;AACA,MAAsBC,iBAAtB,GAA4CC,MAAM,CAACC,SAAnD,CAAQC,YAAR;AACA,mBAAUJ,sBAAV,SAAmCC,iBAAnC;AACD,CAJM;AAMP,OAAO,IAAMI,aAAa,GAAG,SAAhBA,aAAgB,OAA+B;AAAA,6BAA5BC,UAA4B;AAAA,MAA5BA,UAA4B,gCAAf,EAAe;AAAA,MAAXC,IAAW,QAAXA,IAAW;AAC1D,MAAMC,wBAAwB,GAAGV,uBAAuB,CAACW,MAAxB,CAC/B,UAACC,GAAD,EAAMC,GAAN;AAAA,qBAAiBD,GAAjB,SAAuBC,GAAvB,SAA6BJ,IAAI,CAACI,GAAD,CAAJ,IAAa,EAA1C;AAAA,GAD+B,EAE/B,EAF+B,CAAjC;AAIA,mBAAUH,wBAAV,uBAA+CF,UAA/C;AACD,CANM;AAQP,OAAO,IAAMM,sBAAsB,GAAG,SAAzBA,sBAAyB;AAAA,SAAahB,GAAG,CAACS,aAAa,MAAb,mBAAD,CAAhB;AAAA,CAA/B;AAEP,OAAO,IAAMQ,WAAW,GAAG,SAAdA,WAAc,CAAAN,IAAI;AAAA,SAC7BV,kBAAkB,CAACY,MAAnB,CAA0B,UAACC,GAAD,EAAMC,GAAN;AAAA,WAAcD,GAAG,IAAI,CAAC,CAACH,IAAI,CAACI,GAAD,CAA3B;AAAA,GAA1B,EAA4D,KAA5D,CAD6B;AAAA,CAAxB","sourcesContent":["import md5 from 'md5';\n\nconst REQUIRED_USER_KEYS = ['avatar_url', 'email', 'name'];\nconst ALLOWED_USER_ATTRIBUTES = [...REQUIRED_USER_KEYS, 'identifier_hash'];\n\nexport const getUserCookieName = () => {\n  const SET_USER_COOKIE_PREFIX = 'cw_user_';\n  const { websiteToken: websiteIdentifier } = window.$chatwoot;\n  return `${SET_USER_COOKIE_PREFIX}${websiteIdentifier}`;\n};\n\nexport const getUserString = ({ identifier = '', user }) => {\n  const userStringWithSortedKeys = ALLOWED_USER_ATTRIBUTES.reduce(\n    (acc, key) => `${acc}${key}${user[key] || ''}`,\n    ''\n  );\n  return `${userStringWithSortedKeys}identifier${identifier}`;\n};\n\nexport const computeHashForUserData = (...args) => md5(getUserString(...args));\n\nexport const hasUserKeys = user =>\n  REQUIRED_USER_KEYS.reduce((acc, key) => acc || !!user[key], false);\n"]},"metadata":{},"sourceType":"module"}