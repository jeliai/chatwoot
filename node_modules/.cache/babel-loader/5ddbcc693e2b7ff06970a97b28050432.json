{"ast":null,"code":"import \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptors.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  props: {\n    value: {\n      type: Object,\n      default: function _default() {\n        return null;\n      }\n    },\n    filterAttributes: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    inputType: {\n      type: String,\n      default: 'plain_text'\n    },\n    dataType: {\n      type: String,\n      default: 'plain_text'\n    },\n    operators: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    dropdownValues: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    showQueryOperator: {\n      type: Boolean,\n      default: false\n    },\n    v: {\n      type: Object,\n      default: function _default() {\n        return null;\n      }\n    },\n    showUserInput: {\n      type: Boolean,\n      default: true\n    },\n    groupedFilters: {\n      type: Boolean,\n      default: false\n    },\n    filterGroups: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    customAttributeType: {\n      type: String,\n      default: ''\n    }\n  },\n  computed: {\n    attributeKey: {\n      get: function get() {\n        if (!this.value) return null;\n        return this.value.attribute_key;\n      },\n      set: function set(value) {\n        var payload = this.value || {};\n        this.$emit('input', _objectSpread(_objectSpread({}, payload), {}, {\n          attribute_key: value\n        }));\n      }\n    },\n    filterOperator: {\n      get: function get() {\n        if (!this.value) return null;\n        return this.value.filter_operator;\n      },\n      set: function set(value) {\n        var payload = this.value || {};\n        this.$emit('input', _objectSpread(_objectSpread({}, payload), {}, {\n          filter_operator: value\n        }));\n      }\n    },\n    values: {\n      get: function get() {\n        if (!this.value) return null;\n        return this.value.values;\n      },\n      set: function set(value) {\n        var payload = this.value || {};\n        this.$emit('input', _objectSpread(_objectSpread({}, payload), {}, {\n          values: value\n        }));\n      }\n    },\n    query_operator: {\n      get: function get() {\n        if (!this.value) return null;\n        return this.value.query_operator;\n      },\n      set: function set(value) {\n        var payload = this.value || {};\n        this.$emit('input', _objectSpread(_objectSpread({}, payload), {}, {\n          query_operator: value\n        }));\n      }\n    },\n    custom_attribute_type: {\n      get: function get() {\n        if (!this.customAttributeType) return '';\n        return this.customAttributeType;\n      },\n      set: function set() {\n        var payload = this.value || {};\n        this.$emit('input', _objectSpread(_objectSpread({}, payload), {}, {\n          custom_attribute_type: this.customAttributeType\n        }));\n      }\n    }\n  },\n  watch: {\n    customAttributeType: {\n      handler: function handler(value) {\n        if (value === 'conversation_attribute' || value === 'contact_attribute') {\n          this.value.custom_attribute_type = this.customAttributeType;\n        } else this.value.custom_attribute_type = '';\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    removeFilter: function removeFilter() {\n      this.$emit('removeFilter');\n    },\n    resetFilter: function resetFilter() {\n      this.$emit('resetFilter');\n    }\n  }\n};","map":{"version":3,"sources":["Index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"filters\">\n    <div class=\"filter\" :class=\"{ error: v.values.$dirty && v.values.$error }\">\n      <div class=\"filter-inputs\">\n        <select\n          v-if=\"groupedFilters\"\n          v-model=\"attributeKey\"\n          class=\"filter__question\"\n          @change=\"resetFilter()\"\n        >\n          <optgroup\n            v-for=\"(group, i) in filterGroups\"\n            :key=\"i\"\n            :label=\"group.name\"\n          >\n            <option\n              v-for=\"attribute in group.attributes\"\n              :key=\"attribute.key\"\n              :value=\"attribute.key\"\n            >\n              {{ attribute.name }}\n            </option>\n          </optgroup>\n        </select>\n        <select\n          v-else\n          v-model=\"attributeKey\"\n          class=\"filter__question\"\n          @change=\"resetFilter()\"\n        >\n          <option\n            v-for=\"attribute in filterAttributes\"\n            :key=\"attribute.key\"\n            :value=\"attribute.key\"\n            :disabled=\"attribute.disabled\"\n          >\n            {{ attribute.name }}\n          </option>\n        </select>\n\n        <select v-model=\"filterOperator\" class=\"filter__operator\">\n          <option\n            v-for=\"(operator, o) in operators\"\n            :key=\"o\"\n            :value=\"operator.value\"\n          >\n            {{ $t(`FILTER.OPERATOR_LABELS.${operator.value}`) }}\n          </option>\n        </select>\n\n        <div v-if=\"showUserInput\" class=\"filter__answer--wrap\">\n          <div\n            v-if=\"inputType === 'multi_select'\"\n            class=\"multiselect-wrap--small\"\n          >\n            <multiselect\n              v-model=\"values\"\n              track-by=\"id\"\n              label=\"name\"\n              :placeholder=\"'Select'\"\n              :multiple=\"true\"\n              selected-label\n              :select-label=\"$t('FORMS.MULTISELECT.ENTER_TO_SELECT')\"\n              deselect-label=\"\"\n              :max-height=\"160\"\n              :options=\"dropdownValues\"\n              :allow-empty=\"false\"\n            />\n          </div>\n          <div\n            v-else-if=\"inputType === 'search_select'\"\n            class=\"multiselect-wrap--small\"\n          >\n            <multiselect\n              v-model=\"values\"\n              track-by=\"id\"\n              label=\"name\"\n              :placeholder=\"'Select'\"\n              selected-label\n              :select-label=\"$t('FORMS.MULTISELECT.ENTER_TO_SELECT')\"\n              deselect-label=\"\"\n              :max-height=\"160\"\n              :options=\"dropdownValues\"\n              :allow-empty=\"false\"\n              :option-height=\"104\"\n            />\n          </div>\n          <div v-else-if=\"inputType === 'date'\" class=\"multiselect-wrap--small\">\n            <input\n              v-model=\"values\"\n              type=\"date\"\n              :editable=\"false\"\n              class=\"answer--text-input datepicker\"\n            />\n          </div>\n          <input\n            v-else\n            v-model=\"values\"\n            type=\"text\"\n            class=\"answer--text-input\"\n            placeholder=\"Enter value\"\n          />\n        </div>\n        <woot-button\n          icon=\"dismiss\"\n          variant=\"clear\"\n          color-scheme=\"secondary\"\n          @click=\"removeFilter\"\n        />\n      </div>\n      <p v-if=\"v.values.$dirty && v.values.$error\" class=\"filter-error\">\n        {{ $t('FILTER.EMPTY_VALUE_ERROR') }}\n      </p>\n    </div>\n\n    <div v-if=\"showQueryOperator\" class=\"filter__join-operator\">\n      <hr class=\"operator__line\" />\n      <select v-model=\"query_operator\" class=\"operator__select\">\n        <option value=\"and\">\n          {{ $t('FILTER.QUERY_DROPDOWN_LABELS.AND') }}\n        </option>\n        <option value=\"or\">\n          {{ $t('FILTER.QUERY_DROPDOWN_LABELS.OR') }}\n        </option>\n      </select>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    value: {\n      type: Object,\n      default: () => null,\n    },\n    filterAttributes: {\n      type: Array,\n      default: () => [],\n    },\n    inputType: {\n      type: String,\n      default: 'plain_text',\n    },\n    dataType: {\n      type: String,\n      default: 'plain_text',\n    },\n    operators: {\n      type: Array,\n      default: () => [],\n    },\n    dropdownValues: {\n      type: Array,\n      default: () => [],\n    },\n    showQueryOperator: {\n      type: Boolean,\n      default: false,\n    },\n    v: {\n      type: Object,\n      default: () => null,\n    },\n    showUserInput: {\n      type: Boolean,\n      default: true,\n    },\n    groupedFilters: {\n      type: Boolean,\n      default: false,\n    },\n    filterGroups: {\n      type: Array,\n      default: () => [],\n    },\n    customAttributeType: {\n      type: String,\n      default: '',\n    },\n  },\n  computed: {\n    attributeKey: {\n      get() {\n        if (!this.value) return null;\n        return this.value.attribute_key;\n      },\n      set(value) {\n        const payload = this.value || {};\n        this.$emit('input', { ...payload, attribute_key: value });\n      },\n    },\n    filterOperator: {\n      get() {\n        if (!this.value) return null;\n        return this.value.filter_operator;\n      },\n      set(value) {\n        const payload = this.value || {};\n        this.$emit('input', { ...payload, filter_operator: value });\n      },\n    },\n    values: {\n      get() {\n        if (!this.value) return null;\n        return this.value.values;\n      },\n      set(value) {\n        const payload = this.value || {};\n        this.$emit('input', { ...payload, values: value });\n      },\n    },\n    query_operator: {\n      get() {\n        if (!this.value) return null;\n        return this.value.query_operator;\n      },\n      set(value) {\n        const payload = this.value || {};\n        this.$emit('input', { ...payload, query_operator: value });\n      },\n    },\n    custom_attribute_type: {\n      get() {\n        if (!this.customAttributeType) return '';\n        return this.customAttributeType;\n      },\n      set() {\n        const payload = this.value || {};\n        this.$emit('input', {\n          ...payload,\n          custom_attribute_type: this.customAttributeType,\n        });\n      },\n    },\n  },\n  watch: {\n    customAttributeType: {\n      handler(value) {\n        if (\n          value === 'conversation_attribute' ||\n          value === 'contact_attribute'\n        ) {\n          this.value.custom_attribute_type = this.customAttributeType;\n        } else this.value.custom_attribute_type = '';\n      },\n      immediate: true,\n    },\n  },\n  methods: {\n    removeFilter() {\n      this.$emit('removeFilter');\n    },\n    resetFilter() {\n      this.$emit('resetFilter');\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.filter {\n  background: var(--color-background);\n  padding: var(--space-small);\n  border: 1px solid var(--color-border);\n  border-radius: var(--border-radius-medium);\n}\n\n.filter.error {\n  background: var(--r-50);\n}\n\n.filter-inputs {\n  display: flex;\n}\n\n.filter-error {\n  color: var(--r-500);\n  display: block;\n  margin: var(--space-smaller) 0;\n}\n\n.filter__question,\n.filter__operator {\n  margin-bottom: var(--space-zero);\n  margin-right: var(--space-smaller);\n}\n\n.filter__question {\n  max-width: 30%;\n}\n\n.filter__operator {\n  max-width: 20%;\n}\n\n.filter__answer--wrap {\n  margin-right: var(--space-smaller);\n  flex-grow: 1;\n\n  input {\n    margin-bottom: 0;\n  }\n}\n.filter__answer {\n  &.answer--text-input {\n    margin-bottom: var(--space-zero);\n  }\n}\n\n.filter__join-operator-wrap {\n  position: relative;\n  z-index: var(--z-index-twenty);\n  margin: var(--space-zero);\n}\n\n.filter__join-operator {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  margin: var(--space-one) var(--space-zero);\n\n  .operator__line {\n    position: absolute;\n    width: 100%;\n    border-bottom: 1px solid var(--color-border);\n  }\n\n  .operator__select {\n    position: relative;\n    width: auto;\n    margin-bottom: var(--space-zero) !important;\n  }\n}\n\n.multiselect {\n  margin-bottom: var(--space-zero);\n}\n</style>\n"],"sourceRoot":"app/javascript/dashboard/components/widgets/FilterInput"},"metadata":{},"sourceType":"module"}