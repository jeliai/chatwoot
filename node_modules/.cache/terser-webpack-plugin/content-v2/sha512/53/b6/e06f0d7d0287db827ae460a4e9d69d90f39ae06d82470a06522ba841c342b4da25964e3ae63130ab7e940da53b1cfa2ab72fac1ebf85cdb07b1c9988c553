{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{2825:function(e,n,t){\"use strict\";t.r(n),t.d(n,\"applyDestinationMiddleware\",(function(){return o})),t.d(n,\"sourceMiddlewarePlugin\",(function(){return u}));var r=t(16),i=t(154),a=t(576),c=t(664);function o(e,n,t){return Object(r.b)(this,void 0,void 0,(function(){function i(n,t){return Object(r.b)(this,void 0,void 0,(function(){var i,o,u;return Object(r.d)(this,(function(l){switch(l.label){case 0:return i=!1,o=null,[4,Object(a.a)(t({payload:Object(c.a)(n,{clone:!0,traverse:!1}),integration:e,next:function(e){i=!0,null===e&&(o=null),e&&(o=e.obj)}}))];case 1:return l.sent(),i||null===o||(o.integrations=Object(r.a)(Object(r.a)({},n.integrations),((u={})[e]=!1,u))),[2,o]}}))}))}var o,u,l,s;return Object(r.d)(this,(function(e){switch(e.label){case 0:o=0,u=t,e.label=1;case 1:return o<u.length?(l=u[o],[4,i(n,l)]):[3,4];case 2:if(null===(s=e.sent()))return[2,null];n=s,e.label=3;case 3:return o++,[3,1];case 4:return[2,n]}}))}))}function u(e,n){function t(t){return Object(r.b)(this,void 0,void 0,(function(){var o;return Object(r.d)(this,(function(r){switch(r.label){case 0:return o=!1,[4,Object(a.a)(e({payload:Object(c.a)(t.event,{clone:!0,traverse:!1}),integrations:null!==n&&void 0!==n?n:{},next:function(e){o=!0,e&&(t.event=e.obj)}}))];case 1:if(r.sent(),!o)throw new i.b({retry:!1,type:\"middleware_cancellation\",reason:\"Middleware `next` function skipped\"});return[2,t]}}))}))}return{name:\"Source Middleware \"+e.name,type:\"before\",version:\"0.1.0\",isLoaded:function(){return!0},load:function(e){return Promise.resolve(e)},track:t,page:t,identify:t,alias:t,group:t}}}}]);","name":"js/middleware-12e0ce17d37cd69554ca.chunk.js","map":{"version":3,"names":["window","push","module","__webpack_exports__","__webpack_require__","r","d","applyDestinationMiddleware","sourceMiddlewarePlugin","tslib__WEBPACK_IMPORTED_MODULE_0__","_core_context__WEBPACK_IMPORTED_MODULE_1__","_lib_as_promise__WEBPACK_IMPORTED_MODULE_2__","_lib_to_facade__WEBPACK_IMPORTED_MODULE_3__","destination","evt","middleware","Object","this","applyMiddleware","event","fn","nextCalled","returnedEvent","_a","_b","label","payload","clone","traverse","integration","next","obj","sent","integrations","_i","middleware_1","md","result","length","apply","ctx","retry","type","reason","name","version","isLoaded","load","Promise","resolve","track","page","identify","alias","group"],"sources":["js/middleware-12e0ce17d37cd69554ca.chunk.js"],"mappings":"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"},"input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[7],{\n\n/***/ 2825:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"applyDestinationMiddleware\", function() { return applyDestinationMiddleware; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"sourceMiddlewarePlugin\", function() { return sourceMiddlewarePlugin; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16);\n/* harmony import */ var _core_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(154);\n/* harmony import */ var _lib_as_promise__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(576);\n/* harmony import */ var _lib_to_facade__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(664);\n\n\n\n\nfunction applyDestinationMiddleware(destination, evt, middleware) {\n  return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"b\"])(this, void 0, void 0, function () {\n    function applyMiddleware(event, fn) {\n      return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"b\"])(this, void 0, void 0, function () {\n        var nextCalled, returnedEvent;\n\n        var _a;\n\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __generator */ \"d\"])(this, function (_b) {\n          switch (_b.label) {\n            case 0:\n              nextCalled = false;\n              returnedEvent = null;\n              return [4\n              /*yield*/\n              , Object(_lib_as_promise__WEBPACK_IMPORTED_MODULE_2__[/* asPromise */ \"a\"])(fn({\n                payload: Object(_lib_to_facade__WEBPACK_IMPORTED_MODULE_3__[/* toFacade */ \"a\"])(event, {\n                  clone: true,\n                  traverse: false\n                }),\n                integration: destination,\n                next: function next(evt) {\n                  nextCalled = true;\n\n                  if (evt === null) {\n                    returnedEvent = null;\n                  }\n\n                  if (evt) {\n                    returnedEvent = evt.obj;\n                  }\n                }\n              }))];\n\n            case 1:\n              _b.sent();\n\n              if (!nextCalled && returnedEvent !== null) {\n                returnedEvent = returnedEvent;\n                returnedEvent.integrations = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, event.integrations), (_a = {}, _a[destination] = false, _a));\n              }\n\n              return [2\n              /*return*/\n              , returnedEvent];\n          }\n        });\n      });\n    }\n\n    var _i, middleware_1, md, result;\n\n    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __generator */ \"d\"])(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          _i = 0, middleware_1 = middleware;\n          _a.label = 1;\n\n        case 1:\n          if (!(_i < middleware_1.length)) return [3\n          /*break*/\n          , 4];\n          md = middleware_1[_i];\n          return [4\n          /*yield*/\n          , applyMiddleware(evt, md)];\n\n        case 2:\n          result = _a.sent();\n\n          if (result === null) {\n            return [2\n            /*return*/\n            , null];\n          }\n\n          evt = result;\n          _a.label = 3;\n\n        case 3:\n          _i++;\n          return [3\n          /*break*/\n          , 1];\n\n        case 4:\n          return [2\n          /*return*/\n          , evt];\n      }\n    });\n  });\n}\nfunction sourceMiddlewarePlugin(fn, integrations) {\n  function apply(ctx) {\n    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"b\"])(this, void 0, void 0, function () {\n      var nextCalled;\n      return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __generator */ \"d\"])(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            nextCalled = false;\n            return [4\n            /*yield*/\n            , Object(_lib_as_promise__WEBPACK_IMPORTED_MODULE_2__[/* asPromise */ \"a\"])(fn({\n              payload: Object(_lib_to_facade__WEBPACK_IMPORTED_MODULE_3__[/* toFacade */ \"a\"])(ctx.event, {\n                clone: true,\n                traverse: false\n              }),\n              integrations: integrations !== null && integrations !== void 0 ? integrations : {},\n              next: function next(evt) {\n                nextCalled = true;\n\n                if (evt) {\n                  ctx.event = evt.obj;\n                }\n              }\n            }))];\n\n          case 1:\n            _a.sent();\n\n            if (!nextCalled) {\n              throw new _core_context__WEBPACK_IMPORTED_MODULE_1__[/* ContextCancelation */ \"b\"]({\n                retry: false,\n                type: 'middleware_cancellation',\n                reason: 'Middleware `next` function skipped'\n              });\n            }\n\n            return [2\n            /*return*/\n            , ctx];\n        }\n      });\n    });\n  }\n\n  return {\n    name: \"Source Middleware \" + fn.name,\n    type: 'before',\n    version: '0.1.0',\n    isLoaded: function isLoaded() {\n      return true;\n    },\n    load: function load(ctx) {\n      return Promise.resolve(ctx);\n    },\n    track: apply,\n    page: apply,\n    identify: apply,\n    alias: apply,\n    group: apply\n  };\n}\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/Users/s.dastan/Desktop/chatwoot/chatwoot/node_modules/babel-loader/lib/index.js??ref--6-0!/Users/s.dastan/Desktop/chatwoot/chatwoot/node_modules/@june-so/analytics-next/dist/pkg/plugins/middleware/index.js"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyD;AACD;AACP;AACF;AACxC;AACP,SAAS,+DAAS;AAClB;AACA,aAAa,+DAAS;AACtB;;AAEA;;AAEA,eAAe,iEAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,yEAAS;AACzB,yBAAyB,uEAAQ;AACjC;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;;AAEA;AACA;AACA,6CAA6C,8DAAQ,CAAC,8DAAQ,GAAG,+BAA+B;AAChG;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;;AAEA;;AAEA,WAAW,iEAAW;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACO;AACP;AACA,WAAW,+DAAS;AACpB;AACA,aAAa,iEAAW;AACxB;AACA;AACA;AACA;AACA;AACA,cAAc,yEAAS;AACvB,uBAAuB,uEAAQ;AAC/B;AACA;AACA,eAAe;AACf,gGAAgG;AAChG;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA,wBAAwB,wEAAkB;AAC1C;AACA;AACA;AACA,eAAe;AACf;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,C","file":"x","sourcesContent":["import { __assign, __awaiter, __generator } from \"tslib\";\nimport { ContextCancelation } from '../../core/context';\nimport { asPromise } from '../../lib/as-promise';\nimport { toFacade } from '../../lib/to-facade';\nexport function applyDestinationMiddleware(destination, evt, middleware) {\n  return __awaiter(this, void 0, void 0, function () {\n    function applyMiddleware(event, fn) {\n      return __awaiter(this, void 0, void 0, function () {\n        var nextCalled, returnedEvent;\n\n        var _a;\n\n        return __generator(this, function (_b) {\n          switch (_b.label) {\n            case 0:\n              nextCalled = false;\n              returnedEvent = null;\n              return [4\n              /*yield*/\n              , asPromise(fn({\n                payload: toFacade(event, {\n                  clone: true,\n                  traverse: false\n                }),\n                integration: destination,\n                next: function next(evt) {\n                  nextCalled = true;\n\n                  if (evt === null) {\n                    returnedEvent = null;\n                  }\n\n                  if (evt) {\n                    returnedEvent = evt.obj;\n                  }\n                }\n              }))];\n\n            case 1:\n              _b.sent();\n\n              if (!nextCalled && returnedEvent !== null) {\n                returnedEvent = returnedEvent;\n                returnedEvent.integrations = __assign(__assign({}, event.integrations), (_a = {}, _a[destination] = false, _a));\n              }\n\n              return [2\n              /*return*/\n              , returnedEvent];\n          }\n        });\n      });\n    }\n\n    var _i, middleware_1, md, result;\n\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          _i = 0, middleware_1 = middleware;\n          _a.label = 1;\n\n        case 1:\n          if (!(_i < middleware_1.length)) return [3\n          /*break*/\n          , 4];\n          md = middleware_1[_i];\n          return [4\n          /*yield*/\n          , applyMiddleware(evt, md)];\n\n        case 2:\n          result = _a.sent();\n\n          if (result === null) {\n            return [2\n            /*return*/\n            , null];\n          }\n\n          evt = result;\n          _a.label = 3;\n\n        case 3:\n          _i++;\n          return [3\n          /*break*/\n          , 1];\n\n        case 4:\n          return [2\n          /*return*/\n          , evt];\n      }\n    });\n  });\n}\nexport function sourceMiddlewarePlugin(fn, integrations) {\n  function apply(ctx) {\n    return __awaiter(this, void 0, void 0, function () {\n      var nextCalled;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            nextCalled = false;\n            return [4\n            /*yield*/\n            , asPromise(fn({\n              payload: toFacade(ctx.event, {\n                clone: true,\n                traverse: false\n              }),\n              integrations: integrations !== null && integrations !== void 0 ? integrations : {},\n              next: function next(evt) {\n                nextCalled = true;\n\n                if (evt) {\n                  ctx.event = evt.obj;\n                }\n              }\n            }))];\n\n          case 1:\n            _a.sent();\n\n            if (!nextCalled) {\n              throw new ContextCancelation({\n                retry: false,\n                type: 'middleware_cancellation',\n                reason: 'Middleware `next` function skipped'\n              });\n            }\n\n            return [2\n            /*return*/\n            , ctx];\n        }\n      });\n    });\n  }\n\n  return {\n    name: \"Source Middleware \" + fn.name,\n    type: 'before',\n    version: '0.1.0',\n    isLoaded: function isLoaded() {\n      return true;\n    },\n    load: function load(ctx) {\n      return Promise.resolve(ctx);\n    },\n    track: apply,\n    page: apply,\n    identify: apply,\n    alias: apply,\n    group: apply\n  };\n}"]}}