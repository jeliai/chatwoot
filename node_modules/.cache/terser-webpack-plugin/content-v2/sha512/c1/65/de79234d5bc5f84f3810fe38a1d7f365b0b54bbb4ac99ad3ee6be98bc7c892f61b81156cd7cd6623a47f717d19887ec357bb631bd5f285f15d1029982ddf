{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{3145:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"remoteMiddlewares\",(function(){return l}));var r,i,a=n(16),s=n(590),c=n(663),o=n(668),d=(null!==(i=null===(r=window.analytics)||void 0===r?void 0:r._cdn)&&void 0!==i?i:Object(o.a)())+\"/next-integrations\";function l(e,t){var n;return Object(a.b)(this,void 0,void 0,(function(){var r,i,o,l=this;return Object(a.d)(this,(function(u){switch(u.label){case 0:return Object(s.b)()?[2,[]]:(r=null!==(n=t.enabledMiddleware)&&void 0!==n?n:{},i=Object.keys(r),o=i.map((function(t){return Object(a.b)(l,void 0,void 0,(function(){var n,r,i;return Object(a.d)(this,(function(a){switch(a.label){case 0:n=t.replace(\"@segment/\",\"\"),r=d+\"/middleware/\"+n+\"/latest/\"+n+\".js.gz\",a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Object(c.a)(r)];case 2:return a.sent(),[2,window[n+\"Middleware\"]];case 3:return i=a.sent(),e.log(\"error\",i),e.stats.increment(\"failed_remote_middleware\"),[3,4];case 4:return[2]}}))}))})),[4,Promise.all(o)]);case 1:return[2,u.sent().filter(Boolean)]}}))}))}}}]);","name":"js/remoteMiddleware-1e7605f81be1fedd492c.chunk.js","map":{"version":3,"names":["window","push","module","__webpack_exports__","__webpack_require__","r","d","remoteMiddlewares","_a","_b","tslib__WEBPACK_IMPORTED_MODULE_0__","_core_environment__WEBPACK_IMPORTED_MODULE_1__","_lib_load_script__WEBPACK_IMPORTED_MODULE_2__","_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_3__","path","analytics","_cdn","Object","ctx","settings","this","remoteMiddleware","names","scripts","_this","label","enabledMiddleware","keys","map","name","nonNamespaced","fullPath","error_1","replace","trys","sent","log","stats","increment","Promise","all","filter","Boolean"],"sources":["js/remoteMiddleware-1e7605f81be1fedd492c.chunk.js"],"mappings":"CAACA,OAAqB,aAAIA,OAAqB,cAAK,IAAIC,KAAK,CAAC,CAAC,IAAI,CAE7D,KACA,SAAUC,EAAQC,EAAqBC,GAE7C,aACAA,EAAoBC,EAAEF,GACSC,EAAoBE,EAAEH,EAAqB,qBAAqB,WAAa,OAAOI,KAC9F,IAIjBC,EAAIC,EAJiBC,EAAqCN,EAAoB,IACzDO,EAAiDP,EAAoB,KACrEQ,EAAgDR,EAAoB,KACpES,EAA8CT,EAAoB,KAQvFU,GADsF,QAA/EL,EAAiC,QAA3BD,EAAKR,OAAOe,iBAA8B,IAAPP,OAAgB,EAASA,EAAGQ,YAAyB,IAAPP,EAAgBA,EAAKQ,OAAOJ,EAA4D,EAAnEI,IACtG,qBACjB,SAASV,EAAkBW,EAAKC,GAC9B,IAAIX,EAEJ,OAAOS,OAAOP,EAAsD,EAA7DO,CAAgEG,UAAM,OAAQ,GAAQ,WAC3F,IAAIC,EAAkBC,EAAOC,EAEzBC,EAAQJ,KAEZ,OAAOH,OAAOP,EAAwD,EAA/DO,CAAkEG,MAAM,SAAUX,GACvF,OAAQA,EAAGgB,OACT,KAAK,EACH,OAAIR,OAAON,EAAiE,EAAxEM,GACK,CAAC,EAEN,KAGJI,EAAyD,QAArCb,EAAKW,EAASO,yBAAsC,IAAPlB,EAAgBA,EAAK,GACtFc,EAAQL,OAAOU,KAAKN,GACpBE,EAAUD,EAAMM,KAAI,SAAUC,GAC5B,OAAOZ,OAAOP,EAAsD,EAA7DO,CAAgEO,OAAO,OAAQ,GAAQ,WAC5F,IAAIM,EAAeC,EAAUC,EAC7B,OAAOf,OAAOP,EAAwD,EAA/DO,CAAkEG,MAAM,SAAUZ,GACvF,OAAQA,EAAGiB,OACT,KAAK,EACHK,EAAgBD,EAAKI,QAAQ,YAAa,IAC1CF,EAAWjB,EAAO,eAAiBgB,EAAgB,WAAaA,EAAgB,SAChFtB,EAAGiB,MAAQ,EAEb,KAAK,EAGH,OAFAjB,EAAG0B,KAAKjC,KAAK,CAAC,EAAG,EAAE,CAAE,IAEd,CAAC,EAENgB,OAAOL,EAAkE,EAAzEK,CAA4Ec,IAGhF,KAAK,EAIH,OAHAvB,EAAG2B,OAGI,CAAC,EAENnC,OAAO8B,EAAgB,eAE3B,KAAK,EAIH,OAHAE,EAAUxB,EAAG2B,OACbjB,EAAIkB,IAAI,QAASJ,GACjBd,EAAImB,MAAMC,UAAU,4BACb,CAAC,EAEN,GAEJ,KAAK,EACH,MAAO,CAAC,aAOX,CAAC,EAENC,QAAQC,IAAIjB,KAEhB,KAAK,EAGH,MAAO,CAAC,EAFKd,EAAG0B,OACQM,OAAOC"},"input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[10],{\n\n/***/ 3145:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"remoteMiddlewares\", function() { return remoteMiddlewares; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16);\n/* harmony import */ var _core_environment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(590);\n/* harmony import */ var _lib_load_script__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(663);\n/* harmony import */ var _lib_parse_cdn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(668);\nvar _a, _b;\n\n\n\n\n\nvar cdn = (_b = (_a = window.analytics) === null || _a === void 0 ? void 0 : _a._cdn) !== null && _b !== void 0 ? _b : Object(_lib_parse_cdn__WEBPACK_IMPORTED_MODULE_3__[/* getCDN */ \"a\"])();\nvar path = cdn + '/next-integrations';\nfunction remoteMiddlewares(ctx, settings) {\n  var _a;\n\n  return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"b\"])(this, void 0, void 0, function () {\n    var remoteMiddleware, names, scripts, middleware;\n\n    var _this = this;\n\n    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __generator */ \"d\"])(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          if (Object(_core_environment__WEBPACK_IMPORTED_MODULE_1__[/* isServer */ \"b\"])()) {\n            return [2\n            /*return*/\n            , []];\n          }\n\n          remoteMiddleware = (_a = settings.enabledMiddleware) !== null && _a !== void 0 ? _a : {};\n          names = Object.keys(remoteMiddleware);\n          scripts = names.map(function (name) {\n            return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"b\"])(_this, void 0, void 0, function () {\n              var nonNamespaced, fullPath, error_1;\n              return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __generator */ \"d\"])(this, function (_a) {\n                switch (_a.label) {\n                  case 0:\n                    nonNamespaced = name.replace('@segment/', '');\n                    fullPath = path + \"/middleware/\" + nonNamespaced + \"/latest/\" + nonNamespaced + \".js.gz\";\n                    _a.label = 1;\n\n                  case 1:\n                    _a.trys.push([1, 3,, 4]);\n\n                    return [4\n                    /*yield*/\n                    , Object(_lib_load_script__WEBPACK_IMPORTED_MODULE_2__[/* loadScript */ \"a\"])(fullPath) // @ts-ignore\n                    ];\n\n                  case 2:\n                    _a.sent(); // @ts-ignore\n\n\n                    return [2\n                    /*return*/\n                    , window[nonNamespaced + \"Middleware\"]];\n\n                  case 3:\n                    error_1 = _a.sent();\n                    ctx.log('error', error_1);\n                    ctx.stats.increment('failed_remote_middleware');\n                    return [3\n                    /*break*/\n                    , 4];\n\n                  case 4:\n                    return [2\n                    /*return*/\n                    ];\n                }\n              });\n            });\n          });\n          return [4\n          /*yield*/\n          , Promise.all(scripts)];\n\n        case 1:\n          middleware = _b.sent();\n          middleware = middleware.filter(Boolean);\n          return [2\n          /*return*/\n          , middleware];\n      }\n    });\n  });\n}\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/Users/s.dastan/Desktop/chatwoot/chatwoot/node_modules/babel-loader/lib/index.js??ref--6-0!/Users/s.dastan/Desktop/chatwoot/chatwoot/node_modules/@june-so/analytics-next/dist/pkg/plugins/remote-middleware/index.js"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAE+C;AACG;AACC;AACN;AAC7C,uHAAuH,qEAAM;AAC7H;AACO;AACP;;AAEA,SAAS,+DAAS;AAClB;;AAEA;;AAEA,WAAW,iEAAW;AACtB;AACA;AACA,cAAc,0EAAQ;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,+DAAS;AAC5B;AACA,qBAAqB,iEAAW;AAChC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,sBAAsB,2EAAU;AAChC;;AAEA;AACA,8BAA8B;;;AAG9B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH,C","file":"x","sourcesContent":["var _a, _b;\n\nimport { __awaiter, __generator } from \"tslib\";\nimport { isServer } from '../../core/environment';\nimport { loadScript } from '../../lib/load-script';\nimport { getCDN } from '../../lib/parse-cdn';\nvar cdn = (_b = (_a = window.analytics) === null || _a === void 0 ? void 0 : _a._cdn) !== null && _b !== void 0 ? _b : getCDN();\nvar path = cdn + '/next-integrations';\nexport function remoteMiddlewares(ctx, settings) {\n  var _a;\n\n  return __awaiter(this, void 0, void 0, function () {\n    var remoteMiddleware, names, scripts, middleware;\n\n    var _this = this;\n\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          if (isServer()) {\n            return [2\n            /*return*/\n            , []];\n          }\n\n          remoteMiddleware = (_a = settings.enabledMiddleware) !== null && _a !== void 0 ? _a : {};\n          names = Object.keys(remoteMiddleware);\n          scripts = names.map(function (name) {\n            return __awaiter(_this, void 0, void 0, function () {\n              var nonNamespaced, fullPath, error_1;\n              return __generator(this, function (_a) {\n                switch (_a.label) {\n                  case 0:\n                    nonNamespaced = name.replace('@segment/', '');\n                    fullPath = path + \"/middleware/\" + nonNamespaced + \"/latest/\" + nonNamespaced + \".js.gz\";\n                    _a.label = 1;\n\n                  case 1:\n                    _a.trys.push([1, 3,, 4]);\n\n                    return [4\n                    /*yield*/\n                    , loadScript(fullPath) // @ts-ignore\n                    ];\n\n                  case 2:\n                    _a.sent(); // @ts-ignore\n\n\n                    return [2\n                    /*return*/\n                    , window[nonNamespaced + \"Middleware\"]];\n\n                  case 3:\n                    error_1 = _a.sent();\n                    ctx.log('error', error_1);\n                    ctx.stats.increment('failed_remote_middleware');\n                    return [3\n                    /*break*/\n                    , 4];\n\n                  case 4:\n                    return [2\n                    /*return*/\n                    ];\n                }\n              });\n            });\n          });\n          return [4\n          /*yield*/\n          , Promise.all(scripts)];\n\n        case 1:\n          middleware = _b.sent();\n          middleware = middleware.filter(Boolean);\n          return [2\n          /*return*/\n          , middleware];\n      }\n    });\n  });\n}"]}}